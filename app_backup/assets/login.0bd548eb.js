import{k as n,o as F,b as P,w as s,p as e,m as l,q as t,V as j,v as x,x as q,be as J,D as V,E as f,bd as E,j as O,r as U,a1 as $,bk as z,d1 as G}from"./index.49ef7351.js";import{u as W}from"./useAppAbility.067d1c56.js";import{_ as H}from"./AuthProvider.d6204c04.js";import{u as k,m as K,a as Q}from"./useGenerateImageVariant.d158b4f7.js";import{r as v,e as X}from"./validators.e45b77e0.js";import{a as Y,b as Z,c as ee,d as te}from"./auth-v2-login-illustration-light.a2530d13.js";import{b as w}from"./route-block.6ee55eda.js";import{V as I}from"./VImg.33aacaa5.js";import{a as i,V as S}from"./VRow.04ed429a.js";import{V as se,c as _}from"./VCard.489135da.js";import{V as ae}from"./VAlert.a7aaf778.js";import{V as D}from"./VTextField.45867489.js";import{V as oe}from"./VCheckbox.f2a8518e.js";import{V as re}from"./VBtn.5345231d.js";import{V as L}from"./VDivider.fa0f54cb.js";import{V as le}from"./VForm.fa4c11f3.js";import"./index.0d4b9ec4.js";import"./router.7394f425.js";import"./VAvatar.89c4d356.js";import"./position.5856deb4.js";/* empty css                   */import"./VField.6fbd17fb.js";import"./index.a19f3361.js";import"./VInput.1ff489a8.js";import"./easing.36b781ab.js";import"./forwardRefs.c003b6b8.js";import"./VCounter.f0f43262.js";import"./VCheckboxBtn.cc3cfdf3.js";import"./VSelectionControl.7a61433f.js";const ne={class:"position-relative auth-bg rounded-lg w-100 ma-8 me-0"},ie={class:"d-flex align-center justify-center w-100 h-100"},me={class:"text-h5 font-weight-semibold mb-1"},ue=l("p",{class:"mb-0"}," Please sign-in to your account and start the adventure ",-1),de=l("p",{class:"text-caption mb-2"},[f(" Please do not share your "),l("strong",null,"username and password"),f(" to anyone. ")],-1),ce={class:"d-flex align-center flex-wrap justify-space-between mt-2 mb-4"},pe=l("span",{class:"mx-4"},"or",-1),fe={__name:"login",setup(ge){const T=k(te,ee,Z,Y,!0),C=k(Q,K),u=n(!1),b=E(),R=O(),N=W(),g=n({email:void 0,password:void 0}),h=n(),d=n("kawin@pzentsmart.com"),c=n("123456"),p=n(!1),B=()=>{$.post(z.api.url+"users/auth",{email:d.value,password:c.value}).then(o=>{const{accessToken:a,refreshTokenDetail:m}=o.data;m.refreshToken,m.exp;const r=G.decode(a),{userAbilities:y,userData:A}=r.userInfo;localStorage.setItem("userAbilities",JSON.stringify(y)),N.update(y),localStorage.setItem("userData",JSON.stringify(A)),localStorage.setItem("accessToken",a),localStorage.setItem("refreshTokenDetail",JSON.stringify(m)),localStorage.setItem("rememberMe",p.value),R.replace(b.query.to?String(b.query.to):"/")}).catch(o=>{const{errors:a}=o.response.data;g.value=a,console.error(o.response.data)})},M=()=>{var o;(o=h.value)==null||o.validate().then(({valid:a})=>{a&&B()})};return(o,a)=>{const m=U("RouterLink");return F(),P(S,{"no-gutters":"",class:"auth-wrapper"},{default:s(()=>[e(i,{lg:"8",class:"d-none d-lg-flex"},{default:s(()=>[l("div",ne,[l("div",ie,[e(I,{"max-width":"505",src:t(T),class:"auth-illustration mt-16 mb-2"},null,8,["src"])]),e(I,{src:t(C),class:"auth-footer-mask"},null,8,["src"])])]),_:1}),e(i,{cols:"12",lg:"4",class:"d-flex align-center justify-center"},{default:s(()=>[e(se,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-4"},{default:s(()=>[e(_,null,{default:s(()=>[e(t(j),{nodes:t(x).app.logo,class:"mb-6"},null,8,["nodes"]),l("h5",me," Welcome to "+q(t(x).app.title)+"! \u{1F44B}\u{1F3FB} ",1),ue]),_:1}),e(_,null,{default:s(()=>[e(ae,{color:"primary",variant:"tonal"},{default:s(()=>[de]),_:1})]),_:1}),e(_,null,{default:s(()=>[e(t(le),{ref_key:"refVForm",ref:h,onSubmit:J(M,["prevent"])},{default:s(()=>[e(S,null,{default:s(()=>[e(i,{cols:"12"},{default:s(()=>[e(D,{modelValue:t(d),"onUpdate:modelValue":a[0]||(a[0]=r=>V(d)?d.value=r:null),label:"Email",type:"email",rules:[t(v),t(X)],"error-messages":t(g).email},null,8,["modelValue","rules","error-messages"])]),_:1}),e(i,{cols:"12"},{default:s(()=>[e(D,{modelValue:t(c),"onUpdate:modelValue":a[1]||(a[1]=r=>V(c)?c.value=r:null),label:"Password",rules:[t(v)],type:t(u)?"text":"password","error-messages":t(g).password,"append-inner-icon":t(u)?"tabler-eye-off":"tabler-eye","onClick:appendInner":a[2]||(a[2]=r=>u.value=!t(u))},null,8,["modelValue","rules","type","error-messages","append-inner-icon"]),l("div",ce,[e(oe,{modelValue:t(p),"onUpdate:modelValue":a[3]||(a[3]=r=>V(p)?p.value=r:null),label:"Remember me"},null,8,["modelValue"]),e(m,{class:"text-primary ms-2 mb-1",to:{name:"forgot-password"}},{default:s(()=>[f(" Forgot Password? ")]),_:1})]),e(re,{block:"",type:"submit"},{default:s(()=>[f(" Login ")]),_:1})]),_:1}),e(i,{cols:"12",class:"d-flex align-center"},{default:s(()=>[e(L),pe,e(L)]),_:1}),e(i,{cols:"12",class:"text-center"},{default:s(()=>[e(H)]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1})}}};typeof w=="function"&&w(fe);export{fe as default};
