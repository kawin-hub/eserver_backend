import{o as x,b as w,w as l,p as e,E as D,x as I,C as E,m as n,j as Pe,bd as ge,k as g,c as k,q as t,be as re,bk as z,y as X,D as U,F as q,Z as _e,$ as Te,a as R,L as Se,a3 as he,a4 as $e,al as ee}from"./index.49ef7351.js";import{n as te,a as je,u as Oe}from"./brandListStore.cec48ba7.js";import{r as M}from"./validators.e45b77e0.js";import{u as Le}from"./modelListStore.981a5607.js";import{V as $,c as S,e as Me}from"./VCard.489135da.js";import{V as qe}from"./position.5856deb4.js";import{V as oe}from"./VDialog.1ef42ac0.js";import{V as C}from"./VBtn.5345231d.js";import{a as F,V as Y}from"./VRow.04ed429a.js";import{V as N}from"./VAvatar.89c4d356.js";import{V as Ve}from"./VDivider.fa0f54cb.js";import{V as Re}from"./VForm.fa4c11f3.js";import{V as L}from"./VTextField.45867489.js";import{V as Be}from"./VTextarea.07a701c1.js";import{V as le}from"./VSelect.dd7a9d71.js";import{V as Z}from"./VChip.d8bf415a.js";import{V as ue,a as me}from"./VAlert.a7aaf778.js";import{V as pe}from"./VCheckbox.f2a8518e.js";import{V as Ee}from"./VSnackbar.d1a2f967.js";import{V as ze}from"./VCombobox.542478dd.js";import{a as Ne}from"./formatters.1ccc6423.js";import{V as ae}from"./VImg.33aacaa5.js";import{V as We}from"./VSpacer.8c8e1470.js";import{_ as Ge}from"./DialogCloseBtn.65a007fa.js";import{V as Ke}from"./VFileInput.a1cfae1e.js";import{V as Je}from"./VMenu.d92d4813.js";import{V as Ye,a as Ze,b as He}from"./VList.3a0b4683.js";import{V as Qe}from"./VTable.1ed5b077.js";import{b as ce}from"./route-block.6ee55eda.js";import{V as Xe,a as el}from"./VTabs.0297fe0f.js";import{V as fe,a as be}from"./VWindowItem.8776e1a5.js";import"./index.823c123d.js";import"./index.0d4b9ec4.js";import"./router.7394f425.js";import"./scopeId.1cbcff4d.js";import"./forwardRefs.c003b6b8.js";import"./VOverlay.1858ab35.js";import"./lazy.ff556122.js";import"./easing.36b781ab.js";import"./dialog-transition.d8941cb2.js";import"./VInput.1ff489a8.js";import"./index.a19f3361.js";/* empty css                   */import"./VField.6fbd17fb.js";import"./VCounter.f0f43262.js";import"./VCheckboxBtn.cc3cfdf3.js";import"./VSelectionControl.7a61433f.js";import"./filter.7a884d45.js";import"./VSlideGroup.f767825e.js";import"./ssrBoot.3f4cfd1b.js";const ll={__name:"LoadingPopup",props:{isDialogVisible:{type:Boolean,required:!0},txtDisplay:{type:String,required:!0}},setup(V){const o=V;return(s,f)=>(x(),w(oe,{modelValue:o.isDialogVisible,"onUpdate:modelValue":f[0]||(f[0]=p=>o.isDialogVisible=p),width:"300"},{default:l(()=>[e($,{color:"primary",width:"300"},{default:l(()=>[e(S,{class:"pt-3"},{default:l(()=>[D(I(o.txtDisplay)+" ",1),e(qe,{indeterminate:"",color:"white",class:"mb-0"})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},tl={class:"text-lg font-weight-medium"},al={__name:"ConfirmDialog",props:{confirmationMsg:{type:String,required:!0},isDialogVisible:{type:Boolean,required:!0},doConfirmDelete:{type:Function},dialogType:{type:String,default:"warning"}},emits:["update:isDialogVisible"],setup(V,{emit:o}){const s=V,f={warning:{color:"warning",icon:"tabler-alert-circle"}},p=y=>{o("update:isDialogVisible",y)},b=()=>{o("update:isDialogVisible",!1)};return(y,_)=>(x(),w(oe,{"max-width":"500","model-value":s.isDialogVisible,"onUpdate:modelValue":p},{default:l(()=>[e($,{class:"text-center px-10 py-4"},{default:l(()=>[e(S,null,{default:l(()=>[e(E,{size:"100",start:"",icon:f[s.dialogType].icon,class:"mb-4",color:f[s.dialogType].color},null,8,["icon","color"]),n("h6",tl,I(s.confirmationMsg),1)]),_:1}),e(Me,{class:"align-center justify-center gap-2"},{default:l(()=>[e(C,{variant:"elevated",onClick:s.doConfirmDelete},{default:l(()=>[D(" Confirm ")]),_:1},8,["onClick"]),e(C,{color:"secondary",variant:"tonal",onClick:b},{default:l(()=>[D(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}},ol={class:"d-flex flex-column justify-center gap-4"},sl={class:"d-flex flex-wrap gap-2"},dl=n("span",{class:"d-none d-sm-block"},"Upload new photo",-1),il=n("span",{class:"d-none d-sm-block"},"Reset",-1),nl=n("p",{class:"text-body-1 mb-0"}," Allowed JPG, GIF or PNG. Max size of 800K ",-1),rl=n("p",{class:"mb-0"}," Are we going to stock this model in our store? ",-1),ul=n("p",{class:"mb-0"}," Once you delete this model, there is no going back. Please be certain. ",-1),ml={__name:"main-detail",props:{models:{type:Object,default:[]},selectedItems:{type:Object,default:{}},relatedImageFiles:{type:Object,default:{}},relatedPDFFiles:{type:Object,default:{}},pageType:{type:Object,default:{}},relatedImageFilesAlreadyUploaded:{type:Object,default:[]},relatedPDFFilesAlreadyUploaded:{type:Object,default:[]},deletedFile:{type:Object}},emits:["update:models"],setup(V,{emit:o}){const s=V,f=Pe(),p=ge(),b=Le,y=je,_=Oe,A=g([]),P=g([]),j=g([]),c={_id:null,modelCode:"",name:"",description:"",categories:[],brand_id:null,status:"",price:0,stock:!1,installationPrice:0,subcontractorInstallationPrice:0,avatar:te,avatarFile:"",images:[],relatedModels:[],minimum:0,maximum:0,defaultWarranty:{},documents:[],createdAt:"",updatedAt:""},v=g(),d=g(!1),u=g("Creating new model..."),T=g({text:"",color:"",visible:!1}),de=g(),B=g(!1),r=g(structuredClone(c)),W=g(!1),Fe=[m=>!!m||"Please confirm account deactivation"],xe=()=>{if(s.pageType.action=="update"){let m=null,i=[];for(let a of A.value)p.query.id==a._id&&(m=a),i[a._id]=a;c._id=m._id,c.modelCode=m.modelCode,c.name=m.name,c.description=m.description,c.categories=Object.values(m.category_ids),c.brand_id=m.brand_id,c.status=m.status,c.price=m.price,c.installationPrice=m.installationPrice,c.subcontractorInstallationPrice=m.subcontractorInstallationPrice!=null?m.subcontractorInstallationPrice:0,c.minimum=m.minimum,c.maximum=m.maximum,c.createdAt=m.createdAt,c.updatedAt=m.updatedAt,c.stock=m.stock,c.avatar=m.avatar!=""?z.api.url+m.avatar:te;for(let a of m.relatedModels)s.selectedItems[a]=i[a];for(let a of m.images)s.relatedImageFilesAlreadyUploaded[s.relatedImageFilesAlreadyUploaded.length]=a;for(let a of m.documents)s.relatedPDFFilesAlreadyUploaded[s.relatedPDFFilesAlreadyUploaded.length]=a;r.value=structuredClone(c)}},Ue=()=>{r.value=structuredClone(c),Object.keys(s.selectedItems).forEach((m,i)=>{delete s.selectedItems[m]})},Ie=()=>{y.fetchData().then(m=>{P.value=m.data.productBrands})},De=()=>{_.fetchData().then(m=>{j.value=m.data.productCategories})},ie=()=>{b.fetchData().then(m=>{A.value=m.data.productModels,xe(),o("update:models",A.value)})};Ie(),De(),ie();const Ae=m=>{const i=new FileReader,{files:a}=m.target;a&&a.length&&(i.readAsDataURL(a[0]),i.onload=()=>{typeof i.result=="string"&&(r.value.avatar=i.result,r.value.avatarFile=a[0])})},ke=()=>{r.value.avatar=c.avatar,r.value.avatarFile=""},H=g(),Ce=async()=>{var i;let m=null;for(let a of A.value)if(p.query.id==a._id){m=a;break}A.value.forEach(a=>{a.modelCode==r.value.modelCode&&(s.pageType.action=="update"&&m.modelCode!=r.value.modelCode&&(H.value.rules[1]="Model is already exist."),s.pageType.action=="new"&&(H.value.rules[1]="Model is already exist."))}),(i=v.value)==null||i.validate().then(async({valid:a})=>{if(a){r.value.relatedModels=[],Object.keys(s.selectedItems).forEach((O,J)=>{r.value.relatedModels[J]=O});let h=new FormData;for(const O in r.value)h.append(O,r.value[O]);h.delete("avatarFile"),h.delete("avatar"),h.append("avatar",r.value.avatarFile);for(var G of s.relatedImageFiles)h.append("images",G);for(var we of s.relatedPDFFiles)h.append("documents",we);let Q=null,K={status:"",text:""};s.pageType.action=="new"?(Q=b.insertItem(h),K={status:"inserted",text:`Insert new model "${r.value.modelCode} : ${r.value.name}" successfully`}):s.pageType.action=="update"&&(h.append("deletedImage",s.deletedFile.image),h.append("deletedPdf",s.deletedFile.pdf),Q=b.updateItem(h),K={status:"updated",text:`Update model "${r.value.modelCode} : ${r.value.name}" successfully`}),d.value=!0,Q.then(O=>{ie(),f.push({name:"system-setting-product-tab",params:{tab:"models"},query:{status:K.status,text:K.text}})}).catch(O=>{d=!1;let J=O.message;O.response.data.message!==void 0&&(J=O.response.data.message),T.value.text=J,T.value.color="error",T.value.visible=!0})}else T.value.text="Incorrect input. Please recheck all fields.",T.value.color="error",T.value.visible=!0})},ne=async()=>{B.value=!1,b.deleteItem({_id:p.query.id}).then(m=>{let i={status:"Deleted",text:`Delete model "${m.data.result.modelCode} : ${m.data.result.name}" successfully`};f.push({name:"system-setting-product-tab",params:{tab:"models"},query:{status:i.status,text:i.text}})})};return(m,i)=>(x(),k(q,null,[e(Y,null,{default:l(()=>[e(F,{cols:"12"},{default:l(()=>[e($,{title:V.pageType.title},{default:l(()=>[e(S,{class:"d-flex"},{default:l(()=>[e(N,{rounded:"",size:"100",class:"me-6",image:t(r).avatar},null,8,["image"]),n("form",ol,[n("div",sl,[e(C,{color:"primary",onClick:i[0]||(i[0]=a=>{var G;return(G=t(de))==null?void 0:G.click()})},{default:l(()=>[e(E,{icon:"tabler-cloud-upload",class:"d-sm-none"}),dl]),_:1}),n("input",{ref_key:"refInputEl",ref:de,type:"file",name:"file",accept:".jpeg,.png,.jpg,GIF",hidden:"",onInput:Ae},null,544),e(C,{type:"reset",color:"secondary",variant:"tonal",onClick:ke},{default:l(()=>[il,e(E,{icon:"tabler-refresh",class:"d-sm-none"})]),_:1})]),nl])]),_:1}),e(Ve),e(S,{class:"pt-2"},{default:l(()=>[e(Re,{ref_key:"refForm",ref:v,class:"mt-6",onSubmit:re(Ce,["prevent"])},{default:l(()=>[e(Y,null,{default:l(()=>[e(F,{md:"6",cols:"12"},{default:l(()=>[e(L,{modelValue:t(r).modelCode,"onUpdate:modelValue":i[1]||(i[1]=a=>t(r).modelCode=a),rules:[t(M)],label:"Model number",ref_key:"modelCodeTxtBox",ref:H},null,8,["modelValue","rules"])]),_:1}),e(F,{md:"6",cols:"12"},{default:l(()=>[e(L,{modelValue:t(r).name,"onUpdate:modelValue":i[2]||(i[2]=a=>t(r).name=a),label:"Name",rules:[t(M)]},null,8,["modelValue","rules"])]),_:1}),e(F,{cols:"12"},{default:l(()=>[e(Be,{modelValue:t(r).description,"onUpdate:modelValue":i[3]||(i[3]=a=>t(r).description=a),label:"Description",rules:[t(M)]},null,8,["modelValue","rules"])]),_:1}),e(F,{cols:"12",md:"6"},{default:l(()=>[e(le,{modelValue:t(r).categories,"onUpdate:modelValue":i[4]||(i[4]=a=>t(r).categories=a),items:t(j),"item-title":"name","item-value":"_id",label:"Select Categories",multiple:"","clear-icon":"tabler-x",rules:[t(M)]},{selection:l(({item:a})=>[e(Z,null,{default:l(()=>[n("span",null,I(a.title),1)]),_:2},1024)]),_:1},8,["modelValue","items","rules"])]),_:1}),e(F,{cols:"12",md:"6"},{default:l(()=>[e(le,{modelValue:t(r).brand_id,"onUpdate:modelValue":i[5]||(i[5]=a=>t(r).brand_id=a),label:"Choose Brand",items:t(P),"item-title":"name","item-value":"_id",rules:[t(M)]},{selection:l(({item:a})=>[e(Z,null,{default:l(()=>[e(N,{start:"",image:t(z).api.url+a.raw.avatar},null,8,["image"]),n("span",null,I(a.title),1)]),_:2},1024)]),_:1},8,["modelValue","items","rules"])]),_:1}),e(F,{cols:"12",md:"6"},{default:l(()=>[e(le,{modelValue:t(r).status,"onUpdate:modelValue":i[6]||(i[6]=a=>t(r).status=a),label:"Choose Status",items:[{title:"Inactive",value:"inactive"},{title:"Active",value:"active"}],"item-title":"title","item-value":"value",rules:[t(M)]},null,8,["modelValue","rules"])]),_:1}),e(F,{cols:"12",md:"6"},{default:l(()=>[e(L,{modelValue:t(r).price,"onUpdate:modelValue":i[7]||(i[7]=a=>t(r).price=a),label:"Price",prefix:"\u0E3F",type:"number",rules:[t(M)]},null,8,["modelValue","rules"])]),_:1}),e(F,{cols:"12",md:"6"},{default:l(()=>[e(L,{modelValue:t(r).installationPrice,"onUpdate:modelValue":i[8]||(i[8]=a=>t(r).installationPrice=a),label:"Installation Price",prefix:"\u0E3F",type:"number",rules:[t(M)]},null,8,["modelValue","rules"])]),_:1}),e(F,{cols:"12",md:"6"},{default:l(()=>[e(L,{modelValue:t(r).subcontractorInstallationPrice,"onUpdate:modelValue":i[9]||(i[9]=a=>t(r).subcontractorInstallationPrice=a),label:"Subcontractor Installation Price",prefix:"\u0E3F",type:"number"},null,8,["modelValue"])]),_:1}),e(F,{cols:"12",md:"6"},{default:l(()=>[e(L,{modelValue:t(r).minimum,"onUpdate:modelValue":i[10]||(i[10]=a=>t(r).minimum=a),label:"Minimum Stock",type:"number"},null,8,["modelValue"])]),_:1}),e(F,{cols:"12",md:"6"},{default:l(()=>[e(L,{modelValue:t(r).maximum,"onUpdate:modelValue":i[11]||(i[11]=a=>t(r).maximum=a),label:"Maximum Stock",type:"number"},null,8,["modelValue"])]),_:1}),V.pageType.action=="update"?(x(),w(F,{key:0,cols:"12",md:"6"},{default:l(()=>[e(L,{modelValue:t(r).createdAt,"onUpdate:modelValue":i[12]||(i[12]=a=>t(r).createdAt=a),label:"Created at",readonly:""},null,8,["modelValue"])]),_:1})):X("",!0),V.pageType.action=="update"?(x(),w(F,{key:1,cols:"12",md:"6"},{default:l(()=>[e(L,{modelValue:t(r).updatedAt,"onUpdate:modelValue":i[13]||(i[13]=a=>t(r).updatedAt=a),label:"Updated at",readonly:""},null,8,["modelValue"])]),_:1})):X("",!0),e(F,null,{default:l(()=>[e(ue,{color:"info",variant:"tonal",class:"mb-4"},{default:l(()=>[e(me,{class:"mb-1"},{default:l(()=>[D(" Shall we stock? ")]),_:1}),rl]),_:1}),n("div",null,[e(pe,{modelValue:t(r).stock,"onUpdate:modelValue":i[14]||(i[14]=a=>t(r).stock=a),label:"Yes, we're going to stock this model."},null,8,["modelValue"])])]),_:1}),e(F,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:l(()=>[e(C,{type:"submit"},{default:l(()=>[D("Save changes")]),_:1}),e(C,{color:"secondary",variant:"tonal",type:"reset",onClick:re(Ue,["prevent"])},{default:l(()=>[D(" Reset ")]),_:1},8,["onClick"])]),_:1}),e(Ee,{modelValue:t(T).visible,"onUpdate:modelValue":i[15]||(i[15]=a=>t(T).visible=a),location:"bottom end",variant:"flat",color:t(T).color},{default:l(()=>[D(I(t(T).text),1)]),_:1},8,["modelValue","color"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["title"])]),_:1}),V.pageType.action=="update"?(x(),w(F,{key:0,cols:"12"},{default:l(()=>[e($,{title:"Delete this Model"},{default:l(()=>[e(S,null,{default:l(()=>[e(ue,{color:"warning",variant:"tonal",class:"mb-4"},{default:l(()=>[e(me,{class:"mb-1"},{default:l(()=>[D(" Are you sure you want to delete this model? ")]),_:1}),ul]),_:1}),n("div",null,[e(pe,{modelValue:t(W),"onUpdate:modelValue":i[16]||(i[16]=a=>U(W)?W.value=a:null),rules:Fe,label:"I confirm this model deactivation"},null,8,["modelValue"])]),e(C,{disabled:!t(W),color:"error",class:"mt-3",onClick:i[17]||(i[17]=a=>B.value=!0)},{default:l(()=>[D(" Deactivate This Model ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})):X("",!0)]),_:1}),e(al,{isDialogVisible:t(B),"onUpdate:isDialogVisible":i[18]||(i[18]=a=>U(B)?B.value=a:null),"confirmation-msg":"Are you sure you want to deactivate this model?","do-confirm-delete":ne,"onUpdate:do-confirm-delete":i[19]||(i[19]=a=>ne=a),dialogType:"warning"},null,8,["isDialogVisible"]),e(ll,{isDialogVisible:t(d),txtDisplay:t(u)},null,8,["isDialogVisible","txtDisplay"])],64))}},pl={__name:"TextAutocomplete",props:{items:{type:Object,default:[]},item_title:{type:String,default:"title"},item_value:{type:String,default:"_id"},selectedItems:{type:Object,default:{}}},setup(V){const o=V,s=g(null);return _e(s,()=>{typeof s.value=="object"&&(o.selectedItems[s.value[o.item_value]]=s.value)}),(f,p)=>(x(),w(ze,{modelValue:t(s),"onUpdate:modelValue":p[0]||(p[0]=b=>U(s)?s.value=b:null),items:o.items,"item-title":o.item_title,"item-value":"_id",label:"Select Models"},null,8,["modelValue","items","item-title"]))}};const cl={class:"text-no-wrap"},fl={key:1},bl={class:""},yl={class:"text-base pa-3"},vl={class:"text-body-1 pa-3"},gl={class:"d-flex flex-column text-sm-end gap-2"},_l={class:"order-sm-0 order-1"},Vl={__name:"ModelRelatedTable",props:{models:{type:Object,default:[]},selectedItems:{type:Object,default:{}}},setup(V){const o=V,s=g([]),f=()=>{s.value=o.models,s.value.forEach((b,y)=>{s.value[y].title=b.modelCode+" : "+b.name})};Te(()=>{f()});const p=b=>{delete o.selectedItems[b]};return(b,y)=>(x(),w(S,{class:"d-flex flex-column gap-y-4"},{default:l(()=>[e(pl,{items:t(s),"onUpdate:items":y[0]||(y[0]=_=>U(s)?s.value=_:null),selectedItems:o.selectedItems,"onUpdate:selectedItems":y[1]||(y[1]=_=>o.selectedItems=_),item_title:"title",item_value:"_id"},null,8,["items","selectedItems"]),(x(!0),k(q,null,R(o.selectedItems,_=>(x(),w($,{key:_._id,border:"",flat:""},{default:l(()=>[e(S,{class:"d-flex flex-sm-row flex-column pa-4"},{default:l(()=>[n("div",cl,[e(N,{variant:"tonal",class:"me-3",size:"75"},{default:l(()=>[_.avatar?(x(),w(ae,{key:0,src:t(z).api.url+_.avatar,width:100},null,8,["src"])):(x(),k("span",fl,I(t(Ne)(_.name)),1))]),_:2},1024)]),n("div",bl,[n("h4",yl,[D(I(_.name)+" ",1),e(Z,{label:"",color:_.status=="active"?"success":"secondary",size:"small"},{default:l(()=>[D(I(_.status=="active"?"Active":"Inactive"),1)]),_:2},1032,["color"])]),n("span",vl," \u0E3F "+I(_.price),1)]),e(We),n("div",gl,[n("div",_l,[e(C,{variant:"tonal",onClick:A=>p(_._id)},{default:l(()=>[D(" Delete ")]),_:2},1032,["onClick"])])])]),_:2},1024)]),_:2},1024))),128))]),_:1}))}},ye="/assets/pdf.8995d890.png",Fl={__name:"ConfirmationPopup",props:{title:{type:String,required:!0},label:{type:String,required:!0},isDialogVisible:{type:Boolean,default:!1},callBack:{type:Function,required:!0},callBackIndex:{type:Number,required:!0}},emits:["update:isDialogVisible"],setup(V,{emit:o}){const s=V;return(f,p)=>{const b=Ge;return x(),w(oe,{modelValue:s.isDialogVisible,"onUpdate:modelValue":p[3]||(p[3]=y=>s.isDialogVisible=y),persistent:"",class:"v-dialog-sm"},{default:l(()=>[e(b,{onClick:p[0]||(p[0]=y=>o("update:isDialogVisible",!1))}),e($,{title:s.title},{default:l(()=>[e(S,null,{default:l(()=>[D(I(s.label),1)]),_:1}),e(S,{class:"d-flex justify-end gap-3 flex-wrap"},{default:l(()=>[e(C,{color:"secondary",variant:"tonal",onClick:p[1]||(p[1]=y=>o("update:isDialogVisible",!1))},{default:l(()=>[D(" Cancel ")]),_:1}),e(C,{onClick:p[2]||(p[2]=y=>{s.callBack(s.callBackIndex),o("update:isDialogVisible",!1)})},{default:l(()=>[D(" Delete ")]),_:1})]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])}}};const se=V=>(he("data-v-74ba0665"),V=V(),$e(),V),xl={class:"me-n2"},Ul=se(()=>n("thead",null,[n("tr",null,[n("th",{class:"font-weight-semibold"},"FILE"),n("th",{class:"font-weight-semibold"},"DATE"),n("th",{class:"font-weight-semibold",width:"130"},"ACTION")])],-1)),Il={style:{"padding-block":"0.61rem"}},Dl={class:"d-flex align-center"},Al={class:"me-3"},kl={class:"text-medium-emphasis font-weight-semibold text-base mb-0"},Cl=["href"],wl={class:"text-sm mb-0 opacity-100 text-disabled"},Pl={style:{"padding-block":"0.61rem"}},Tl=se(()=>n("p",{class:"text-medium-emphasis font-weight-semibold text-base mb-0"}," Upload ",-1)),Sl={class:"text-sm opacity-100 text-disabled"},hl={style:{"padding-block":"0.61rem"}},$l={class:"font-weight-medium text-medium-emphasis text-base"},jl={class:"order-sm-0 order-1"},Ol={style:{"padding-block":"0.61rem"}},Ll={class:"d-flex align-center"},Ml={class:"me-3"},ql={class:"text-medium-emphasis font-weight-semibold text-base mb-0"},Rl={class:"text-sm mb-0 opacity-100 text-disabled"},Bl={style:{"padding-block":"0.61rem"}},El=se(()=>n("p",{class:"text-medium-emphasis font-weight-semibold text-base mb-0"}," Upload ",-1)),zl={class:"text-sm opacity-100 text-disabled"},Nl={style:{"padding-block":"0.61rem"}},Wl={class:"font-weight-medium text-medium-emphasis text-base"},Gl={__name:"FileInputSelectionSlot",props:{label:{type:String,default:"Input File"},acceptType:{type:String,default:""},prependIcon:{type:String,default:"tabler-paperclip"},files:{type:Array,default:[]},filesAlreadyUploaded:{type:Object,default:[]},popUpTitle:{type:String,required:!0},popUpLabel:{type:String,required:!0},deletedFile:{type:Array,default:[]}},setup(V){const o=V,s=g(!1),f=g(0),p=g(o.popUpLabel),b=g(o.files),y=g(o.files),_=()=>{if(o.acceptType.indexOf("image")>=0)A();else if(o.acceptType.indexOf("pdf")>=0){let c=b.value;y.value=[];for(let v=0;v<c.length;v++)y.value[v]=c[v],y.value[v].localURL=ye}},A=()=>{let c=b.value;y.value=[];for(let v=0;v<c.length;v++){let d=new FileReader;d.readAsDataURL(c[v]),d.onload=()=>{typeof d.result=="string"&&(y.value[v]=c[v],y.value[v].localURL=d.result)}}};_e(b,()=>{o.files.splice(0),o.files.push(...b.value),_()});const P=c=>{let v="";return o.acceptType.indexOf("image")>=0?c.path==""?v=te:v=z.api.url+c.path:o.acceptType.indexOf("pdf")>=0&&(v=ye),v},j=c=>{o.deletedFile[o.deletedFile.length]=o.filesAlreadyUploaded[c]._id,o.filesAlreadyUploaded.splice(c,1)};return(c,v)=>(x(),k(q,null,[e(F,null,{default:l(()=>[e(Ke,{modelValue:t(b),"onUpdate:modelValue":v[0]||(v[0]=d=>U(b)?b.value=d:null),multiple:"",placeholder:"Upload your documents",label:o.label,"prepend-icon":o.prependIcon,accept:o.acceptType,onChange:v[1]||(v[1]=()=>{})},{selection:l(({fileNames:d})=>[(x(!0),k(q,null,R(d,u=>(x(),w(Z,{key:u,label:"",size:"small",variant:"outlined",color:"primary",class:"me-2"},{default:l(()=>[D(I(u),1)]),_:2},1024))),128))]),_:1},8,["modelValue","label","prepend-icon","accept"])]),_:1}),e(F,null,{default:l(()=>[e($,{title:"Recent Transaction"},{append:l(()=>[n("div",xl,[e(C,{icon:"",color:"default",size:"x-small",variant:"plain"},{default:l(()=>[e(E,{size:"22",icon:"tabler-dots-vertical"}),e(Je,{activator:"parent"},{default:l(()=>[e(Ye,null,{default:l(()=>[(x(),k(q,null,R(["Download"],(d,u)=>e(Ze,{key:u,value:u},{default:l(()=>[e(He,null,{default:l(()=>[D(I(d),1)]),_:2},1024)]),_:2},1032,["value"])),64))]),_:1})]),_:1})]),_:1})])]),default:l(()=>[e(Ve),e(Qe,{class:"text-no-wrap"},{default:l(()=>[Ul,n("tbody",null,[(x(!0),k(q,null,R(o.filesAlreadyUploaded,(d,u)=>(x(),k("tr",{key:d.name},[n("td",Il,[n("div",Dl,[n("div",Al,[e(N,{variant:"tonal",class:"me-3",size:"38"},{default:l(()=>[e(ae,{src:P(d),width:"50"},null,8,["src"])]),_:2},1024)]),n("div",null,[n("p",kl,[n("a",{href:t(z).api.url+d.path,target:"_blank"},I(d.name),9,Cl)]),n("p",wl,I(d.name),1)])])]),n("td",Pl,[Tl,n("span",Sl,I(d.createdAt),1)]),n("td",hl,[n("span",$l,[n("div",jl,[e(C,{variant:"tonal",onClick:T=>{s.value=!0,f.value=u,p.value=o.popUpLabel+' "'+d.name+'"?'}},{default:l(()=>[D(" Delete ")]),_:2},1032,["onClick"])])])])]))),128)),(x(!0),k(q,null,R(t(y),d=>(x(),k("tr",{key:d.name},[n("td",Ol,[n("div",Ll,[n("div",Ml,[e(N,{variant:"tonal",class:"me-3",size:"38"},{default:l(()=>[e(ae,{src:d.localURL,width:"50"},null,8,["src"])]),_:2},1024)]),n("div",null,[n("p",ql,I(d.name),1),n("p",Rl,I(d.name),1)])])]),n("td",Bl,[El,n("span",zl,I(d.lastModifiedDate),1)]),n("td",Nl,[n("span",Wl,I(),1)])]))),128))])]),_:1})]),_:1})]),_:1}),e(Fl,{title:o.popUpTitle,label:t(p),"is-dialog-visible":t(s),"onUpdate:is-dialog-visible":v[2]||(v[2]=d=>U(s)?s.value=d:null),"call-back":j,"call-back-index":t(f)},null,8,["title","label","is-dialog-visible","call-back-index"])],64))}},ve=Se(Gl,[["__scopeId","data-v-74ba0665"]]),Kl={__name:"related",props:{models:{type:Object,default:[]},selectedItems:{type:Object,default:{}},relatedImageFiles:{type:Object,default:[]},relatedPDFFiles:{type:Object,default:[]},alreadyUploaded:{type:Object,default:[]},relatedImageFilesAlreadyUploaded:{type:Object,default:[]},relatedPDFFilesAlreadyUploaded:{type:Object,default:[]},deletedFile:{type:Object}},setup(V){const o=V;return g([]),g([]),(s,f)=>(x(),w(Y,null,{default:l(()=>[e(F,{cols:"12",md:"12"},{default:l(()=>[e($,{title:"Related Models"},{default:l(()=>[e(Vl,{models:o.models,"onUpdate:models":f[0]||(f[0]=p=>o.models=p),selectedItems:o.selectedItems,"onUpdate:selectedItems":f[1]||(f[1]=p=>o.selectedItems=p)},null,8,["models","selectedItems"])]),_:1})]),_:1}),e(F,{cols:"12"},{default:l(()=>[e($,{title:"Images"},{default:l(()=>[e(S,null,{default:l(()=>[e(ve,{acceptType:"image/*",label:"Choose Images",prependIcon:"tabler-camera",files:o.relatedImageFiles,filesAlreadyUploaded:o.relatedImageFilesAlreadyUploaded,"onUpdate:filesAlreadyUploaded":f[2]||(f[2]=p=>o.relatedImageFilesAlreadyUploaded=p),popUpTitle:"Delete related image.",popUpLabel:"Are you sure you want to delete",deletedFile:o.deletedFile.image,"onUpdate:deletedFile":f[3]||(f[3]=p=>o.deletedFile.image=p)},null,8,["files","filesAlreadyUploaded","deletedFile"])]),_:1})]),_:1})]),_:1}),e(F,{cols:"12"},{default:l(()=>[e($,{title:"Documents (PDF)"},{default:l(()=>[e(S,null,{default:l(()=>[e(ve,{acceptType:"application/pdf",label:"Choose PDF",files:o.relatedPDFFiles,filesAlreadyUploaded:o.relatedPDFFilesAlreadyUploaded,"onUpdate:filesAlreadyUploaded":f[4]||(f[4]=p=>o.relatedPDFFilesAlreadyUploaded=p),popUpTitle:"Delete related PDF.",popUpLabel:"Are you sure you want to delete",deletedFile:o.deletedFile.pdf,"onUpdate:deletedFile":f[5]||(f[5]=p=>o.deletedFile.pdf=p)},null,8,["files","filesAlreadyUploaded","deletedFile"])]),_:1})]),_:1})]),_:1})]),_:1}))}},Jl={__name:"[tab]",setup(V){const o=ge(),s=g(o.params.tab),f=g([]),p=ee({action:"new",title:"CREATE NEW MODEL"}),b=ee({}),y=g([]),_=g([]),A=g([]),P=ee({image:[],pdf:[]}),j=g([]);o.query.id!==void 0&&(p.action="update",p.title="UPDATE MODEL");const c=[{title:"Basic info",icon:"tabler-box-model",tab:"main-detail",query:o.query},{title:"Related",icon:"tabler-link",tab:"related",query:o.query}];return(v,d)=>(x(),k("section",null,[e(Y,null,{default:l(()=>[e(F,{cols:"12"},{default:l(()=>[e(Xe,{modelValue:t(s),"onUpdate:modelValue":d[0]||(d[0]=u=>U(s)?s.value=u:null),class:"v-tabs-pill"},{default:l(()=>[(x(),k(q,null,R(c,u=>e(el,{key:u.icon,value:u.tab,to:{name:"system-setting-product-model-tab",params:{tab:u.tab},query:t(o).query}},{default:l(()=>[e(E,{size:"20",start:"",icon:u.icon},null,8,["icon"]),D(" "+I(u.title),1)]),_:2},1032,["value","to"])),64))]),_:1},8,["modelValue"])]),_:1}),e(F,{cols:"12"},{default:l(()=>[e(fe,{modelValue:t(s),"onUpdate:modelValue":d[6]||(d[6]=u=>U(s)?s.value=u:null),class:"disable-tab-transition",touch:!1},{default:l(()=>[e(be,{value:"main-detail"},{default:l(()=>[e(ml,{models:t(f),"onUpdate:models":d[1]||(d[1]=u=>U(f)?f.value=u:null),selectedItems:t(b),"onUpdate:selectedItems":d[2]||(d[2]=u=>U(b)?b.value=u:null),relatedImageFiles:t(y),relatedPDFFiles:t(j),relatedImageFilesAlreadyUploaded:t(_),"onUpdate:relatedImageFilesAlreadyUploaded":d[3]||(d[3]=u=>U(_)?_.value=u:null),relatedPDFFilesAlreadyUploaded:t(A),"onUpdate:relatedPDFFilesAlreadyUploaded":d[4]||(d[4]=u=>U(A)?A.value=u:null),pageType:t(p),deletedFile:t(P),"onUpdate:deletedFile":d[5]||(d[5]=u=>U(P)?P.value=u:null)},null,8,["models","selectedItems","relatedImageFiles","relatedPDFFiles","relatedImageFilesAlreadyUploaded","relatedPDFFilesAlreadyUploaded","pageType","deletedFile"])]),_:1})]),_:1},8,["modelValue"]),e(fe,{modelValue:t(s),"onUpdate:modelValue":d[14]||(d[14]=u=>U(s)?s.value=u:null),class:"disable-tab-transition",touch:!1},{default:l(()=>[e(be,{value:"related"},{default:l(()=>[e(Kl,{models:t(f),"onUpdate:models":d[7]||(d[7]=u=>U(f)?f.value=u:null),selectedItems:t(b),"onUpdate:selectedItems":d[8]||(d[8]=u=>U(b)?b.value=u:null),relatedImageFiles:t(y),"onUpdate:relatedImageFiles":d[9]||(d[9]=u=>U(y)?y.value=u:null),relatedImageFilesAlreadyUploaded:t(_),"onUpdate:relatedImageFilesAlreadyUploaded":d[10]||(d[10]=u=>U(_)?_.value=u:null),relatedPDFFilesAlreadyUploaded:t(A),"onUpdate:relatedPDFFilesAlreadyUploaded":d[11]||(d[11]=u=>U(A)?A.value=u:null),relatedPDFFiles:t(j),"onUpdate:relatedPDFFiles":d[12]||(d[12]=u=>U(j)?j.value=u:null),deletedFile:t(P),"onUpdate:deletedFile":d[13]||(d[13]=u=>U(P)?P.value=u:null)},null,8,["models","selectedItems","relatedImageFiles","relatedImageFilesAlreadyUploaded","relatedPDFFilesAlreadyUploaded","relatedPDFFiles","deletedFile"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]))}};typeof ce=="function"&&ce(Jl);export{Jl as default};
