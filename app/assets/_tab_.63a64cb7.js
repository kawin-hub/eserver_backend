import{k as f,o as D,b as q,w as t,p as e,C as G,q as a,E as S,x as b,D as P,$ as O,c as N,m as l,P as _e,be,F as L,ay as Q,A as ne,a as K,bk as ae,H as re,I as ie,bd as he,al as xe,s as Se}from"./index.dc90d0c7.js";import{u as le,n as J,a as Y}from"./brandListStore.b31b588a.js";import{a as ue}from"./formatters.1ccc6423.js";import{_ as ye}from"./DialogCloseBtn.f0270141.js";import{V as j,c as I}from"./VCard.ef7570db.js";import{V as $}from"./VBtn.5ca26f7c.js";import{V as de}from"./VDialog.e968e9e0.js";import{r as W}from"./validators.e45b77e0.js";import{_ as Ae}from"./LoadingDialog.7ea8ccb7.js";import{V as Z}from"./VSpacer.aeeabc4c.js";import{V as Ve}from"./VForm.2d60ea09.js";import{V as H,a as z}from"./VRow.a1d8e599.js";import{V as ee}from"./VTextField.43a06b61.js";import{V as we}from"./VTextarea.86d845be.js";import{V as R}from"./VSelect.a1d5e943.js";import{V as ce}from"./VSnackbar.e0f85ae8.js";import{V as De}from"./VNavigationDrawer.3d1350c1.js";import{x as pe}from"./xlsx.full.min.98caecf6.js";import{V as E}from"./VDivider.09f7ba48.js";import{V as me}from"./VTable.b519be0a.js";import{V as te}from"./VAvatar.6d3c69e8.js";import{V as ve}from"./VImg.3d76415f.js";import{V as fe}from"./VChip.b4ad4a52.js";import{V as ge}from"./VPagination.51e71dc0.js";import{V as Ce}from"./position.734f74ac.js";import{u as $e}from"./modelListStore.c24e5f41.js";import{V as ke,a as Pe}from"./VTabs.58b1a972.js";import{V as se,a as oe}from"./VWindowItem.f740b083.js";import"./index.cb840b2e.js";import"./index.0d4b9ec4.js";import"./router.9f5abff7.js";import"./scopeId.51c205c4.js";import"./forwardRefs.c003b6b8.js";import"./VOverlay.f4f2a002.js";import"./lazy.1f3570de.js";import"./easing.36b781ab.js";import"./dialog-transition.b4f36d59.js";import"./VInput.3420ac64.js";import"./index.35436ddd.js";/* empty css                   */import"./VField.1bfe0f1f.js";import"./VCounter.07f4b2d1.js";import"./VList.b57c1041.js";import"./VMenu.b33cc928.js";import"./VCheckboxBtn.732d4006.js";import"./VSelectionControl.64caeaf6.js";import"./ssrBoot.0ecfb30c.js";import"./VSlideGroup.f23fe18d.js";const Te={__name:"DeleteConfirmationDialog",props:{category:{type:Object,required:!0},categories:{type:Object},fetchCategories:{type:Function}},setup(B){const h=B,n=f(!1),w=le,y=()=>{w.deleteItem({_id:h.category._id}).then(g=>{h.fetchCategories(),n.value=!1})};return(g,r)=>{const s=ye;return D(),q(de,{modelValue:a(n),"onUpdate:modelValue":r[3]||(r[3]=x=>P(n)?n.value=x:null),persistent:"",class:"v-dialog-sm"},{activator:t(({props:x})=>[e(G,{size:"22",onClick:r[0]||(r[0]=m=>n.value=!0),icon:"tabler-trash"})]),default:t(()=>[e(s,{onClick:r[1]||(r[1]=x=>n.value=!a(n))}),e(j,{title:"Delete product Category."},{default:t(()=>[e(I,null,{default:t(()=>[S(" Are you sure to delete "+b(h.category.name)+"? ",1)]),_:1}),e(I,{class:"d-flex justify-end gap-3 flex-wrap"},{default:t(()=>[e($,{color:"secondary",variant:"tonal",onClick:r[2]||(r[2]=x=>n.value=!1)},{default:t(()=>[S(" Cancel ")]),_:1}),e($,{onClick:y},{default:t(()=>[S(" Delete ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Ue={class:"d-flex align-center pa-6 pb-1"},Ie={class:"text-h6 text-capitalize"},Be={__name:"AddNewCategoryDrawer",props:{isDrawerOpen:{type:Boolean,required:!0},fetchData:{type:Function},drawerType:{type:String},editData:{type:Object},isAddNewCategoryDrawerVisible:{type:Boolean}},emits:["update:isDrawerOpen"],setup(B,{emit:h}){const n=B,w=f(!1),y=f(),g=f(!1),r=f({name:"",description:"",status:"",avatar:J,avatarFile:""}),s=f({text:"",color:"",visible:!1}),x=f("Creating new category..."),m=()=>{var F,A;(F=y.value)==null||F.reset(),(A=y.value)==null||A.resetValidation(),r.value.avatar=J,r.value.avatarFile=null},_=le,p=()=>{h("update:isDrawerOpen",!1),Q(()=>{m()})};O(()=>{n.drawerType!==void 0&&n.drawerType=="edit"&&(r.value.name=n.editData.name,r.value.description=n.editData.description,r.value.status=n.editData.status,x.value="Updating category...")});const k=async()=>{var F;(F=y.value)==null||F.validate().then(async({valid:A})=>{if(A){g.value=!0;let c=new FormData;c.append("name",r.value.name),c.append("description",r.value.description),c.append("status",r.value.status),n.drawerType=="add"?_.insertItem(c).then(u=>{n.fetchData(),s.value.text=u.data.message,s.value.color="success",s.value.visible=!0,Q(()=>{h("update:isDrawerOpen",!1),m()})}).catch(u=>{console.log(u.response.data),s.value.text=u.response.data.message,s.value.color="error",s.value.visible=!0}).finally(()=>{g.value=!1}):n.drawerType=="edit"&&(c.append("_id",n.editData._id),_.updateItem(c).then(u=>{n.fetchData(),s.value.text=u.data.message,s.value.color="success",s.value.visible=!0,Q(()=>{h("update:isDrawerOpen",!1),m()})}).catch(u=>{console.log(u.response.data)}).finally(()=>{g.value=!1}))}else s.value.text="Please fill up all the require field.",s.value.color="error",s.value.visible=!0})},U=F=>{h("update:isDrawerOpen",F)};return(F,A)=>(D(),N(L,null,[e(De,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":n.isDrawerOpen,"onUpdate:modelValue":U},{default:t(()=>[l("div",Ue,[l("h6",Ie,b(n.drawerType)+" Category",1),e(Z),e($,{variant:"tonal",color:"default",icon:"",size:"32",class:"rounded",onClick:p},{default:t(()=>[e(G,{size:"18",icon:"tabler-x"})]),_:1})]),e(a(_e),{options:{wheelPropagation:!1}},{default:t(()=>[e(j,{flat:""},{default:t(()=>[e(I,null,{default:t(()=>[e(Ve,{ref_key:"refForm",ref:y,modelValue:a(w),"onUpdate:modelValue":A[4]||(A[4]=c=>P(w)?w.value=c:null),onSubmit:be(k,["prevent"])},{default:t(()=>[e(H,null,{default:t(()=>[e(z,{cols:"12"},{default:t(()=>[e(ee,{modelValue:a(r).name,"onUpdate:modelValue":A[0]||(A[0]=c=>a(r).name=c),rules:[a(W)],label:"name"},null,8,["modelValue","rules"])]),_:1}),e(z,{cols:"12"},{default:t(()=>[e(we,{modelValue:a(r).description,"onUpdate:modelValue":A[1]||(A[1]=c=>a(r).description=c),rules:[a(W)],label:"Description"},null,8,["modelValue","rules"])]),_:1}),e(z,{cols:"12"},{default:t(()=>[e(R,{modelValue:a(r).status,"onUpdate:modelValue":A[2]||(A[2]=c=>a(r).status=c),label:"Select Status",rules:[a(W)],items:[{title:"Active",value:"active"},{title:"Inactive",value:"inactive"}]},null,8,["modelValue","rules"])]),_:1}),e(z,{cols:"12"},{default:t(()=>[e($,{type:"submit",class:"me-3"},{default:t(()=>[S(" Submit ")]),_:1}),e($,{type:"reset",variant:"tonal",color:"secondary",onClick:p},{default:t(()=>[S(" Cancel ")]),_:1})]),_:1}),e(ce,{modelValue:a(s).visible,"onUpdate:modelValue":A[3]||(A[3]=c=>a(s).visible=c),location:"bottom end",variant:"flat",color:a(s).color},{default:t(()=>[S(b(a(s).text),1)]),_:1},8,["modelValue","color"])]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]),e(Ae,{isDialogVisible:a(g),txtDisplay:a(x)},null,8,["isDialogVisible","txtDisplay"])],64))}},Ne={class:"me-3",style:{width:"80px"}},Fe={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},ze={style:{width:"10rem"}},Oe=l("thead",null,[l("tr",null,[l("th",{scope:"col"},"NAME"),l("th",{scope:"col"},"UPDATED AT"),l("th",{scope:"col"},"CRATED AT"),l("th",{scope:"col"},"STATUS"),l("th",{scope:"col"},"ACTION")])],-1),Me={class:"d-flex align-center"},Ee={key:1},Le={class:"d-flex flex-column"},je={class:"text-capitalize text-base"},qe={class:"text-capitalize text-base font-weight-semibold"},Re={class:"text-base"},Ge={class:"text-center",style:{width:"5rem"}},Xe=l("tr",null,[l("td",{colspan:"7",class:"text-center"},"No data available")],-1),Qe=[Xe],We={class:"text-sm text-disabled"},He={__name:"index",props:{dataSummary:{type:Object}},setup(B){const h=B,n=le,w=f(),y=f(10),g=f(1),r=f(1),s=f(0),x=f("add"),m=f([]),_=f([]),p=f(""),k=f(),U=()=>{n.fetchData().then(v=>{m.value=v.data.productCategories;let d=0;m.value.forEach(M=>{M.status=="active"&&d++});let o=m.value.length-d;h.dataSummary.active=d,h.dataSummary.inactive=o})},F=()=>{if(m.value===void 0)return 0;var v=n.filterData({q:p.value,status:w.value,perPage:y.value,currentPage:g.value},m.value);_.value=v.items,r.value=v.totalPage,s.value=v.totalItems};O(U),O(F),O(()=>{g.value>r.value&&(g.value=r.value)});const A=[{title:"Active",value:"active"},{title:"Inactive",value:"inactive"}],c=v=>v==="pending"?"warning":v==="active"?"success":v==="inactive"?"secondary":"primary",u=f(!1);O(()=>{g.value>r.value&&(g.value=r.value)});const i=ne(()=>{const v=_.value.length?(g.value-1)*y.value+1:0,d=_.value.length+(g.value-1)*y.value;return`Showing ${v} to ${d} of ${s.value} entries`}),C=()=>{let v=_.value.map(V=>({name:V.name,description:V.description,status:V.status,createdAt:V.createdAt,updatedAt:V.updatedAt}));const d=new Date().toISOString().slice(0,10),o=pe,M=o.utils.book_new(),X=o.utils.json_to_sheet(v);o.utils.sheet_add_aoa(X,[["Name","Description","Status","Created at","Updated at"]],{origin:"A1"}),X["!cols"]=[{wch:v.reduce((V,T)=>Math.max(V,T.name.length),10)},{wch:v.reduce((V,T)=>Math.max(V,T.description.length),10)},{wch:v.reduce((V,T)=>Math.max(V,T.status.length),10)},{wch:v.reduce((V,T)=>Math.max(V,T.createdAt.length),10)},{wch:v.reduce((V,T)=>Math.max(V,T.updatedAt.length),10)}],o.utils.book_append_sheet(M,X),o.writeFile(M,"categories-("+d+").xlsx")};return(v,d)=>(D(),N(L,null,[e(j,{title:"Search Filter"},{default:t(()=>[e(I,null,{default:t(()=>[e(H,null,{default:t(()=>[e(z,{cols:"12",sm:"4"},{default:t(()=>[e(R,{modelValue:a(w),"onUpdate:modelValue":d[0]||(d[0]=o=>P(w)?w.value=o:null),label:"Select Status",items:A,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(E),e(I,{class:"d-flex flex-wrap py-4 gap-4"},{default:t(()=>[l("div",Ne,[e(R,{modelValue:a(y),"onUpdate:modelValue":d[1]||(d[1]=o=>P(y)?y.value=o:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),e(Z),l("div",Fe,[l("div",ze,[e(ee,{modelValue:a(p),"onUpdate:modelValue":d[2]||(d[2]=o=>P(p)?p.value=o:null),placeholder:"Search",density:"compact"},null,8,["modelValue"])]),e($,{variant:"tonal",color:"secondary","prepend-icon":"tabler-screen-share",onClick:C},{default:t(()=>[S(" Export ")]),_:1}),e($,{"prepend-icon":"tabler-plus",onClick:d[3]||(d[3]=o=>{u.value=!0,x.value="add"})},{default:t(()=>[S(" Add Category ")]),_:1})])]),_:1}),e(E),e(me,{class:"text-no-wrap"},{default:t(()=>[Oe,l("tbody",null,[(D(!0),N(L,null,K(a(_),o=>(D(),N("tr",{key:o._id,style:{height:"3.75rem"}},[l("td",null,[l("div",Me,[e(te,{variant:"tonal",color:"primary",class:"me-3",size:"38"},{default:t(()=>[o.avatar?(D(),q(ve,{key:0,src:a(ae).api.url+o.avatar},null,8,["src"])):(D(),N("span",Ee,b(a(ue)(o.name)),1))]),_:2},1024),l("div",Le,[l("h6",je,b(o.name),1)])])]),l("td",null,[l("span",qe,b(new Date(o.updatedAt).toString().split("GMT")[0]),1)]),l("td",null,[l("span",Re,b(new Date(o.createdAt).toString().split("GMT")[0]),1)]),l("td",null,[e(fe,{label:"",color:c(o.status),size:"small",class:"text-capitalize"},{default:t(()=>[S(b(o.status),1)]),_:2},1032,["color"])]),l("td",Ge,[e($,{icon:"",size:"x-small",color:"default",variant:"text"},{default:t(()=>[e(G,{size:"22",icon:"tabler-edit",onClick:M=>{u.value=!0,x.value="edit",k.value=o}},null,8,["onClick"])]),_:2},1024),e($,{icon:"",size:"x-small",color:"default",variant:"text"},{default:t(()=>[e(Te,{category:o,categories:a(m),fetchCategories:U},null,8,["category","categories"])]),_:2},1024)])]))),128))]),re(l("tfoot",null,Qe,512),[[ie,!a(_).length]])]),_:1}),e(E),e(I,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:t(()=>[l("span",We,b(a(i)),1),e(ge,{modelValue:a(g),"onUpdate:modelValue":d[4]||(d[4]=o=>P(g)?g.value=o:null),size:"small","total-visible":5,length:a(r)},null,8,["modelValue","length"])]),_:1})]),_:1}),e(Be,{isDrawerOpen:a(u),"onUpdate:isDrawerOpen":d[5]||(d[5]=o=>P(u)?u.value=o:null),fetchData:U,drawerType:a(x),editData:a(k),isAddNewCategoryDrawerVisible:a(u)},null,8,["isDrawerOpen","drawerType","editData","isAddNewCategoryDrawerVisible"])],64))}},Je={__name:"ConfirmationDialog",props:{brand:{type:Object,required:!0},brands:{type:Object},fetchBrands:{type:Function}},setup(B){const h=B,n=f(!1),w=Y,y=()=>{w.deleteItem({_id:h.brand._id}).then(g=>{h.fetchBrands(),n.value=!1})};return(g,r)=>{const s=ye;return D(),q(de,{modelValue:a(n),"onUpdate:modelValue":r[3]||(r[3]=x=>P(n)?n.value=x:null),persistent:"",class:"v-dialog-sm"},{activator:t(({props:x})=>[e(G,{size:"22",onClick:r[0]||(r[0]=m=>n.value=!0),icon:"tabler-trash"})]),default:t(()=>[e(s,{onClick:r[1]||(r[1]=x=>n.value=!a(n))}),e(j,{title:"Delete product brand."},{default:t(()=>[e(I,null,{default:t(()=>[S(" Are you sure to delete "+b(h.brand.name)+"? ",1)]),_:1}),e(I,{class:"d-flex justify-end gap-3 flex-wrap"},{default:t(()=>[e($,{color:"secondary",variant:"tonal",onClick:r[2]||(r[2]=x=>n.value=!1)},{default:t(()=>[S(" Cancel ")]),_:1}),e($,{onClick:y},{default:t(()=>[S(" Delete ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Ke={__name:"LoadingDialog",props:{isDialogVisible:{type:Boolean,required:!0},txtDisplay:{type:String,required:!0}},setup(B){const h=B;return(n,w)=>(D(),q(de,{modelValue:h.isDialogVisible,"onUpdate:modelValue":w[0]||(w[0]=y=>h.isDialogVisible=y),width:"300"},{default:t(()=>[e(j,{color:"primary",width:"300"},{default:t(()=>[e(I,{class:"pt-3"},{default:t(()=>[S(b(h.txtDisplay)+" ",1),e(Ce,{indeterminate:"",color:"white",class:"mb-0"})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},Ye={class:"d-flex align-center pa-6 pb-1"},Ze={class:"text-h6 text-capitalize"},et={class:"d-flex flex-wrap gap-2"},tt={__name:"AddNewBrandDrawer",props:{isDrawerOpen:{type:Boolean,required:!0},fetchBrands:{type:Function},drawerType:{type:String},editBrand:{type:Object},isAddNewBrandDrawerVisible:{type:Boolean}},emits:["update:isDrawerOpen"],setup(B,{emit:h}){const n=B,w=f(!1),y=f(),g=f(!1),r=f(),s=f({name:"",description:"",status:"",avatar:J,avatarFile:""}),x=f("Creating new brand..."),m=f({text:"",color:"",visible:!1}),_=()=>{var c,u;(c=y.value)==null||c.reset(),(u=y.value)==null||u.resetValidation(),r.value.value=null,s.value.avatar=J,s.value.avatarFile=""},p=Y,k=()=>{h("update:isDrawerOpen",!1),Q(()=>{_()})};O(()=>{n.drawerType!==void 0&&n.drawerType=="edit"&&(s.value.avatar=n.editBrand.avatar!=""?ae.api.url+n.editBrand.avatar:J,s.value.name=n.editBrand.name,s.value.description=n.editBrand.description,s.value.status=n.editBrand.status,x.value="Updating brand...")});const U=async()=>{var c;(c=y.value)==null||c.validate().then(async({valid:u})=>{if(u){g.value=!0;let i=new FormData;i.append("avatar",s.value.avatarFile),i.append("name",s.value.name),i.append("description",s.value.description),i.append("status",s.value.status),n.drawerType=="add"?p.insertItem(i).then(C=>{n.fetchBrands(),m.value.text=C.data.message,m.value.color="success",m.value.visible=!0,Q(()=>{h("update:isDrawerOpen",!1),_()})}).catch(C=>{m.value.text=C.response.data.message,m.value.color="error",m.value.visible=!0}).finally(()=>{g.value=!1}):n.drawerType=="edit"&&(i.append("_id",n.editBrand._id),p.updateItem(i).then(C=>{n.fetchBrands(),m.value.text=C.data.message,m.value.color="success",m.value.visible=!0,Q(()=>{h("update:isDrawerOpen",!1),_()})}).catch(C=>{m.value.text=C.response.data.message,m.value.color="error",m.value.visible=!0}).finally(()=>{g.value=!1}))}else m.value.text="Please fill up all the require field.",m.value.color="error",m.value.visible=!0})},F=c=>{h("update:isDrawerOpen",c)},A=c=>{const u=new FileReader,{files:i}=c.target;i&&i.length&&(u.readAsDataURL(i[0]),u.onload=()=>{typeof u.result=="string"&&(s.value.avatar=u.result,s.value.avatarFile=i[0])})};return(c,u)=>(D(),N(L,null,[e(De,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":n.isDrawerOpen,"onUpdate:modelValue":F},{default:t(()=>[l("div",Ye,[l("h6",Ze,b(n.drawerType)+" brand",1),e(Z),e($,{variant:"tonal",color:"default",icon:"",size:"32",class:"rounded",onClick:k},{default:t(()=>[e(G,{size:"18",icon:"tabler-x"})]),_:1})]),e(a(_e),{options:{wheelPropagation:!1}},{default:t(()=>[e(j,{flat:""},{default:t(()=>[e(I,null,{default:t(()=>[e(Ve,{ref_key:"refForm",ref:y,modelValue:a(w),"onUpdate:modelValue":u[5]||(u[5]=i=>P(w)?w.value=i:null),onSubmit:be(U,["prevent"])},{default:t(()=>[e(H,null,{default:t(()=>[e(z,{class:"text-center",role:"button"},{default:t(()=>[e(te,{rounded:"",size:"100",class:"me-6",image:a(s).avatar,onClick:u[0]||(u[0]=i=>{var C;return(C=a(r))==null?void 0:C.click()})},null,8,["image"]),l("div",et,[l("input",{ref_key:"refInputEl",ref:r,type:"file",name:"file",accept:".jpeg,.png,.jpg,GIF",hidden:"",onInput:A},null,544)])]),_:1}),e(z,{cols:"12"},{default:t(()=>[e(ee,{modelValue:a(s).name,"onUpdate:modelValue":u[1]||(u[1]=i=>a(s).name=i),rules:[a(W)],label:"name"},null,8,["modelValue","rules"])]),_:1}),e(z,{cols:"12"},{default:t(()=>[e(we,{modelValue:a(s).description,"onUpdate:modelValue":u[2]||(u[2]=i=>a(s).description=i),rules:[a(W)],label:"Description"},null,8,["modelValue","rules"])]),_:1}),e(z,{cols:"12"},{default:t(()=>[e(R,{modelValue:a(s).status,"onUpdate:modelValue":u[3]||(u[3]=i=>a(s).status=i),label:"Select Status",rules:[a(W)],items:[{title:"Active",value:"active"},{title:"Inactive",value:"inactive"}]},null,8,["modelValue","rules"])]),_:1}),e(z,{cols:"12"},{default:t(()=>[e($,{type:"submit",class:"me-3"},{default:t(()=>[S(" Submit ")]),_:1}),e($,{type:"reset",variant:"tonal",color:"secondary",onClick:k},{default:t(()=>[S(" Cancel ")]),_:1})]),_:1}),e(ce,{modelValue:a(m).visible,"onUpdate:modelValue":u[4]||(u[4]=i=>a(m).visible=i),location:"bottom end",variant:"flat",color:a(m).color},{default:t(()=>[S(b(a(m).text),1)]),_:1},8,["modelValue","color"])]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]),e(Ke,{isDialogVisible:a(g),txtDisplay:a(x)},null,8,["isDialogVisible","txtDisplay"])],64))}},at={class:"me-3",style:{width:"80px"}},lt={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},st={style:{width:"10rem"}},ot=l("thead",null,[l("tr",null,[l("th",{scope:"col"},"NAME"),l("th",{scope:"col"},"UPDATED AT"),l("th",{scope:"col"},"CRATED AT"),l("th",{scope:"col"},"STATUS"),l("th",{scope:"col"},"ACTION")])],-1),nt={class:"d-flex align-center"},rt={key:1},it={class:"d-flex flex-column"},ut={class:"text-capitalize text-base"},dt={class:"text-capitalize text-base font-weight-semibold"},ct={class:"text-base"},pt={class:"text-center",style:{width:"5rem"}},mt=l("tr",null,[l("td",{colspan:"7",class:"text-center"},"No data available")],-1),vt=[mt],ft={class:"text-sm text-disabled"},gt={__name:"index",props:{dataSummary:{type:Object}},setup(B){const h=B,n=Y,w=f(""),y=f(),g=f(10),r=f(1),s=f(1),x=f(0),m=f("add"),_=f([]),p=f(),k=f([]),U=()=>{n.fetchData().then(v=>{_.value=v.data.productBrands;let d=0;_.value.forEach(M=>{M.status=="active"&&d++});let o=_.value.length-d;h.dataSummary.active=d,h.dataSummary.inactive=o})};O(()=>{var v=n.filterData({q:w.value,status:y.value,perPage:g.value,currentPage:r.value},_.value);k.value=v.items,s.value=v.totalPage,x.value=v.totalItems}),O(U),O(()=>{r.value>s.value&&(r.value=s.value)});const A=[{title:"Active",value:"active"},{title:"Inactive",value:"inactive"}],c=v=>v==="pending"?"warning":v==="active"?"success":v==="inactive"?"secondary":"primary",u=f(!1);O(()=>{r.value>s.value&&(r.value=s.value)});const i=ne(()=>{const v=k.value.length?(r.value-1)*g.value+1:0,d=k.value.length+(r.value-1)*g.value;return`Showing ${v} to ${d} of ${x.value} entries`}),C=()=>{let v=k.value.map(V=>({name:V.name,description:V.description,status:V.status,createdAt:V.createdAt,updatedAt:V.updatedAt}));const d=new Date().toISOString().slice(0,10),o=pe,M=o.utils.book_new(),X=o.utils.json_to_sheet(v);o.utils.sheet_add_aoa(X,[["Name","Description","Status","Created at","Updated at"]],{origin:"A1"}),X["!cols"]=[{wch:v.reduce((V,T)=>Math.max(V,T.name.length),10)},{wch:v.reduce((V,T)=>Math.max(V,T.description.length),10)},{wch:v.reduce((V,T)=>Math.max(V,T.status.length),10)},{wch:v.reduce((V,T)=>Math.max(V,T.createdAt.length),10)},{wch:v.reduce((V,T)=>Math.max(V,T.updatedAt.length),10)}],o.utils.book_append_sheet(M,X),o.writeFile(M,"brands-("+d+").xlsx")};return(v,d)=>(D(),N(L,null,[e(j,{title:"Search Filter"},{default:t(()=>[e(I,null,{default:t(()=>[e(H,null,{default:t(()=>[e(z,{cols:"12",sm:"4"},{default:t(()=>[e(R,{modelValue:a(y),"onUpdate:modelValue":d[0]||(d[0]=o=>P(y)?y.value=o:null),label:"Select Status",items:A,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(E),e(I,{class:"d-flex flex-wrap py-4 gap-4"},{default:t(()=>[l("div",at,[e(R,{modelValue:a(g),"onUpdate:modelValue":d[1]||(d[1]=o=>P(g)?g.value=o:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),e(Z),l("div",lt,[l("div",st,[e(ee,{modelValue:a(w),"onUpdate:modelValue":d[2]||(d[2]=o=>P(w)?w.value=o:null),placeholder:"Search",density:"compact"},null,8,["modelValue"])]),e($,{variant:"tonal",color:"secondary","prepend-icon":"tabler-screen-share",onClick:C},{default:t(()=>[S(" Export ")]),_:1}),e($,{"prepend-icon":"tabler-plus",onClick:d[3]||(d[3]=o=>{u.value=!0,m.value="add"})},{default:t(()=>[S(" Add Brand ")]),_:1})])]),_:1}),e(E),e(me,{class:"text-no-wrap"},{default:t(()=>[ot,l("tbody",null,[(D(!0),N(L,null,K(a(k),o=>(D(),N("tr",{key:o._id,style:{height:"3.75rem"}},[l("td",null,[l("div",nt,[e(te,{variant:"tonal",color:"primary",class:"me-3",size:"38"},{default:t(()=>[o.avatar?(D(),q(ve,{key:0,src:a(ae).api.url+o.avatar},null,8,["src"])):(D(),N("span",rt,b(a(ue)(o.name)),1))]),_:2},1024),l("div",it,[l("h6",ut,b(o.name),1)])])]),l("td",null,[l("span",dt,b(new Date(o.updatedAt).toString().split("GMT")[0]),1)]),l("td",null,[l("span",ct,b(new Date(o.createdAt).toString().split("GMT")[0]),1)]),l("td",null,[e(fe,{label:"",color:c(o.status),size:"small",class:"text-capitalize"},{default:t(()=>[S(b(o.status),1)]),_:2},1032,["color"])]),l("td",pt,[e($,{icon:"",size:"x-small",color:"default",variant:"text"},{default:t(()=>[e(G,{size:"22",icon:"tabler-edit",onClick:M=>{u.value=!0,m.value="edit",p.value=o}},null,8,["onClick"])]),_:2},1024),e($,{icon:"",size:"x-small",color:"default",variant:"text"},{default:t(()=>[e(Je,{brand:o,brands:a(_),fetchBrands:U},null,8,["brand","brands"])]),_:2},1024)])]))),128))]),re(l("tfoot",null,vt,512),[[ie,!a(k).length]])]),_:1}),e(E),e(I,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:t(()=>[l("span",ft,b(a(i)),1),e(ge,{modelValue:a(r),"onUpdate:modelValue":d[4]||(d[4]=o=>P(r)?r.value=o:null),size:"small","total-visible":5,length:a(s)},null,8,["modelValue","length"])]),_:1})]),_:1}),e(tt,{isDrawerOpen:a(u),"onUpdate:isDrawerOpen":d[5]||(d[5]=o=>P(u)?u.value=o:null),fetchBrands:U,drawerType:a(m),editBrand:a(p),isAddNewBrandDrawerVisible:a(u)},null,8,["isDrawerOpen","drawerType","editBrand","isAddNewBrandDrawerVisible"])],64))}},_t={class:"me-3",style:{width:"80px"}},bt={class:"d-flex align-center flex-wrap gap-4"},ht={style:{width:"10rem"}},xt=l("thead",null,[l("tr",null,[l("th",{scope:"col"},"MODEL NAME"),l("th",{scope:"col"},"DESCRIPTION"),l("th",{scope:"col"},"BRAND"),l("th",{scope:"col"},"PRICE"),l("th",{scope:"col"},"INSTALLATION PRICE"),l("th",{scope:"col"},"STATUS"),l("th",{scope:"col"},"ACTION")])],-1),yt={class:"d-flex align-center"},Vt={key:1},wt={class:"d-flex flex-column"},Dt={class:"text-capitalize text-base"},St={class:"text-capitalize text-base font-weight-semibold"},At={class:"text-capitalize text-base font-weight-semibold"},Ct={class:"text-capitalize text-base font-weight-semibold"},$t={class:"text-capitalize text-base font-weight-semibold"},kt={class:"text-center",style:{width:"5rem"}},Pt=l("tr",null,[l("td",{colspan:"7",class:"text-center"},"No data available")],-1),Tt=[Pt],Ut={class:"text-sm text-disabled"},It={__name:"index",props:{dataSummary:{type:Object}},setup(B){const h=B,n=he(),w=$e,y=Y,g=f(""),r=f(),s=xe({models:[],modelFilter:[],rowPerPage:10,currentPage:1,totalPage:1,totalItem:0}),x=f({text:"",color:"",visible:!1});n.query.status!==void 0&&(n.query.status=="inserted"||n.query.status=="updated")&&(x.value.text=n.query.text,x.value.color="success",x.value.visible=!0);const m=()=>{w.fetchData().then(c=>{s.models=c.data.productModels;let u=0;s.models.forEach(C=>{C.status=="active"&&u++});let i=s.models.length-u;h.dataSummary.active=u,h.dataSummary.inactive=i,y.fetchData().then(C=>{p(C.data.productBrands)})})},_=()=>{var c=w.filterData({q:g.value,status:r.value,perPage:s.rowPerPage,currentPage:s.currentPage},s.models);s.modelFilter=c.items,s.totalPage=c.totalPage,s.totalItem=c.totalItems};m(),O(_);const p=c=>{let u=[];for(let i of c)u[i._id]=i.name;for(let i of s.modelFilter)i.brandName=u[i.brand_id]};O(()=>{s.currentPage>s.totalPage&&(s.currentPage=s.totalPage)});const k=[{title:"Active",value:"active"},{title:"Inactive",value:"inactive"}],U=c=>c==="pending"?"warning":c==="active"?"success":c==="inactive"?"secondary":"primary";O(()=>{s.currentPage>s.totalPage&&(s.currentPage=s.totalPage)});const F=ne(()=>{const c=s.modelFilter.length?(s.currentPage-1)*s.rowPerPage+1:0,u=s.modelFilter.length+(s.currentPage-1)*s.rowPerPage;return`Showing ${c} to ${u} of ${s.totalItem} entries`}),A=()=>{let c=s.modelFilter.map(d=>({name:d.name,description:d.description,price:d.price,stock:d.stock,status:d.status,createdAt:new Date(d.createdAt).toString().split("GMT")[0],updatedAt:new Date(d.updatedAt).toString().split("GMT")[0]}));const u=new Date().toISOString().slice(0,10),i=pe,C=i.utils.book_new(),v=i.utils.json_to_sheet(c);i.utils.sheet_add_aoa(v,[["Name","Description","Price","Stock","Status","Created at","Updated at"]],{origin:"A1"}),v["!cols"]=[{wch:c.reduce((d,o)=>Math.max(d,o.name.length),10)},{wch:c.reduce((d,o)=>Math.max(d,o.description.length),10)},{wch:c.reduce((d,o)=>Math.max(d,o.status.length),10)},{wch:c.reduce((d,o)=>Math.max(d,o.createdAt.length),10)},{wch:c.reduce((d,o)=>Math.max(d,o.updatedAt.length),10)}],i.utils.book_append_sheet(C,v),i.writeFile(C,"models-("+u+").xlsx")};return(c,u)=>(D(),q(j,{title:"Search Filter"},{default:t(()=>[e(I,null,{default:t(()=>[e(H,null,{default:t(()=>[e(z,{cols:"12",sm:"4"},{default:t(()=>[e(R,{modelValue:a(r),"onUpdate:modelValue":u[0]||(u[0]=i=>P(r)?r.value=i:null),label:"Select Status",items:k,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(E),e(I,{class:"d-flex flex-wrap py-4 gap-4"},{default:t(()=>[l("div",_t,[e(R,{modelValue:a(s).rowPerPage,"onUpdate:modelValue":u[1]||(u[1]=i=>a(s).rowPerPage=i),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),e(Z),l("div",bt,[l("div",ht,[e(ee,{modelValue:a(g),"onUpdate:modelValue":u[2]||(u[2]=i=>P(g)?g.value=i:null),placeholder:"Search",density:"compact"},null,8,["modelValue"])]),e($,{variant:"tonal",color:"secondary","prepend-icon":"tabler-screen-share",onClick:A},{default:t(()=>[S(" Export ")]),_:1}),e($,{"prepend-icon":"tabler-plus",to:{name:"system-setting-product-model-tab",params:{tab:"main-detail"}}},{default:t(()=>[S(" Add New Model ")]),_:1})])]),_:1}),e(E),e(me,{class:"text-no-wrap"},{default:t(()=>[xt,l("tbody",null,[(D(!0),N(L,null,K(a(s).modelFilter,i=>(D(),N("tr",{key:i._id,style:{height:"3.75rem"}},[l("td",null,[l("div",yt,[e(te,{variant:"tonal",color:"tabler-user",class:"me-3",size:"38"},{default:t(()=>[i.avatar?(D(),q(ve,{key:0,src:a(ae).api.url+i.avatar},null,8,["src"])):(D(),N("span",Vt,b(a(ue)(i.name)),1))]),_:2},1024),l("div",wt,[l("h6",Dt,b(i.name),1)])])]),l("td",null,[l("span",St,b(i.description.length>30?i.description.substring(0,30)+"...":i.description),1)]),l("td",null,[l("span",At,b(i.brandName),1)]),l("td",null,[l("span",Ct,b(i.price?i.price.toLocaleString():0),1)]),l("td",null,[l("span",$t,b(i.installationPrice?i.installationPrice.toLocaleString():0),1)]),l("td",null,[e(fe,{label:"",color:U(i.status),size:"small",class:"text-capitalize"},{default:t(()=>[S(b(i.status),1)]),_:2},1032,["color"])]),l("td",kt,[e($,{icon:"",size:"x-small",color:"default",variant:"text",to:{name:"system-setting-product-model-tab",params:{tab:"main-detail"},query:{id:i._id}}},{default:t(()=>[e(G,{size:"22",icon:"tabler-edit"})]),_:2},1032,["to"])])]))),128))]),re(l("tfoot",null,Tt,512),[[ie,!a(s).modelFilter.length]])]),_:1}),e(E),e(ce,{modelValue:a(x).visible,"onUpdate:modelValue":u[3]||(u[3]=i=>a(x).visible=i),location:"bottom end",variant:"flat",color:a(x).color},{default:t(()=>[S(b(a(x).text),1)]),_:1},8,["modelValue","color"]),e(I,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:t(()=>[l("span",Ut,b(a(F)),1),e(ge,{modelValue:a(s).currentPage,"onUpdate:modelValue":u[4]||(u[4]=i=>a(s).currentPage=i),size:"small","total-visible":5,length:a(s).totalPage},null,8,["modelValue","length"])]),_:1})]),_:1}))}};const Bt={class:"d-flex align-center gap-2 my-1"},Nt={class:"text-h6 text-success"},Pa={__name:"[tab]",setup(B){const h=he(),n=f(h.params.tab),w=le,y=Y,g=[{title:"Categories",icon:"tabler-category",tab:"categories"},{title:"Brands",icon:"tabler-circle-letter-b",tab:"brands"},{title:"Models",icon:"tabler-circle-letter-p",tab:"models"}],r=xe([{icon:"tabler-category",color:"primary",title:"Categories",active:0,inactive:0,subtitle:"Inactive"},{icon:"tabler-circle-letter-b",color:"error",title:"Brands",active:0,inactive:0,subtitle:"Inactive"},{icon:"tabler-circle-letter-p",color:"success",title:"Models",active:0,inactive:0,subtitle:"Inactive"}]),s=()=>{w.fetchData().then(m=>{let _=m.data.productCategories,p=0;_.forEach(U=>{U.status=="active"&&p++});let k=_.length-p;r[0].active=p,r[0].inactive=k})},x=()=>{y.fetchData().then(m=>{let _=m.data.productBrands,p=0;_.forEach(U=>{U.status=="active"&&p++});let k=_.length-p;r[1].active=p,r[1].inactive=k})};return s(),x(),(m,_)=>(D(),N("section",null,[e(H,null,{default:t(()=>[(D(!0),N(L,null,K(a(r),p=>(D(),q(z,{key:p.title,cols:"12",sm:"6",lg:"4"},{default:t(()=>[e(j,null,{default:t(()=>[e(I,{class:"d-flex justify-space-between"},{default:t(()=>[l("div",null,[l("span",null,b(p.title),1),l("div",Bt,[l("h6",Nt,b(p.active),1)]),l("span",null,b(p.subtitle)+" : ",1),l("span",{class:Se(p.inactive>0?"text-error":"")},b(p.inactive),3)]),e(te,{rounded:"",variant:"tonal",color:p.color,icon:p.icon},null,8,["color","icon"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(z,{cols:"12"},{default:t(()=>[e(ke,{modelValue:a(n),"onUpdate:modelValue":_[0]||(_[0]=p=>P(n)?n.value=p:null),class:"v-tabs-pill"},{default:t(()=>[(D(),N(L,null,K(g,p=>e(Pe,{key:p.icon,value:p.tab,to:{name:"system-setting-product-tab",params:{tab:p.tab}}},{default:t(()=>[e(G,{size:"20",start:"",icon:p.icon},null,8,["icon"]),S(" "+b(p.title),1)]),_:2},1032,["value","to"])),64))]),_:1},8,["modelValue"])]),_:1}),e(z,{cols:"12"},{default:t(()=>[e(se,{modelValue:a(n),"onUpdate:modelValue":_[1]||(_[1]=p=>P(n)?n.value=p:null),class:"disable-tab-transition",touch:!1},{default:t(()=>[e(oe,{value:"categories"},{default:t(()=>[e(He,{dataSummary:a(r)[0]},null,8,["dataSummary"])]),_:1})]),_:1},8,["modelValue"]),e(se,{modelValue:a(n),"onUpdate:modelValue":_[2]||(_[2]=p=>P(n)?n.value=p:null),class:"disable-tab-transition",touch:!1},{default:t(()=>[e(oe,{value:"brands"},{default:t(()=>[e(gt,{dataSummary:a(r)[1]},null,8,["dataSummary"])]),_:1})]),_:1},8,["modelValue"]),e(se,{modelValue:a(n),"onUpdate:modelValue":_[3]||(_[3]=p=>P(n)?n.value=p:null),class:"disable-tab-transition",touch:!1},{default:t(()=>[e(oe,{value:"models"},{default:t(()=>[e(It,{dataSummary:a(r)[2]},null,8,["dataSummary"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]))}};export{Pa as default};
