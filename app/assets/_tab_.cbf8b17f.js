import{k as f,o as D,b as q,w as t,p as e,C as G,q as a,E as S,x as b,D as P,$ as O,c as N,m as l,P as _e,be,F as L,ay as Q,A as ne,a as K,bn as ae,H as re,I as ie,bd as he,al as xe,s as Se}from"./index.35991f09.js";import{u as le,a as Y}from"./categoryListStore.0ab0e140.js";import{a as ue}from"./formatters.1ccc6423.js";import{_ as ye}from"./DialogCloseBtn.9d70464b.js";import{V as j,c as I}from"./VCard.bb37f72e.js";import{V as $}from"./VBtn.3e0f2bdf.js";import{V as de}from"./VDialog.61de6f6e.js";import{a as W}from"./validators.9dda6c80.js";import{_ as Ae}from"./LoadingDialog.9b7a5d10.js";import{n as J}from"./no-image.bc16c952.js";import{V as Z}from"./VSpacer.80b37d7c.js";import{V as Ve}from"./VForm.9ba2d763.js";import{V as H,a as z}from"./VRow.f9366793.js";import{V as ee}from"./VTextField.4609cb9e.js";import{V as we}from"./VTextarea.0a746d96.js";import{V as R}from"./VSelect.1bdb2ecc.js";import{V as ce}from"./VSnackbar.34637b93.js";import{V as De}from"./VNavigationDrawer.92fc0e14.js";import{x as pe}from"./xlsx.full.min.97d888ff.js";import{V as E}from"./VDivider.0f44b1ce.js";import{V as me}from"./VTable.0fe7de7a.js";import{V as te}from"./VAvatar.6ed53308.js";import{V as ve}from"./VImg.632117c3.js";import{V as fe}from"./VChip.81c7dee3.js";import{V as ge}from"./VPagination.1d990c54.js";import{V as Ce}from"./position.15b8fc3a.js";import{u as $e}from"./modelListStore.3cabc70f.js";import{V as ke,a as Pe}from"./VTabs.6d0b43a6.js";import{V as se,a as oe}from"./VWindowItem.f35c6905.js";import"./index.a44853ab.js";import"./index.0d4b9ec4.js";import"./router.88351000.js";import"./scopeId.a8f1d836.js";import"./forwardRefs.c003b6b8.js";import"./VOverlay.a330b104.js";import"./lazy.7e795ed8.js";import"./easing.36b781ab.js";import"./dialog-transition.13a8c048.js";import"./form.e84299e4.js";/* empty css                   */import"./VField.93eb26cb.js";import"./index.a8f66a9c.js";import"./VInput.6bf7b46e.js";import"./VCounter.cb1a1153.js";import"./VList.8e9051e1.js";import"./VMenu.768d7784.js";import"./VCheckboxBtn.a302f7e6.js";import"./VSelectionControl.6ac8e090.js";import"./ssrBoot.8b43ebe3.js";import"./VSlideGroup.6d88d719.js";const Te={__name:"DeleteConfirmationDialog",props:{category:{type:Object,required:!0},categories:{type:Object},fetchCategories:{type:Function}},setup(B){const h=B,r=f(!1),w=le,y=()=>{w.deleteItem({_id:h.category._id}).then(g=>{h.fetchCategories(),r.value=!1})};return(g,i)=>{const s=ye;return D(),q(de,{modelValue:a(r),"onUpdate:modelValue":i[3]||(i[3]=x=>P(r)?r.value=x:null),persistent:"",class:"v-dialog-sm"},{activator:t(({props:x})=>[e(G,{size:"22",onClick:i[0]||(i[0]=v=>r.value=!0),icon:"tabler-trash"})]),default:t(()=>[e(s,{onClick:i[1]||(i[1]=x=>r.value=!a(r))}),e(j,{title:"Delete product Category."},{default:t(()=>[e(I,null,{default:t(()=>[S(" Are you sure to delete "+b(h.category.name)+"? ",1)]),_:1}),e(I,{class:"d-flex justify-end gap-3 flex-wrap"},{default:t(()=>[e($,{color:"secondary",variant:"tonal",onClick:i[2]||(i[2]=x=>r.value=!1)},{default:t(()=>[S(" Cancel ")]),_:1}),e($,{onClick:y},{default:t(()=>[S(" Delete ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Ue={class:"d-flex align-center pa-6 pb-1"},Ie={class:"text-h6 text-capitalize"},Be={__name:"AddNewCategoryDrawer",props:{isDrawerOpen:{type:Boolean,required:!0},fetchData:{type:Function},drawerType:{type:String},editData:{type:Object},isAddNewCategoryDrawerVisible:{type:Boolean}},emits:["update:isDrawerOpen"],setup(B,{emit:h}){const r=B,w=f(!1),y=f(),g=f(!1),i=f({name:"",description:"",status:"",avatar:J,avatarFile:""}),s=f({text:"",color:"",visible:!1}),x=f("Creating new category..."),v=()=>{var F,A;(F=y.value)==null||F.reset(),(A=y.value)==null||A.resetValidation(),i.value.avatar=J,i.value.avatarFile=null},_=le,m=()=>{h("update:isDrawerOpen",!1),Q(()=>{v()})};O(()=>{r.drawerType!==void 0&&r.drawerType=="edit"&&(i.value.name=r.editData.name,i.value.description=r.editData.description,i.value.status=r.editData.status,x.value="Updating category...")});const k=async()=>{var F;(F=y.value)==null||F.validate().then(async({valid:A})=>{if(A){g.value=!0;let c=new FormData;c.append("name",i.value.name),c.append("description",i.value.description),c.append("status",i.value.status),r.drawerType=="add"?_.insertItem(c).then(u=>{r.fetchData(),s.value.text=u.data.message,s.value.color="success",s.value.visible=!0,Q(()=>{h("update:isDrawerOpen",!1),v()})}).catch(u=>{console.log(u.response.data),s.value.text=u.response.data.message,s.value.color="error",s.value.visible=!0}).finally(()=>{g.value=!1}):r.drawerType=="edit"&&(c.append("_id",r.editData._id),_.updateItem(c).then(u=>{r.fetchData(),s.value.text=u.data.message,s.value.color="success",s.value.visible=!0,Q(()=>{h("update:isDrawerOpen",!1),v()})}).catch(u=>{console.log(u.response.data)}).finally(()=>{g.value=!1}))}else s.value.text="Please fill up all the require field.",s.value.color="error",s.value.visible=!0})},U=F=>{h("update:isDrawerOpen",F)};return(F,A)=>(D(),N(L,null,[e(De,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":r.isDrawerOpen,"onUpdate:modelValue":U},{default:t(()=>[l("div",Ue,[l("h6",Ie,b(r.drawerType)+" Category",1),e(Z),e($,{variant:"tonal",color:"default",icon:"",size:"32",class:"rounded",onClick:m},{default:t(()=>[e(G,{size:"18",icon:"tabler-x"})]),_:1})]),e(a(_e),{options:{wheelPropagation:!1}},{default:t(()=>[e(j,{flat:""},{default:t(()=>[e(I,null,{default:t(()=>[e(Ve,{ref_key:"refForm",ref:y,modelValue:a(w),"onUpdate:modelValue":A[4]||(A[4]=c=>P(w)?w.value=c:null),onSubmit:be(k,["prevent"])},{default:t(()=>[e(H,null,{default:t(()=>[e(z,{cols:"12"},{default:t(()=>[e(ee,{modelValue:a(i).name,"onUpdate:modelValue":A[0]||(A[0]=c=>a(i).name=c),rules:[a(W)],label:"name"},null,8,["modelValue","rules"])]),_:1}),e(z,{cols:"12"},{default:t(()=>[e(we,{modelValue:a(i).description,"onUpdate:modelValue":A[1]||(A[1]=c=>a(i).description=c),rules:[a(W)],label:"Description"},null,8,["modelValue","rules"])]),_:1}),e(z,{cols:"12"},{default:t(()=>[e(R,{modelValue:a(i).status,"onUpdate:modelValue":A[2]||(A[2]=c=>a(i).status=c),label:"Select Status",rules:[a(W)],items:[{title:"Active",value:"active"},{title:"Inactive",value:"inactive"}]},null,8,["modelValue","rules"])]),_:1}),e(z,{cols:"12"},{default:t(()=>[e($,{type:"submit",class:"me-3"},{default:t(()=>[S(" Submit ")]),_:1}),e($,{type:"reset",variant:"tonal",color:"secondary",onClick:m},{default:t(()=>[S(" Cancel ")]),_:1})]),_:1}),e(ce,{modelValue:a(s).visible,"onUpdate:modelValue":A[3]||(A[3]=c=>a(s).visible=c),location:"bottom end",variant:"flat",color:a(s).color},{default:t(()=>[S(b(a(s).text),1)]),_:1},8,["modelValue","color"])]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]),e(Ae,{isDialogVisible:a(g),txtDisplay:a(x)},null,8,["isDialogVisible","txtDisplay"])],64))}},Ne={class:"me-3",style:{width:"80px"}},Fe={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},ze={style:{width:"10rem"}},Oe=l("thead",null,[l("tr",null,[l("th",{scope:"col"},"NAME"),l("th",{scope:"col"},"UPDATED AT"),l("th",{scope:"col"},"CRATED AT"),l("th",{scope:"col"},"STATUS"),l("th",{scope:"col"},"ACTION")])],-1),Me={class:"d-flex align-center"},Ee={key:1},Le={class:"d-flex flex-column"},je={class:"text-capitalize text-base"},qe={class:"text-capitalize text-base font-weight-semibold"},Re={class:"text-base"},Ge={class:"text-center",style:{width:"5rem"}},Xe=l("tr",null,[l("td",{colspan:"7",class:"text-center"},"No data available")],-1),Qe=[Xe],We={class:"text-sm text-disabled"},He={__name:"index",props:{dataSummary:{type:Object}},setup(B){const h=B,r=le,w=f(),y=f(10),g=f(1),i=f(1),s=f(0),x=f("add"),v=f([]),_=f([]),m=f(""),k=f(),U=()=>{r.fetchData().then(p=>{console.log(p),v.value=p.data.productCategories;let d=0;v.value.forEach(M=>{M.status=="active"&&d++});let n=v.value.length-d;h.dataSummary.active=d,h.dataSummary.inactive=n})},F=()=>{if(v.value===void 0)return 0;var p=r.filterData({q:m.value,status:w.value,perPage:y.value,currentPage:g.value},v.value);_.value=p.items,i.value=p.totalPage,s.value=p.totalItems};O(U),O(F),O(()=>{g.value>i.value&&(g.value=i.value)});const A=[{title:"Active",value:"active"},{title:"Inactive",value:"inactive"}],c=p=>p==="pending"?"warning":p==="active"?"success":p==="inactive"?"secondary":"primary",u=f(!1);O(()=>{g.value>i.value&&(g.value=i.value)});const o=ne(()=>{const p=_.value.length?(g.value-1)*y.value+1:0,d=_.value.length+(g.value-1)*y.value;return`Showing ${p} to ${d} of ${s.value} entries`}),C=()=>{let p=_.value.map(V=>({name:V.name,description:V.description,status:V.status,createdAt:V.createdAt,updatedAt:V.updatedAt}));const d=new Date().toISOString().slice(0,10),n=pe,M=n.utils.book_new(),X=n.utils.json_to_sheet(p);n.utils.sheet_add_aoa(X,[["Name","Description","Status","Created at","Updated at"]],{origin:"A1"}),X["!cols"]=[{wch:p.reduce((V,T)=>Math.max(V,T.name.length),10)},{wch:p.reduce((V,T)=>Math.max(V,T.description.length),10)},{wch:p.reduce((V,T)=>Math.max(V,T.status.length),10)},{wch:p.reduce((V,T)=>Math.max(V,T.createdAt.length),10)},{wch:p.reduce((V,T)=>Math.max(V,T.updatedAt.length),10)}],n.utils.book_append_sheet(M,X),n.writeFile(M,"categories-("+d+").xlsx")};return(p,d)=>(D(),N(L,null,[e(j,{title:"Search Filter"},{default:t(()=>[e(I,null,{default:t(()=>[e(H,null,{default:t(()=>[e(z,{cols:"12",sm:"4"},{default:t(()=>[e(R,{modelValue:a(w),"onUpdate:modelValue":d[0]||(d[0]=n=>P(w)?w.value=n:null),label:"Select Status",items:A,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(E),e(I,{class:"d-flex flex-wrap py-4 gap-4"},{default:t(()=>[l("div",Ne,[e(R,{modelValue:a(y),"onUpdate:modelValue":d[1]||(d[1]=n=>P(y)?y.value=n:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),e(Z),l("div",Fe,[l("div",ze,[e(ee,{modelValue:a(m),"onUpdate:modelValue":d[2]||(d[2]=n=>P(m)?m.value=n:null),placeholder:"Search",density:"compact"},null,8,["modelValue"])]),e($,{variant:"tonal",color:"secondary","prepend-icon":"tabler-screen-share",onClick:C},{default:t(()=>[S(" Export ")]),_:1}),e($,{"prepend-icon":"tabler-plus",onClick:d[3]||(d[3]=n=>{u.value=!0,x.value="add"})},{default:t(()=>[S(" Add Category ")]),_:1})])]),_:1}),e(E),e(me,{class:"text-no-wrap"},{default:t(()=>[Oe,l("tbody",null,[(D(!0),N(L,null,K(a(_),n=>(D(),N("tr",{key:n._id,style:{height:"3.75rem"}},[l("td",null,[l("div",Me,[e(te,{variant:"tonal",color:"primary",class:"me-3",size:"38"},{default:t(()=>[n.avatar?(D(),q(ve,{key:0,src:a(ae).api.url+n.avatar},null,8,["src"])):(D(),N("span",Ee,b(a(ue)(n.name)),1))]),_:2},1024),l("div",Le,[l("h6",je,b(n.name),1)])])]),l("td",null,[l("span",qe,b(new Date(n.updatedAt).toString().split("GMT")[0]),1)]),l("td",null,[l("span",Re,b(new Date(n.createdAt).toString().split("GMT")[0]),1)]),l("td",null,[e(fe,{label:"",color:c(n.status),size:"small",class:"text-capitalize"},{default:t(()=>[S(b(n.status),1)]),_:2},1032,["color"])]),l("td",Ge,[e($,{icon:"",size:"x-small",color:"default",variant:"text"},{default:t(()=>[e(G,{size:"22",icon:"tabler-edit",onClick:M=>{u.value=!0,x.value="edit",k.value=n}},null,8,["onClick"])]),_:2},1024),e($,{icon:"",size:"x-small",color:"default",variant:"text"},{default:t(()=>[e(Te,{category:n,categories:a(v),fetchCategories:U},null,8,["category","categories"])]),_:2},1024)])]))),128))]),re(l("tfoot",null,Qe,512),[[ie,!a(_).length]])]),_:1}),e(E),e(I,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:t(()=>[l("span",We,b(a(o)),1),e(ge,{modelValue:a(g),"onUpdate:modelValue":d[4]||(d[4]=n=>P(g)?g.value=n:null),size:"small","total-visible":5,length:a(i)},null,8,["modelValue","length"])]),_:1})]),_:1}),e(Be,{isDrawerOpen:a(u),"onUpdate:isDrawerOpen":d[5]||(d[5]=n=>P(u)?u.value=n:null),fetchData:U,drawerType:a(x),editData:a(k),isAddNewCategoryDrawerVisible:a(u)},null,8,["isDrawerOpen","drawerType","editData","isAddNewCategoryDrawerVisible"])],64))}},Je={__name:"ConfirmationDialog",props:{brand:{type:Object,required:!0},brands:{type:Object},fetchBrands:{type:Function}},setup(B){const h=B,r=f(!1),w=Y,y=()=>{w.deleteItem({_id:h.brand._id}).then(g=>{h.fetchBrands(),r.value=!1})};return(g,i)=>{const s=ye;return D(),q(de,{modelValue:a(r),"onUpdate:modelValue":i[3]||(i[3]=x=>P(r)?r.value=x:null),persistent:"",class:"v-dialog-sm"},{activator:t(({props:x})=>[e(G,{size:"22",onClick:i[0]||(i[0]=v=>r.value=!0),icon:"tabler-trash"})]),default:t(()=>[e(s,{onClick:i[1]||(i[1]=x=>r.value=!a(r))}),e(j,{title:"Delete product brand."},{default:t(()=>[e(I,null,{default:t(()=>[S(" Are you sure to delete "+b(h.brand.name)+"? ",1)]),_:1}),e(I,{class:"d-flex justify-end gap-3 flex-wrap"},{default:t(()=>[e($,{color:"secondary",variant:"tonal",onClick:i[2]||(i[2]=x=>r.value=!1)},{default:t(()=>[S(" Cancel ")]),_:1}),e($,{onClick:y},{default:t(()=>[S(" Delete ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Ke={__name:"LoadingDialog",props:{isDialogVisible:{type:Boolean,required:!0},txtDisplay:{type:String,required:!0}},setup(B){const h=B;return(r,w)=>(D(),q(de,{modelValue:h.isDialogVisible,"onUpdate:modelValue":w[0]||(w[0]=y=>h.isDialogVisible=y),width:"300"},{default:t(()=>[e(j,{color:"primary",width:"300"},{default:t(()=>[e(I,{class:"pt-3"},{default:t(()=>[S(b(h.txtDisplay)+" ",1),e(Ce,{indeterminate:"",color:"white",class:"mb-0"})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}},Ye={class:"d-flex align-center pa-6 pb-1"},Ze={class:"text-h6 text-capitalize"},et={class:"d-flex flex-wrap gap-2"},tt={__name:"AddNewBrandDrawer",props:{isDrawerOpen:{type:Boolean,required:!0},fetchBrands:{type:Function},drawerType:{type:String},editBrand:{type:Object},isAddNewBrandDrawerVisible:{type:Boolean}},emits:["update:isDrawerOpen"],setup(B,{emit:h}){const r=B,w=f(!1),y=f(),g=f(!1),i=f(),s=f({name:"",description:"",status:"",avatar:J,avatarFile:""}),x=f("Creating new brand..."),v=f({text:"",color:"",visible:!1}),_=()=>{var c,u;(c=y.value)==null||c.reset(),(u=y.value)==null||u.resetValidation(),i.value.value=null,s.value.avatar=J,s.value.avatarFile=""},m=Y,k=()=>{h("update:isDrawerOpen",!1),Q(()=>{_()})};O(()=>{r.drawerType!==void 0&&r.drawerType=="edit"&&(s.value.avatar=r.editBrand.avatar!=""?ae.api.url+r.editBrand.avatar:J,s.value.name=r.editBrand.name,s.value.description=r.editBrand.description,s.value.status=r.editBrand.status,x.value="Updating brand...")});const U=async()=>{var c;(c=y.value)==null||c.validate().then(async({valid:u})=>{if(u){g.value=!0;let o=new FormData;o.append("avatar",s.value.avatarFile),o.append("name",s.value.name),o.append("description",s.value.description),o.append("status",s.value.status),r.drawerType=="add"?m.insertItem(o).then(C=>{r.fetchBrands(),v.value.text=C.data.message,v.value.color="success",v.value.visible=!0,Q(()=>{h("update:isDrawerOpen",!1),_()})}).catch(C=>{v.value.text=C.response.data.message,v.value.color="error",v.value.visible=!0}).finally(()=>{g.value=!1}):r.drawerType=="edit"&&(o.append("_id",r.editBrand._id),m.updateItem(o).then(C=>{r.fetchBrands(),v.value.text=C.data.message,v.value.color="success",v.value.visible=!0,Q(()=>{h("update:isDrawerOpen",!1),_()})}).catch(C=>{v.value.text=C.response.data.message,v.value.color="error",v.value.visible=!0}).finally(()=>{g.value=!1}))}else v.value.text="Please fill up all the require field.",v.value.color="error",v.value.visible=!0})},F=c=>{h("update:isDrawerOpen",c)},A=c=>{const u=new FileReader,{files:o}=c.target;o&&o.length&&(u.readAsDataURL(o[0]),u.onload=()=>{typeof u.result=="string"&&(s.value.avatar=u.result,s.value.avatarFile=o[0])})};return(c,u)=>(D(),N(L,null,[e(De,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":r.isDrawerOpen,"onUpdate:modelValue":F},{default:t(()=>[l("div",Ye,[l("h6",Ze,b(r.drawerType)+" brand",1),e(Z),e($,{variant:"tonal",color:"default",icon:"",size:"32",class:"rounded",onClick:k},{default:t(()=>[e(G,{size:"18",icon:"tabler-x"})]),_:1})]),e(a(_e),{options:{wheelPropagation:!1}},{default:t(()=>[e(j,{flat:""},{default:t(()=>[e(I,null,{default:t(()=>[e(Ve,{ref_key:"refForm",ref:y,modelValue:a(w),"onUpdate:modelValue":u[5]||(u[5]=o=>P(w)?w.value=o:null),onSubmit:be(U,["prevent"])},{default:t(()=>[e(H,null,{default:t(()=>[e(z,{class:"text-center",role:"button"},{default:t(()=>[e(te,{rounded:"",size:"100",class:"me-6",image:a(s).avatar,onClick:u[0]||(u[0]=o=>{var C;return(C=a(i))==null?void 0:C.click()})},null,8,["image"]),l("div",et,[l("input",{ref_key:"refInputEl",ref:i,type:"file",name:"file",accept:".jpeg,.png,.jpg,GIF",hidden:"",onInput:A},null,544)])]),_:1}),e(z,{cols:"12"},{default:t(()=>[e(ee,{modelValue:a(s).name,"onUpdate:modelValue":u[1]||(u[1]=o=>a(s).name=o),rules:[a(W)],label:"name"},null,8,["modelValue","rules"])]),_:1}),e(z,{cols:"12"},{default:t(()=>[e(we,{modelValue:a(s).description,"onUpdate:modelValue":u[2]||(u[2]=o=>a(s).description=o),rules:[a(W)],label:"Description"},null,8,["modelValue","rules"])]),_:1}),e(z,{cols:"12"},{default:t(()=>[e(R,{modelValue:a(s).status,"onUpdate:modelValue":u[3]||(u[3]=o=>a(s).status=o),label:"Select Status",rules:[a(W)],items:[{title:"Active",value:"active"},{title:"Inactive",value:"inactive"}]},null,8,["modelValue","rules"])]),_:1}),e(z,{cols:"12"},{default:t(()=>[e($,{type:"submit",class:"me-3"},{default:t(()=>[S(" Submit ")]),_:1}),e($,{type:"reset",variant:"tonal",color:"secondary",onClick:k},{default:t(()=>[S(" Cancel ")]),_:1})]),_:1}),e(ce,{modelValue:a(v).visible,"onUpdate:modelValue":u[4]||(u[4]=o=>a(v).visible=o),location:"bottom end",variant:"flat",color:a(v).color},{default:t(()=>[S(b(a(v).text),1)]),_:1},8,["modelValue","color"])]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]),e(Ke,{isDialogVisible:a(g),txtDisplay:a(x)},null,8,["isDialogVisible","txtDisplay"])],64))}},at={class:"me-3",style:{width:"80px"}},lt={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},st={style:{width:"10rem"}},ot=l("thead",null,[l("tr",null,[l("th",{scope:"col"},"NAME"),l("th",{scope:"col"},"UPDATED AT"),l("th",{scope:"col"},"CRATED AT"),l("th",{scope:"col"},"STATUS"),l("th",{scope:"col"},"ACTION")])],-1),nt={class:"d-flex align-center"},rt={key:1},it={class:"d-flex flex-column"},ut={class:"text-capitalize text-base"},dt={class:"text-capitalize text-base font-weight-semibold"},ct={class:"text-base"},pt={class:"text-center",style:{width:"5rem"}},mt=l("tr",null,[l("td",{colspan:"7",class:"text-center"},"No data available")],-1),vt=[mt],ft={class:"text-sm text-disabled"},gt={__name:"index",props:{dataSummary:{type:Object}},setup(B){const h=B,r=Y,w=f(""),y=f(),g=f(10),i=f(1),s=f(1),x=f(0),v=f("add"),_=f([]),m=f(),k=f([]),U=()=>{r.fetchData().then(p=>{_.value=p.data.productBrands;let d=0;_.value.forEach(M=>{M.status=="active"&&d++});let n=_.value.length-d;h.dataSummary.active=d,h.dataSummary.inactive=n})};O(()=>{var p=r.filterData({q:w.value,status:y.value,perPage:g.value,currentPage:i.value},_.value);k.value=p.items,s.value=p.totalPage,x.value=p.totalItems}),O(U),O(()=>{i.value>s.value&&(i.value=s.value)});const A=[{title:"Active",value:"active"},{title:"Inactive",value:"inactive"}],c=p=>p==="pending"?"warning":p==="active"?"success":p==="inactive"?"secondary":"primary",u=f(!1);O(()=>{i.value>s.value&&(i.value=s.value)});const o=ne(()=>{const p=k.value.length?(i.value-1)*g.value+1:0,d=k.value.length+(i.value-1)*g.value;return`Showing ${p} to ${d} of ${x.value} entries`}),C=()=>{let p=k.value.map(V=>({name:V.name,description:V.description,status:V.status,createdAt:V.createdAt,updatedAt:V.updatedAt}));const d=new Date().toISOString().slice(0,10),n=pe,M=n.utils.book_new(),X=n.utils.json_to_sheet(p);n.utils.sheet_add_aoa(X,[["Name","Description","Status","Created at","Updated at"]],{origin:"A1"}),X["!cols"]=[{wch:p.reduce((V,T)=>Math.max(V,T.name.length),10)},{wch:p.reduce((V,T)=>Math.max(V,T.description.length),10)},{wch:p.reduce((V,T)=>Math.max(V,T.status.length),10)},{wch:p.reduce((V,T)=>Math.max(V,T.createdAt.length),10)},{wch:p.reduce((V,T)=>Math.max(V,T.updatedAt.length),10)}],n.utils.book_append_sheet(M,X),n.writeFile(M,"brands-("+d+").xlsx")};return(p,d)=>(D(),N(L,null,[e(j,{title:"Search Filter"},{default:t(()=>[e(I,null,{default:t(()=>[e(H,null,{default:t(()=>[e(z,{cols:"12",sm:"4"},{default:t(()=>[e(R,{modelValue:a(y),"onUpdate:modelValue":d[0]||(d[0]=n=>P(y)?y.value=n:null),label:"Select Status",items:A,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(E),e(I,{class:"d-flex flex-wrap py-4 gap-4"},{default:t(()=>[l("div",at,[e(R,{modelValue:a(g),"onUpdate:modelValue":d[1]||(d[1]=n=>P(g)?g.value=n:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),e(Z),l("div",lt,[l("div",st,[e(ee,{modelValue:a(w),"onUpdate:modelValue":d[2]||(d[2]=n=>P(w)?w.value=n:null),placeholder:"Search",density:"compact"},null,8,["modelValue"])]),e($,{variant:"tonal",color:"secondary","prepend-icon":"tabler-screen-share",onClick:C},{default:t(()=>[S(" Export ")]),_:1}),e($,{"prepend-icon":"tabler-plus",onClick:d[3]||(d[3]=n=>{u.value=!0,v.value="add"})},{default:t(()=>[S(" Add Brand ")]),_:1})])]),_:1}),e(E),e(me,{class:"text-no-wrap"},{default:t(()=>[ot,l("tbody",null,[(D(!0),N(L,null,K(a(k),n=>(D(),N("tr",{key:n._id,style:{height:"3.75rem"}},[l("td",null,[l("div",nt,[e(te,{variant:"tonal",color:"primary",class:"me-3",size:"38"},{default:t(()=>[n.avatar?(D(),q(ve,{key:0,src:a(ae).api.url+n.avatar},null,8,["src"])):(D(),N("span",rt,b(a(ue)(n.name)),1))]),_:2},1024),l("div",it,[l("h6",ut,b(n.name),1)])])]),l("td",null,[l("span",dt,b(new Date(n.updatedAt).toString().split("GMT")[0]),1)]),l("td",null,[l("span",ct,b(new Date(n.createdAt).toString().split("GMT")[0]),1)]),l("td",null,[e(fe,{label:"",color:c(n.status),size:"small",class:"text-capitalize"},{default:t(()=>[S(b(n.status),1)]),_:2},1032,["color"])]),l("td",pt,[e($,{icon:"",size:"x-small",color:"default",variant:"text"},{default:t(()=>[e(G,{size:"22",icon:"tabler-edit",onClick:M=>{u.value=!0,v.value="edit",m.value=n}},null,8,["onClick"])]),_:2},1024),e($,{icon:"",size:"x-small",color:"default",variant:"text"},{default:t(()=>[e(Je,{brand:n,brands:a(_),fetchBrands:U},null,8,["brand","brands"])]),_:2},1024)])]))),128))]),re(l("tfoot",null,vt,512),[[ie,!a(k).length]])]),_:1}),e(E),e(I,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:t(()=>[l("span",ft,b(a(o)),1),e(ge,{modelValue:a(i),"onUpdate:modelValue":d[4]||(d[4]=n=>P(i)?i.value=n:null),size:"small","total-visible":5,length:a(s)},null,8,["modelValue","length"])]),_:1})]),_:1}),e(tt,{isDrawerOpen:a(u),"onUpdate:isDrawerOpen":d[5]||(d[5]=n=>P(u)?u.value=n:null),fetchBrands:U,drawerType:a(v),editBrand:a(m),isAddNewBrandDrawerVisible:a(u)},null,8,["isDrawerOpen","drawerType","editBrand","isAddNewBrandDrawerVisible"])],64))}},_t={class:"me-3",style:{width:"80px"}},bt={class:"d-flex align-center flex-wrap gap-4"},ht={style:{width:"10rem"}},xt=l("thead",null,[l("tr",null,[l("th",{scope:"col"},"MODEL NAME"),l("th",{scope:"col"},"DESCRIPTION"),l("th",{scope:"col"},"BRAND"),l("th",{scope:"col"},"PRICE"),l("th",{scope:"col"},"INSTALLATION PRICE"),l("th",{scope:"col"},"STATUS"),l("th",{scope:"col"},"ACTION")])],-1),yt={class:"d-flex align-center"},Vt={key:1},wt={class:"d-flex flex-column"},Dt={class:"text-capitalize text-base"},St={class:"text-capitalize text-base font-weight-semibold"},At={class:"text-capitalize text-base font-weight-semibold"},Ct={class:"text-capitalize text-base font-weight-semibold"},$t={class:"text-capitalize text-base font-weight-semibold"},kt={class:"text-center",style:{width:"5rem"}},Pt=l("tr",null,[l("td",{colspan:"7",class:"text-center"},"No data available")],-1),Tt=[Pt],Ut={class:"text-sm text-disabled"},It={__name:"index",props:{dataSummary:{type:Object}},setup(B){const h=B,r=he(),w=$e,y=Y,g=f(""),i=f(),s=xe({models:[],modelFilter:[],rowPerPage:10,currentPage:1,totalPage:1,totalItem:0}),x=f({text:"",color:"",visible:!1});r.query.status!==void 0&&(r.query.status=="inserted"||r.query.status=="updated")&&(x.value.text=r.query.text,x.value.color="success",x.value.visible=!0);const v=()=>{w.fetchData().then(c=>{var C;s.models=c.data.data.documents,console.log(c.data),console.log(s);let u=0;s.models.forEach(p=>{p.status=="active"&&u++});let o=((C=s.models)==null?void 0:C.length)-u;h.dataSummary.active=u,h.dataSummary.inactive=o,y.fetchData().then(p=>{m(p.data.productBrands)})})},_=()=>{var c=w.filterData({q:g.value,status:i.value,perPage:s.rowPerPage,currentPage:s.currentPage},s.models);s.modelFilter=c.items,s.totalPage=c.totalPage,s.totalItem=c.totalItems};v(),O(_);const m=c=>{let u=[];for(let o of c)u[o._id]=o.name;for(let o of s.modelFilter)o.brandName=u[o.brand_id]};O(()=>{s.currentPage>s.totalPage&&(s.currentPage=s.totalPage)});const k=[{title:"Active",value:"active"},{title:"Inactive",value:"inactive"}],U=c=>c==="pending"?"warning":c==="active"?"success":c==="inactive"?"secondary":"primary";O(()=>{s.currentPage>s.totalPage&&(s.currentPage=s.totalPage)});const F=ne(()=>{const c=s.modelFilter.length?(s.currentPage-1)*s.rowPerPage+1:0,u=s.modelFilter.length+(s.currentPage-1)*s.rowPerPage;return`Showing ${c} to ${u} of ${s.totalItem} entries`}),A=()=>{let c=s.modelFilter.map(d=>({name:d.name,description:d.description,price:d.price,stock:d.stock,status:d.status,createdAt:new Date(d.createdAt).toString().split("GMT")[0],updatedAt:new Date(d.updatedAt).toString().split("GMT")[0]}));const u=new Date().toISOString().slice(0,10),o=pe,C=o.utils.book_new(),p=o.utils.json_to_sheet(c);o.utils.sheet_add_aoa(p,[["Name","Description","Price","Stock","Status","Created at","Updated at"]],{origin:"A1"}),p["!cols"]=[{wch:c.reduce((d,n)=>Math.max(d,n.name.length),10)},{wch:c.reduce((d,n)=>Math.max(d,n.description.length),10)},{wch:c.reduce((d,n)=>Math.max(d,n.status.length),10)},{wch:c.reduce((d,n)=>Math.max(d,n.createdAt.length),10)},{wch:c.reduce((d,n)=>Math.max(d,n.updatedAt.length),10)}],o.utils.book_append_sheet(C,p),o.writeFile(C,"models-("+u+").xlsx")};return(c,u)=>(D(),q(j,{title:"Search Filter"},{default:t(()=>[e(I,null,{default:t(()=>[e(H,null,{default:t(()=>[e(z,{cols:"12",sm:"4"},{default:t(()=>[e(R,{modelValue:a(i),"onUpdate:modelValue":u[0]||(u[0]=o=>P(i)?i.value=o:null),label:"Select Status",items:k,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(E),e(I,{class:"d-flex flex-wrap py-4 gap-4"},{default:t(()=>[l("div",_t,[e(R,{modelValue:a(s).rowPerPage,"onUpdate:modelValue":u[1]||(u[1]=o=>a(s).rowPerPage=o),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),e(Z),l("div",bt,[l("div",ht,[e(ee,{modelValue:a(g),"onUpdate:modelValue":u[2]||(u[2]=o=>P(g)?g.value=o:null),placeholder:"Search",density:"compact"},null,8,["modelValue"])]),e($,{variant:"tonal",color:"secondary","prepend-icon":"tabler-screen-share",onClick:A},{default:t(()=>[S(" Export ")]),_:1}),e($,{"prepend-icon":"tabler-plus",to:{name:"system-setting-product-model-tab",params:{tab:"main-detail"}}},{default:t(()=>[S(" Add New Model ")]),_:1})])]),_:1}),e(E),e(me,{class:"text-no-wrap"},{default:t(()=>[xt,l("tbody",null,[(D(!0),N(L,null,K(a(s).modelFilter,o=>{var C;return D(),N("tr",{key:o._id,style:{height:"3.75rem"}},[l("td",null,[l("div",yt,[e(te,{variant:"tonal",color:"tabler-user",class:"me-3",size:"38"},{default:t(()=>[o.avatar?(D(),q(ve,{key:0,src:a(ae).api.url+o.avatar},null,8,["src"])):(D(),N("span",Vt,b(a(ue)(o.name)),1))]),_:2},1024),l("div",wt,[l("h6",Dt,b(o.name),1)])])]),l("td",null,[l("span",St,b(((C=o.description)==null?void 0:C.length)>30?(o==null?void 0:o.description.substring(0,30))+"...":o==null?void 0:o.description),1)]),l("td",null,[l("span",At,b(o.brandName),1)]),l("td",null,[l("span",Ct,b(o.price?o.price.toLocaleString():0),1)]),l("td",null,[l("span",$t,b(o.installationPrice?o.installationPrice.toLocaleString():0),1)]),l("td",null,[e(fe,{label:"",color:U(o.status),size:"small",class:"text-capitalize"},{default:t(()=>[S(b(o.status),1)]),_:2},1032,["color"])]),l("td",kt,[e($,{icon:"",size:"x-small",color:"default",variant:"text",to:{name:"system-setting-product-model-tab",params:{tab:"main-detail"},query:{id:o._id}}},{default:t(()=>[e(G,{size:"22",icon:"tabler-edit"})]),_:2},1032,["to"])])])}),128))]),re(l("tfoot",null,Tt,512),[[ie,!a(s).modelFilter.length]])]),_:1}),e(E),e(ce,{modelValue:a(x).visible,"onUpdate:modelValue":u[3]||(u[3]=o=>a(x).visible=o),location:"bottom end",variant:"flat",color:a(x).color},{default:t(()=>[S(b(a(x).text),1)]),_:1},8,["modelValue","color"]),e(I,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:t(()=>[l("span",Ut,b(a(F)),1),e(ge,{modelValue:a(s).currentPage,"onUpdate:modelValue":u[4]||(u[4]=o=>a(s).currentPage=o),size:"small","total-visible":5,length:a(s).totalPage},null,8,["modelValue","length"])]),_:1})]),_:1}))}};const Bt={class:"d-flex align-center gap-2 my-1"},Nt={class:"text-h6 text-success"},Ua={__name:"[tab]",setup(B){const h=he(),r=f(h.params.tab),w=le,y=Y,g=[{title:"Categories",icon:"tabler-category",tab:"categories"},{title:"Brands",icon:"tabler-circle-letter-b",tab:"brands"},{title:"Models",icon:"tabler-circle-letter-p",tab:"models"}],i=xe([{icon:"tabler-category",color:"primary",title:"Categories",active:0,inactive:0,subtitle:"Inactive"},{icon:"tabler-circle-letter-b",color:"error",title:"Brands",active:0,inactive:0,subtitle:"Inactive"},{icon:"tabler-circle-letter-p",color:"success",title:"Models",active:0,inactive:0,subtitle:"Inactive"}]),s=()=>{w.fetchData().then(v=>{let _=v.data.productCategories,m=0;_.forEach(U=>{U.status=="active"&&m++});let k=_.length-m;i[0].active=m,i[0].inactive=k})},x=()=>{y.fetchData().then(v=>{let _=v.data.productBrands,m=0;_.forEach(U=>{U.status=="active"&&m++});let k=_.length-m;i[1].active=m,i[1].inactive=k})};return s(),x(),(v,_)=>(D(),N("section",null,[e(H,null,{default:t(()=>[(D(!0),N(L,null,K(a(i),m=>(D(),q(z,{key:m.title,cols:"12",sm:"6",lg:"4"},{default:t(()=>[e(j,null,{default:t(()=>[e(I,{class:"d-flex justify-space-between"},{default:t(()=>[l("div",null,[l("span",null,b(m.title),1),l("div",Bt,[l("h6",Nt,b(m.active),1)]),l("span",null,b(m.subtitle)+" : ",1),l("span",{class:Se(m.inactive>0?"text-error":"")},b(m.inactive),3)]),e(te,{rounded:"",variant:"tonal",color:m.color,icon:m.icon},null,8,["color","icon"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(z,{cols:"12"},{default:t(()=>[e(ke,{modelValue:a(r),"onUpdate:modelValue":_[0]||(_[0]=m=>P(r)?r.value=m:null),class:"v-tabs-pill"},{default:t(()=>[(D(),N(L,null,K(g,m=>e(Pe,{key:m.icon,value:m.tab,to:{name:"system-setting-product-tab",params:{tab:m.tab}}},{default:t(()=>[e(G,{size:"20",start:"",icon:m.icon},null,8,["icon"]),S(" "+b(m.title),1)]),_:2},1032,["value","to"])),64))]),_:1},8,["modelValue"])]),_:1}),e(z,{cols:"12"},{default:t(()=>[e(se,{modelValue:a(r),"onUpdate:modelValue":_[1]||(_[1]=m=>P(r)?r.value=m:null),class:"disable-tab-transition",touch:!1},{default:t(()=>[e(oe,{value:"categories"},{default:t(()=>[e(He,{dataSummary:a(i)[0]},null,8,["dataSummary"])]),_:1})]),_:1},8,["modelValue"]),e(se,{modelValue:a(r),"onUpdate:modelValue":_[2]||(_[2]=m=>P(r)?r.value=m:null),class:"disable-tab-transition",touch:!1},{default:t(()=>[e(oe,{value:"brands"},{default:t(()=>[e(gt,{dataSummary:a(i)[1]},null,8,["dataSummary"])]),_:1})]),_:1},8,["modelValue"]),e(se,{modelValue:a(r),"onUpdate:modelValue":_[3]||(_[3]=m=>P(r)?r.value=m:null),class:"disable-tab-transition",touch:!1},{default:t(()=>[e(oe,{value:"models"},{default:t(()=>[e(It,{dataSummary:a(i)[2]},null,8,["dataSummary"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]))}};export{Ua as default};
