import{k as n,o as A,b as F,w as t,p as e,m as l,q as a,x as P,v as j,be as q,D as V,E as f,bd as J,j as E,r as O,a1 as U,bk as $,d1 as z}from"./index.dc90d0c7.js";import{u as G}from"./useAppAbility.a51023cc.js";import{_ as W}from"./AuthProvider.e4c3b149.js";import{u as x,m as H,a as K}from"./useGenerateImageVariant.5d37986d.js";import{r as v,e as Q}from"./validators.e45b77e0.js";import{a as X,b as Y,c as Z,d as ee}from"./auth-v2-login-illustration-light.a2530d13.js";import{b as k}from"./route-block.6ee55eda.js";import{V as w}from"./VImg.3d76415f.js";import{a as i,V as I}from"./VRow.a1d8e599.js";import{V as te,c as _}from"./VCard.ef7570db.js";import{V as se}from"./VAlert.ef7efac5.js";import{V as S}from"./VTextField.43a06b61.js";import{V as ae}from"./VCheckbox.0dd6e9e1.js";import{V as oe}from"./VBtn.5ca26f7c.js";import{V as D}from"./VDivider.09f7ba48.js";import{V as re}from"./VForm.2d60ea09.js";import"./index.0d4b9ec4.js";import"./router.9f5abff7.js";import"./VAvatar.6d3c69e8.js";import"./position.734f74ac.js";/* empty css                   */import"./VField.1bfe0f1f.js";import"./index.35436ddd.js";import"./VInput.3420ac64.js";import"./easing.36b781ab.js";import"./forwardRefs.c003b6b8.js";import"./VCounter.07f4b2d1.js";import"./VCheckboxBtn.732d4006.js";import"./VSelectionControl.64caeaf6.js";const le={class:"position-relative auth-bg rounded-lg w-100 ma-8 me-0"},ne={class:"d-flex align-center justify-center w-100 h-100"},ie={class:"text-h5 font-weight-semibold mb-1"},me=l("p",{class:"mb-0"}," Please sign-in to your account and start the adventure ",-1),ue=l("p",{class:"text-caption mb-2"},[f(" Please do not share your "),l("strong",null,"username and password"),f(" to anyone. ")],-1),de={class:"d-flex align-center flex-wrap justify-space-between mt-2 mb-4"},ce=l("span",{class:"mx-4"},"or",-1),pe={__name:"login",setup(fe){const L=x(ee,Z,Y,X,!0),T=x(K,H),u=n(!1),b=J(),C=E(),R=G(),g=n({email:void 0,password:void 0}),h=n(),d=n("admin@pzentsmart.com"),c=n("123456"),p=n(!1),B=()=>{U.post($.api.url+"users/auth",{email:d.value,password:c.value}).then(o=>{const{accessToken:s,refreshTokenDetail:m}=o.data;m.refreshToken,m.exp;const r=z.decode(s),{userAbilities:y,userData:N}=r.userInfo;localStorage.setItem("userAbilities",JSON.stringify(y)),R.update(y),localStorage.setItem("userData",JSON.stringify(N)),localStorage.setItem("accessToken",s),localStorage.setItem("refreshTokenDetail",JSON.stringify(m)),localStorage.setItem("rememberMe",p.value),C.replace(b.query.to?String(b.query.to):"/")}).catch(o=>{const{errors:s}=o.response.data;g.value=s,console.error(o.response.data)})},M=()=>{var o;(o=h.value)==null||o.validate().then(({valid:s})=>{s&&B()})};return(o,s)=>{const m=O("RouterLink");return A(),F(I,{"no-gutters":"",class:"auth-wrapper"},{default:t(()=>[e(i,{lg:"8",class:"d-none d-lg-flex"},{default:t(()=>[l("div",le,[l("div",ne,[e(w,{"max-width":"505",src:a(L),class:"auth-illustration mt-16 mb-2"},null,8,["src"])]),e(w,{src:a(T),class:"auth-footer-mask"},null,8,["src"])])]),_:1}),e(i,{cols:"12",lg:"4",class:"d-flex align-center justify-center"},{default:t(()=>[e(te,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-4"},{default:t(()=>[e(_,null,{default:t(()=>[l("h5",ie," Welcome to "+P(a(j).app.title)+"! \u{1F44B}\u{1F3FB} ",1),me]),_:1}),e(_,null,{default:t(()=>[e(se,{color:"primary",variant:"tonal"},{default:t(()=>[ue]),_:1})]),_:1}),e(_,null,{default:t(()=>[e(a(re),{ref_key:"refVForm",ref:h,onSubmit:q(M,["prevent"])},{default:t(()=>[e(I,null,{default:t(()=>[e(i,{cols:"12"},{default:t(()=>[e(S,{modelValue:a(d),"onUpdate:modelValue":s[0]||(s[0]=r=>V(d)?d.value=r:null),label:"Email",type:"email",rules:[a(v),a(Q)],"error-messages":a(g).email},null,8,["modelValue","rules","error-messages"])]),_:1}),e(i,{cols:"12"},{default:t(()=>[e(S,{modelValue:a(c),"onUpdate:modelValue":s[1]||(s[1]=r=>V(c)?c.value=r:null),label:"Password",rules:[a(v)],type:a(u)?"text":"password","error-messages":a(g).password,"append-inner-icon":a(u)?"tabler-eye-off":"tabler-eye","onClick:appendInner":s[2]||(s[2]=r=>u.value=!a(u))},null,8,["modelValue","rules","type","error-messages","append-inner-icon"]),l("div",de,[e(ae,{modelValue:a(p),"onUpdate:modelValue":s[3]||(s[3]=r=>V(p)?p.value=r:null),label:"Remember me"},null,8,["modelValue"]),e(m,{class:"text-primary ms-2 mb-1",to:{name:"forgot-password"}},{default:t(()=>[f(" Forgot Password? ")]),_:1})]),e(oe,{block:"",type:"submit"},{default:t(()=>[f(" Login ")]),_:1})]),_:1}),e(i,{cols:"12",class:"d-flex align-center"},{default:t(()=>[e(D),ce,e(D)]),_:1}),e(i,{cols:"12",class:"text-center"},{default:t(()=>[e(W)]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1})}}};typeof k=="function"&&k(pe);export{pe as default};
