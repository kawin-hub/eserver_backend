import{bk as X,k as c,$ as N,o as y,c as A,p as e,w as a,m as o,x as D,C as G,q as t,P as Z,D as S,be as ee,E as C,F as z,ay as M,A as te,a as H,b as ae,H as le,I as oe,bd as se}from"./index.dc90d0c7.js";import{L as ie}from"./index.cb840b2e.js";import{a as re}from"./formatters.1ccc6423.js";import ne from"./DeleteButtonInList.33aae4fe.js";import{r as B}from"./validators.e45b77e0.js";import{_ as ue}from"./LoadingDialog.7ea8ccb7.js";import{V as J}from"./VSpacer.aeeabc4c.js";import{V as k}from"./VBtn.5ca26f7c.js";import{V as K,c as O}from"./VCard.ef7570db.js";import{V as de}from"./VForm.2d60ea09.js";import{V as W,a as U}from"./VRow.a1d8e599.js";import{V as Q}from"./VTextField.43a06b61.js";import{V as ce}from"./VTextarea.86d845be.js";import{V as j}from"./VSelect.a1d5e943.js";import{V as pe}from"./VSnackbar.e0f85ae8.js";import{V as me}from"./VNavigationDrawer.3d1350c1.js";import{x as fe}from"./xlsx.full.min.98caecf6.js";import{V as q}from"./VDivider.09f7ba48.js";import{V as ve}from"./VTable.b519be0a.js";import{V as Ve}from"./VAvatar.6d3c69e8.js";import{V as _e}from"./VImg.3d76415f.js";import{V as be}from"./VChip.b4ad4a52.js";import{V as xe}from"./VPagination.51e71dc0.js";import{V as we,a as he}from"./VTabs.58b1a972.js";import{V as De,a as ge}from"./VWindowItem.f740b083.js";import"./index.0d4b9ec4.js";import"./DialogCloseBtn.f0270141.js";import"./VDialog.e968e9e0.js";import"./scopeId.51c205c4.js";import"./forwardRefs.c003b6b8.js";import"./VOverlay.f4f2a002.js";import"./router.9f5abff7.js";import"./lazy.1f3570de.js";import"./easing.36b781ab.js";import"./dialog-transition.b4f36d59.js";import"./position.734f74ac.js";import"./VInput.3420ac64.js";import"./index.35436ddd.js";/* empty css                   */import"./VField.1bfe0f1f.js";import"./VCounter.07f4b2d1.js";import"./VList.b57c1041.js";import"./VMenu.b33cc928.js";import"./VCheckboxBtn.732d4006.js";import"./VSelectionControl.64caeaf6.js";import"./ssrBoot.0ecfb30c.js";import"./VSlideGroup.f23fe18d.js";const R=new ie({url:X.api.url+"inventory/locations"}),ye={class:"d-flex align-center pa-6 pb-1"},Se={class:"text-h6 text-capitalize"},Te={__name:"AddNewLocationDrawer",props:{isDrawerOpen:{type:Boolean,required:!0},fetchData:{type:Function},drawerType:{type:String},editData:{type:Object},isAddNewDrawerVisible:{type:Boolean}},emits:["update:isDrawerOpen"],setup(I,{emit:w}){const n=I,p=c(!1),f=c(),v=c(!1),s=c({name:"",description:"",status:"",avatarFile:""}),r=c({text:"",color:"",visible:!1}),g=c("Creating new category..."),_=()=>{var b,m;(b=f.value)==null||b.reset(),(m=f.value)==null||m.resetValidation(),s.value.avatarFile=null},T=R,F=()=>{w("update:isDrawerOpen",!1),M(()=>{_()})};N(()=>{n.drawerType!==void 0&&n.drawerType=="edit"&&(s.value.name=n.editData.name,s.value.description=n.editData.description,s.value.status=n.editData.status,g.value="Updating category...")});const L=async()=>{var b;(b=f.value)==null||b.validate().then(async({valid:m})=>{if(m){v.value=!0;let i=new FormData;i.append("name",s.value.name),i.append("description",s.value.description),i.append("status",s.value.status),n.drawerType=="add"?T.insertItem(i).then(x=>{n.fetchData(),r.value.text=x.data.message,r.value.color="success",r.value.visible=!0,M(()=>{w("update:isDrawerOpen",!1),_()})}).catch(x=>{console.log(x.response.data),r.value.text=x.response.data.message,r.value.color="error",r.value.visible=!0}).finally(()=>{v.value=!1}):n.drawerType=="edit"&&(i.append("_id",n.editData._id),T.updateItem(i).then(x=>{n.fetchData(),r.value.text=x.data.message,r.value.color="success",r.value.visible=!0,M(()=>{w("update:isDrawerOpen",!1),_()})}).catch(x=>{console.log(x.response.data)}).finally(()=>{v.value=!1}))}else r.value.text="Please fill up all the require field.",r.value.color="error",r.value.visible=!0})},P=b=>{w("update:isDrawerOpen",b)};return(b,m)=>(y(),A(z,null,[e(me,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":n.isDrawerOpen,"onUpdate:modelValue":P},{default:a(()=>[o("div",ye,[o("h6",Se,D(n.drawerType)+" Location",1),e(J),e(k,{variant:"tonal",color:"default",icon:"",size:"32",class:"rounded",onClick:F},{default:a(()=>[e(G,{size:"18",icon:"tabler-x"})]),_:1})]),e(t(Z),{options:{wheelPropagation:!1}},{default:a(()=>[e(K,{flat:""},{default:a(()=>[e(O,null,{default:a(()=>[e(de,{ref_key:"refForm",ref:f,modelValue:t(p),"onUpdate:modelValue":m[4]||(m[4]=i=>S(p)?p.value=i:null),onSubmit:ee(L,["prevent"])},{default:a(()=>[e(W,null,{default:a(()=>[e(U,{cols:"12"},{default:a(()=>[e(Q,{modelValue:t(s).name,"onUpdate:modelValue":m[0]||(m[0]=i=>t(s).name=i),rules:[t(B)],label:"name"},null,8,["modelValue","rules"])]),_:1}),e(U,{cols:"12"},{default:a(()=>[e(ce,{modelValue:t(s).description,"onUpdate:modelValue":m[1]||(m[1]=i=>t(s).description=i),rules:[t(B)],label:"Description"},null,8,["modelValue","rules"])]),_:1}),e(U,{cols:"12"},{default:a(()=>[e(j,{modelValue:t(s).status,"onUpdate:modelValue":m[2]||(m[2]=i=>t(s).status=i),label:"Select Status",rules:[t(B)],items:[{title:"Active",value:"active"},{title:"Inactive",value:"inactive"}]},null,8,["modelValue","rules"])]),_:1}),e(U,{cols:"12"},{default:a(()=>[e(k,{type:"submit",class:"me-3"},{default:a(()=>[C(" Submit ")]),_:1}),e(k,{type:"reset",variant:"tonal",color:"secondary",onClick:F},{default:a(()=>[C(" Cancel ")]),_:1})]),_:1}),e(pe,{modelValue:t(r).visible,"onUpdate:modelValue":m[3]||(m[3]=i=>t(r).visible=i),location:"bottom end",variant:"flat",color:t(r).color},{default:a(()=>[C(D(t(r).text),1)]),_:1},8,["modelValue","color"])]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]),e(ue,{isDialogVisible:t(v),txtDisplay:t(g)},null,8,["isDialogVisible","txtDisplay"])],64))}},Ae={class:"me-3",style:{width:"80px"}},ke={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},Ue={style:{width:"10rem"}},Ce=o("thead",null,[o("tr",null,[o("th",{scope:"col"},"NAME"),o("th",{scope:"col"},"UPDATED AT"),o("th",{scope:"col"},"CRATED AT"),o("th",{scope:"col"},"STATUS"),o("th",{scope:"col"},"ACTION")])],-1),Fe={class:"d-flex align-center"},Le={key:1},Ne={class:"d-flex flex-column"},Oe={class:"text-capitalize text-base"},ze={class:"text-capitalize text-base font-weight-semibold"},Ie={class:"text-base"},Pe={class:"text-center",style:{width:"5rem"}},$e=o("tr",null,[o("td",{colspan:"7",class:"text-center"},"No data available")],-1),Ee=[$e],Me={class:"text-sm text-disabled"},Be={__name:"index",props:{dataSummary:{type:Object}},setup(I){const w=R,n=c(),p=c(10),f=c(1),v=c(1),s=c(0),r=c("add"),g=c([]),_=c([]),T=c(""),F=c(),L=()=>{w.fetchData().then(u=>{g.value=u.data.inventoryLocations;let d=0;g.value.forEach(l=>{l.status=="active"&&d++}),g.value.length-d})},P=()=>{if(g.value===void 0)return 0;var u=w.filterData({q:T.value,status:n.value,perPage:p.value,currentPage:f.value},g.value);_.value=u.items,v.value=u.totalPage,s.value=u.totalItems};N(L),N(P),N(()=>{f.value>v.value&&(f.value=v.value)});const b=[{title:"Active",value:"active"},{title:"Inactive",value:"inactive"}],m=u=>u==="pending"?"warning":u==="active"?"success":u==="inactive"?"secondary":"primary",i=c(!1);N(()=>{f.value>v.value&&(f.value=v.value)});const x=te(()=>{const u=_.value.length?(f.value-1)*p.value+1:0,d=_.value.length+(f.value-1)*p.value;return`Showing ${u} to ${d} of ${s.value} entries`}),Y=()=>{let u=_.value.map(V=>({name:V.name,description:V.description,status:V.status,createdAt:V.createdAt,updatedAt:V.updatedAt}));const d=new Date().toISOString().slice(0,10),l=fe,$=l.utils.book_new(),E=l.utils.json_to_sheet(u);l.utils.sheet_add_aoa(E,[["Name","Description","Status","Created at","Updated at"]],{origin:"A1"}),E["!cols"]=[{wch:u.reduce((V,h)=>Math.max(V,h.name.length),10)},{wch:u.reduce((V,h)=>Math.max(V,h.description.length),10)},{wch:u.reduce((V,h)=>Math.max(V,h.status.length),10)},{wch:u.reduce((V,h)=>Math.max(V,h.createdAt.length),10)},{wch:u.reduce((V,h)=>Math.max(V,h.updatedAt.length),10)}],l.utils.book_append_sheet($,E),l.writeFile($,"categories-("+d+").xlsx")};return(u,d)=>(y(),A(z,null,[e(K,{title:"Search Filter"},{default:a(()=>[e(O,null,{default:a(()=>[e(W,null,{default:a(()=>[e(U,{cols:"12",sm:"4"},{default:a(()=>[e(j,{modelValue:t(n),"onUpdate:modelValue":d[0]||(d[0]=l=>S(n)?n.value=l:null),label:"Select Status",items:b,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(q),e(O,{class:"d-flex flex-wrap py-4 gap-4"},{default:a(()=>[o("div",Ae,[e(j,{modelValue:t(p),"onUpdate:modelValue":d[1]||(d[1]=l=>S(p)?p.value=l:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),e(J),o("div",ke,[o("div",Ue,[e(Q,{modelValue:t(T),"onUpdate:modelValue":d[2]||(d[2]=l=>S(T)?T.value=l:null),placeholder:"Search",density:"compact"},null,8,["modelValue"])]),e(k,{variant:"tonal",color:"secondary","prepend-icon":"tabler-screen-share",onClick:Y},{default:a(()=>[C(" Export ")]),_:1}),e(k,{"prepend-icon":"tabler-plus",onClick:d[3]||(d[3]=l=>{i.value=!0,r.value="add"})},{default:a(()=>[C(" Add Location ")]),_:1})])]),_:1}),e(q),e(ve,{class:"text-no-wrap"},{default:a(()=>[Ce,o("tbody",null,[(y(!0),A(z,null,H(t(_),l=>(y(),A("tr",{key:l._id,style:{height:"3.75rem"}},[o("td",null,[o("div",Fe,[e(Ve,{variant:"tonal",color:"primary",class:"me-3",size:"38"},{default:a(()=>[l.avatar?(y(),ae(_e,{key:0,src:t(X).api.url+l.avatar},null,8,["src"])):(y(),A("span",Le,D(t(re)(l.name)),1))]),_:2},1024),o("div",Ne,[o("h6",Oe,D(l.name),1)])])]),o("td",null,[o("span",ze,D(new Date(l.updatedAt).toString().split("GMT")[0]),1)]),o("td",null,[o("span",Ie,D(new Date(l.createdAt).toString().split("GMT")[0]),1)]),o("td",null,[e(be,{label:"",color:m(l.status),size:"small",class:"text-capitalize"},{default:a(()=>[C(D(l.status),1)]),_:2},1032,["color"])]),o("td",Pe,[e(k,{icon:"",size:"x-small",color:"default",variant:"text"},{default:a(()=>[e(G,{size:"22",icon:"tabler-edit",onClick:$=>{i.value=!0,r.value="edit",F.value=l}},null,8,["onClick"])]),_:2},1024),e(k,{icon:"",size:"x-small",color:"default",variant:"text"},{default:a(()=>[e(ne,{title:"Delete inventory location",data:l,"fetch-data":L,"use-list-store":t(R)},null,8,["data","use-list-store"])]),_:2},1024)])]))),128))]),le(o("tfoot",null,Ee,512),[[oe,!t(_).length]])]),_:1}),e(q),e(O,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:a(()=>[o("span",Me,D(t(x)),1),e(xe,{modelValue:t(f),"onUpdate:modelValue":d[4]||(d[4]=l=>S(f)?f.value=l:null),size:"small","total-visible":5,length:t(v)},null,8,["modelValue","length"])]),_:1})]),_:1}),e(Te,{isDrawerOpen:t(i),"onUpdate:isDrawerOpen":d[5]||(d[5]=l=>S(i)?i.value=l:null),fetchData:L,drawerType:t(r),editData:t(F),isAddNewDrawerVisible:t(i)},null,8,["isDrawerOpen","drawerType","editData","isAddNewDrawerVisible"])],64))}};const zt={__name:"[tab]",setup(I){const w=[{title:"Location",icon:"tabler-category",tab:"location"}],n=se(),p=c(n.params.tab);return(f,v)=>(y(),A("section",null,[e(W,null,{default:a(()=>[e(U,{cols:"12"},{default:a(()=>[e(we,{modelValue:t(p),"onUpdate:modelValue":v[0]||(v[0]=s=>S(p)?p.value=s:null),class:"v-tabs-pill"},{default:a(()=>[(y(),A(z,null,H(w,s=>e(he,{key:s.icon,value:s.tab,to:{name:"system-setting-inventory-tab",params:{tab:s.tab}}},{default:a(()=>[e(G,{size:"20",start:"",icon:s.icon},null,8,["icon"]),C(" "+D(s.title),1)]),_:2},1032,["value","to"])),64))]),_:1},8,["modelValue"])]),_:1}),e(U,{cols:"12"},{default:a(()=>[e(De,{modelValue:t(p),"onUpdate:modelValue":v[1]||(v[1]=s=>S(p)?p.value=s:null),class:"disable-tab-transition",touch:!1},{default:a(()=>[e(ge,{value:"location"},{default:a(()=>[e(Be)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]))}};export{zt as default};
