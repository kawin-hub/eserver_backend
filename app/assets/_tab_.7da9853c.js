import{k as u,bd as ve,$ as W,Z as L,A as fe,o as F,c as I,p as t,w as s,q as o,D as w,m as l,cS as X,E as k,F as R,a as Z,x as f,C as P,H as oe,I as se,al as _e}from"./index.35991f09.js";import{u as xe}from"./useLeadListStore.a2ed0901.js";import{_ as be}from"./confirm-dialog.bbba6032.js";import{x as he}from"./xlsx.full.min.97d888ff.js";import{c as j,V as ne}from"./VCard.bb37f72e.js";import{V as Y,a as T}from"./VRow.f9366793.js";import{V as O}from"./VSelect.1bdb2ecc.js";import{V as A}from"./VDivider.0f44b1ce.js";import{V as re}from"./VSpacer.80b37d7c.js";import{V as H}from"./VTextField.4609cb9e.js";import{V as K}from"./VBtn.3e0f2bdf.js";import{V as ue}from"./VTable.0fe7de7a.js";import{V as ae}from"./VChip.81c7dee3.js";import{V as ie}from"./VPagination.1d990c54.js";import{V as Q}from"./VSnackbar.34637b93.js";import{u as Ve}from"./useQuotationListStore.dc1b9404.js";import{u as me}from"./modelListStore.3cabc70f.js";import{u as ge,a as ye}from"./categoryListStore.0ab0e140.js";import{u as we}from"./useSaleCustomerLevelsListStore.567ead43.js";import{b as pe}from"./route-block.182765af.js";import{V as De,a as $e}from"./VTabs.6d0b43a6.js";import{V as te,a as le}from"./VWindowItem.f35c6905.js";import"./index.a44853ab.js";import"./DialogCloseBtn.9d70464b.js";import"./VDialog.61de6f6e.js";import"./scopeId.a8f1d836.js";import"./forwardRefs.c003b6b8.js";import"./VOverlay.a330b104.js";import"./router.88351000.js";import"./lazy.7e795ed8.js";import"./easing.36b781ab.js";import"./VImg.632117c3.js";import"./dialog-transition.13a8c048.js";import"./VAvatar.6ed53308.js";import"./position.15b8fc3a.js";import"./VList.8e9051e1.js";import"./index.a8f66a9c.js";import"./VMenu.768d7784.js";import"./VCheckboxBtn.a302f7e6.js";import"./VSelectionControl.6ac8e090.js";import"./VInput.6bf7b46e.js";import"./form.e84299e4.js";/* empty css                   */import"./VField.93eb26cb.js";import"./VCounter.cb1a1153.js";import"./VSlideGroup.6d88d719.js";import"./ssrBoot.8b43ebe3.js";const Se={class:"me-3",style:{width:"80px"}},ke={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},Ce={style:{width:"10rem"}},Ne=l("thead",null,[l("tr",null,[l("th",{scope:"col"},"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E2A\u0E23\u0E49\u0E32\u0E07"),l("th",{scope:"col"},"\u0E0A\u0E37\u0E48\u0E2D\u0E1A\u0E23\u0E34\u0E29\u0E31\u0E17"),l("th",{scope:"col"},"\u0E0A\u0E37\u0E48\u0E2D\u0E1C\u0E39\u0E49\u0E15\u0E34\u0E14\u0E15\u0E48\u0E2D"),l("th",{scope:"col"},"\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23\u0E28\u0E31\u0E1E\u0E17\u0E4C\u0E1C\u0E39\u0E49\u0E15\u0E34\u0E14\u0E15\u0E48\u0E2D"),l("th",{scope:"col"},"\u0E23\u0E30\u0E14\u0E31\u0E1ALead"),l("th",{scope:"col"},"\u0E01\u0E32\u0E23\u0E14\u0E33\u0E40\u0E19\u0E34\u0E19\u0E01\u0E32\u0E23")])],-1),Ue={class:"text-capitalize text-base font-weight-semibold"},ze={class:"text-capitalize text-base"},Le={class:"text-base"},Pe={class:"text-base"},Fe={class:"text-base"},Ie=l("tr",null,[l("td",{colspan:"7",class:"text-center"},"No data available")],-1),Ee=[Ie],Me={class:"text-sm text-disabled"},Be={__name:"index",setup(ee){const E=xe,g=u(),d=u(10),p=u(1),c=u(1),m=u(0);u("add"),ve();const U=u([]),S=u([]),D=u(""),M=u("");u();const N=u(""),y=u({message:"",color:"warning",visible:!1,icon:""}),h=()=>{var x="?page="+p.value+"&limit="+d.value;D.value.trim()!=""&&(x+="&txtSearch="+D.value),g.value!=null&&(x+="&level="+g.value),E.fetchData(x).then(v=>{const n=v.data;n.code==1&&(U.value=n.data.documents,c.value=n.data.totalPage,N.value=`\u0E41\u0E2A\u0E14\u0E07\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25 ${n.data.page*n.data.limit-(n.data.limit-1)} \u0E16\u0E36\u0E07 ${n.data.page*n.data.limit} \u0E08\u0E32\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14 ${n.data.totalCount} \u0E1A\u0E23\u0E23\u0E17\u0E31\u0E14`)})};h(),W(()=>{p.value>c.value&&(p.value=c.value)}),L(p,()=>{h()}),L(d,()=>{h()}),L(g,()=>{h()});const z=[{title:"Low prudential",value:"low prudential"},{title:"Middle prudential",value:"middle prudential"},{title:"High prudential",value:"high prudential"}],$=x=>x==="low prudential"?"warning":x==="middle prudential"?"info":x==="high prudential"?"success":"primary";W(()=>{p.value>c.value&&(p.value=c.value)}),fe(()=>{const x=S.value.length?(p.value-1)*d.value+1:0,v=S.value.length+(p.value-1)*d.value;return`\u0E41\u0E2A\u0E14\u0E07\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25 ${x} \u0E16\u0E36\u0E07 ${v} \u0E08\u0E32\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14 ${m.value} \u0E1A\u0E23\u0E23\u0E17\u0E31\u0E14`});const V=()=>{M.value.trim().toLowerCase()!=D.value.trim().toLowerCase()&&(h(),M.value=D.value)},B=(x,v)=>{E.deleteItem({_id:x}).then(n=>{n.data.code==1?(h(),y.value.visible=!0,y.value.icon="tabler-trash",y.value.message="\u0E25\u0E1A\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25 "+v+" \u0E40\u0E23\u0E35\u0E22\u0E1A\u0E23\u0E49\u0E2D\u0E22\u0E41\u0E25\u0E49\u0E27",y.value.color="warning"):(y.value.visible=!0,y.value.icon="tabler-trash",y.value.message="\u0E44\u0E21\u0E48\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E25\u0E1A\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25 "+v+" \u0E44\u0E14\u0E49 \u0E01\u0E23\u0E38\u0E13\u0E32\u0E15\u0E34\u0E14\u0E15\u0E48\u0E2D\u0E40\u0E08\u0E49\u0E32\u0E2B\u0E19\u0E49\u0E32\u0E17\u0E35\u0E48",y.value.color="error")})},J=()=>{let x=S.value.map(e=>({createDate:e.createDate,companyName:e.companyName,leadFirstname:e.leadFirstname,leadContactNumber:e.leadContactNumber,leadLevel:e.leadLevel}));const v=new Date().toISOString().slice(0,10),n=he,i=n.utils.book_new(),r=n.utils.json_to_sheet(x);n.utils.sheet_add_aoa(r,[["\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E2A\u0E23\u0E49\u0E32\u0E07 Lead","\u0E0A\u0E37\u0E48\u0E2D\u0E1A\u0E23\u0E34\u0E29\u0E31\u0E17","\u0E0A\u0E37\u0E48\u0E2D\u0E1C\u0E39\u0E49\u0E15\u0E34\u0E14\u0E15\u0E48\u0E2D","\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23\u0E28\u0E31\u0E1E\u0E17\u0E4C\u0E1C\u0E39\u0E49\u0E15\u0E34\u0E14\u0E15\u0E48\u0E2D","\u0E2A\u0E16\u0E32\u0E19\u0E30 Lead"]],{origin:"A1"}),r["!cols"]=[{wch:x.reduce((e,a)=>Math.max(e,a.createDate.length),10)},{wch:x.reduce((e,a)=>Math.max(e,a.companyName.length),10)},{wch:x.reduce((e,a)=>Math.max(e,a.leadFirstname.length),10)},{wch:x.reduce((e,a)=>Math.max(e,a.leadContactNumber.length),10)},{wch:x.reduce((e,a)=>Math.max(e,a.leadLevel.length),10)}],n.utils.book_append_sheet(i,r),n.writeFile(i,"leads-list("+v+").xlsx")},q=u({visible:!1,body:""});return(x,v)=>(F(),I(R,null,[t(ne,{title:"\u0E15\u0E31\u0E27\u0E01\u0E23\u0E2D\u0E07"},{default:s(()=>[t(j,null,{default:s(()=>[t(Y,null,{default:s(()=>[t(T,{cols:"12",sm:"4"},{default:s(()=>[t(O,{modelValue:o(g),"onUpdate:modelValue":v[0]||(v[0]=n=>w(g)?g.value=n:null),label:" -- \u0E40\u0E25\u0E37\u0E2D\u0E01\u0E23\u0E30\u0E14\u0E31\u0E1A Lead -- ",items:z,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(A),t(j,{class:"d-flex flex-wrap py-4 gap-4"},{default:s(()=>[l("div",Se,[t(O,{modelValue:o(d),"onUpdate:modelValue":v[1]||(v[1]=n=>w(d)?d.value=n:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),t(re),l("div",ke,[l("div",Ce,[t(H,{modelValue:o(D),"onUpdate:modelValue":v[2]||(v[2]=n=>w(D)?D.value=n:null),placeholder:"\u0E04\u0E49\u0E19\u0E2B\u0E32",density:"compact",onKeyup:X(V,["enter"])},null,8,["modelValue","onKeyup"])]),t(K,{variant:"tonal",color:"secondary","prepend-icon":"tabler-screen-share",onClick:J},{default:s(()=>[k(" \u0E2A\u0E48\u0E07\u0E2D\u0E2D\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25 ")]),_:1}),t(K,{"prepend-icon":"tabler-plus",to:{name:"projects-sale-lead-new"}},{default:s(()=>[k(" \u0E40\u0E1E\u0E34\u0E48\u0E21 Lead ")]),_:1})])]),_:1}),t(A),t(ue,{class:"text-no-wrap"},{default:s(()=>[Ne,l("tbody",null,[(F(!0),I(R,null,Z(o(U),n=>(F(),I("tr",{key:n.id,style:{height:"3.75rem"}},[l("td",null,[l("span",Ue,f(n.createdAt.split("T")[0]+" "+n.createdAt.split("T")[1].split(".")[0]),1)]),l("td",null,[l("span",ze,f(n.companyInfo[0].companyName),1)]),l("td",null,[l("span",Le,f(n.companyInfo[0].firstname),1)]),l("td",null,[l("span",Pe,f(n.companyInfo[0].contactNumber),1)]),l("td",null,[l("span",Fe,[t(ae,{label:"",color:$(n.level),size:"small",class:"text-capitalize"},{default:s(()=>[k(f(n.level),1)]),_:2},1032,["color"])])]),l("td",null,[t(K,{icon:"",size:"x-small",color:"default",variant:"text",to:{name:"projects-sale-lead-preview",query:{_id:n._id}}},{default:s(()=>[t(P,{size:"22",icon:"tabler-eye"})]),_:2},1032,["to"]),t(K,{icon:"",size:"x-small",color:"default",variant:"text",to:{name:"projects-sale-lead-edit",query:{_id:n._id}}},{default:s(()=>[t(P,{size:"22",icon:"tabler-edit"})]),_:2},1032,["to"]),t(be,{title:"\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E01\u0E32\u0E23\u0E25\u0E1A",data:{_id:`${n._id}`,name:`${n.companyInfo[0].companyName}`,body:`\u0E04\u0E38\u0E13\u0E15\u0E49\u0E2D\u0E07\u0E01\u0E32\u0E23\u0E25\u0E1A ${n.companyInfo[0].companyName} \u0E08\u0E23\u0E34\u0E07\u0E2B\u0E23\u0E37\u0E2D\u0E44\u0E21\u0E48?`},callBack:B},null,8,["data"])])]))),128))]),oe(l("tfoot",null,Ee,512),[[se,!o(U).length]])]),_:1}),t(A),t(j,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:s(()=>[l("span",Me,f(o(N)),1),t(ie,{modelValue:o(p),"onUpdate:modelValue":v[3]||(v[3]=n=>w(p)?p.value=n:null),size:"small","total-visible":5,length:o(c)},null,8,["modelValue","length"]),t(Q,{modelValue:o(y).visible,"onUpdate:modelValue":v[4]||(v[4]=n=>o(y).visible=n),location:"bottom end",variant:"flat",color:o(y).color},{default:s(()=>[t(P,{icon:o(y).icon},null,8,["icon"]),k(" "+f(o(y).message),1)]),_:1},8,["modelValue","color"])]),_:1})]),_:1}),t(Q,{modelValue:o(q).visible,"onUpdate:modelValue":v[5]||(v[5]=n=>o(q).visible=n),location:"bottom end"},{default:s(()=>[t(P,{icon:"tabler-circle-check",color:"success",size:"30"}),k(" \xA0 "+f(o(q).body),1)]),_:1},8,["modelValue"])],64))}},je={class:"me-3",style:{width:"80px"}},Te={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},Ae={style:{width:"10rem"}},Ke=l("thead",null,[l("tr",null,[l("th",{scope:"col"},"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E2A\u0E23\u0E49\u0E32\u0E07\u0E43\u0E1A\u0E40\u0E2A\u0E19\u0E2D\u0E23\u0E32\u0E04\u0E32"),l("th",{scope:"col"},"\u0E40\u0E25\u0E02\u0E17\u0E35\u0E48\u0E43\u0E1A\u0E40\u0E2A\u0E19\u0E2D\u0E23\u0E32\u0E04\u0E32"),l("th",{scope:"col"},"\u0E0A\u0E37\u0E48\u0E2D\u0E1A\u0E23\u0E34\u0E29\u0E31\u0E17"),l("th",{scope:"col"},"\u0E22\u0E2D\u0E14\u0E40\u0E07\u0E34\u0E19\u0E2A\u0E38\u0E17\u0E18\u0E34"),l("th",{scope:"col"},"\u0E2A\u0E16\u0E32\u0E19\u0E30\u0E01\u0E32\u0E23\u0E0A\u0E33\u0E23\u0E30\u0E40\u0E07\u0E34\u0E19"),l("th",{scope:"col"},"\u0E2A\u0E16\u0E32\u0E19\u0E30\u0E43\u0E1A\u0E40\u0E2A\u0E19\u0E2D\u0E23\u0E32\u0E04\u0E32"),l("th",{scope:"col"},"\u0E01\u0E32\u0E23\u0E14\u0E33\u0E40\u0E19\u0E34\u0E19\u0E01\u0E32\u0E23")])],-1),Oe={class:"text-capitalize text-base font-weight-semibold"},Re={class:"text-capitalize text-base"},qe={class:"text-base"},Ge={class:"text-base"},Qe={class:"text-base"},Xe={class:"text-base"},He=l("tr",null,[l("td",{colspan:"7",class:"text-center"},"No data available")],-1),We=[He],Je={class:"text-sm text-disabled"},Ze={__name:"index",props:{dataSummary:{type:Object}},setup(ee){const E=Ve,g=u(null),d=u(null),p=u(10),c=u(1),m=u(1),U=u(0),S=u("");u("add");const D=u([]),M=u([]),N=u("");u();const y=u(""),h=u({visible:!1,icon:"tabler-xbox-x",color:"error",title:"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E43\u0E2B\u0E49\u0E04\u0E23\u0E1A\u0E15\u0E32\u0E21\u0E17\u0E35\u0E48\u0E23\u0E30\u0E1A\u0E1A\u0E01\u0E33\u0E2B\u0E19\u0E14"}),z=u({visible:!1,body:""}),$=()=>{var i="?page="+c.value+"&limit="+p.value;g.value!=null&&(i+="&quotationStatus="+g.value),d.value!=null&&(i+="&currentStatus="+d.value),N.value.trim()!=""&&(i+="&txtSearch="+N.value),E.fetchData(i).then(r=>{const e=r.data;e.code==1&&(D.value=e.data.documents,m.value=e.data.totalPage,y.value=`\u0E41\u0E2A\u0E14\u0E07\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25 ${e.data.page*e.data.limit-(e.data.limit-1)} \u0E16\u0E36\u0E07 ${e.data.page*e.data.limit} \u0E08\u0E32\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14 ${e.data.totalCount} \u0E1A\u0E23\u0E23\u0E17\u0E31\u0E14`)})};$(),W(()=>{c.value>m.value&&(c.value=m.value)}),L(c,()=>{$()}),L(p,()=>{$()}),L(g,()=>{$()}),L(d,()=>{$()});const V=[{title:"Purchased",value:"purchased"},{title:"Not yet purchased",value:"not yet purchased"}],B=[{title:"Warm",value:"warm"},{title:"Hot",value:"hot"},{title:"Cold",value:"cold"},{title:"Done",value:"done"}],J=i=>i==="not yet purchased"?"warning":i==="purchased"?"success":"primary",q=i=>i==="warm"?"warning":i==="hot"?"error":i==="cold"?"info":i==="done"?"success":"primary",x=()=>{S.value.trim().toLowerCase()!=N.value.trim().toLowerCase()&&($(),S.value=N.value)},v=(i,r)=>{E.deleteItem({_id:i}).then(e=>{e.data.code==1?($(),h.value.visible=!0,h.value.icon="tabler-trash",h.value.message="\u0E25\u0E1A\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25 "+r+" \u0E40\u0E23\u0E35\u0E22\u0E1A\u0E23\u0E49\u0E2D\u0E22\u0E41\u0E25\u0E49\u0E27",h.value.color="warning"):(h.value.visible=!0,h.value.icon="tabler-trash",h.value.message="\u0E44\u0E21\u0E48\u0E2A\u0E32\u0E21\u0E32\u0E23\u0E16\u0E25\u0E1A\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25 "+r+" \u0E44\u0E14\u0E49 \u0E01\u0E23\u0E38\u0E13\u0E32\u0E15\u0E34\u0E14\u0E15\u0E48\u0E2D\u0E40\u0E08\u0E49\u0E32\u0E2B\u0E19\u0E49\u0E32\u0E17\u0E35\u0E48",h.value.color="error")})};fe(()=>{const i=M.value.length?(c.value-1)*p.value+1:0,r=M.value.length+(c.value-1)*p.value;return`\u0E41\u0E2A\u0E14\u0E07\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25 ${i} \u0E16\u0E36\u0E07 ${r} \u0E08\u0E32\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14 ${U.value} \u0E1A\u0E23\u0E23\u0E17\u0E31\u0E14`});const n=()=>{let i=M.value.map(b=>({createDate:b.createDate,documentNumber:b.documentNumber,companyName:b.companyName,total:b.total,balance:b.balance,quotationStatus:b.quotationStatus}));const r=new Date().toISOString().slice(0,10),e=he,a=e.utils.book_new(),_=e.utils.json_to_sheet(i);e.utils.sheet_add_aoa(_,[["\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E2A\u0E23\u0E49\u0E32\u0E07\u0E43\u0E1A\u0E40\u0E2A\u0E19\u0E2D\u0E23\u0E32\u0E04\u0E32","\u0E40\u0E25\u0E02\u0E17\u0E35\u0E48\u0E43\u0E1A\u0E40\u0E2A\u0E19\u0E2D\u0E23\u0E32\u0E04\u0E32","\u0E0A\u0E37\u0E48\u0E2D\u0E1A\u0E23\u0E34\u0E29\u0E31\u0E17","\u0E22\u0E2D\u0E14\u0E40\u0E07\u0E34\u0E19\u0E2A\u0E38\u0E17\u0E18\u0E34","\u0E22\u0E2D\u0E14\u0E40\u0E07\u0E34\u0E19\u0E04\u0E07\u0E40\u0E2B\u0E25\u0E37\u0E2D","\u0E2A\u0E16\u0E32\u0E19\u0E30\u0E43\u0E1A\u0E40\u0E2A\u0E19\u0E2D\u0E23\u0E32\u0E04\u0E32"]],{origin:"A1"}),_["!cols"]=[{wch:i.reduce((b,C)=>Math.max(b,C.createDate.length),10)},{wch:i.reduce((b,C)=>Math.max(b,C.documentNumber.length),10)},{wch:i.reduce((b,C)=>Math.max(b,C.companyName.length),10)},{wch:i.reduce((b,C)=>Math.max(b,C.total.length),10)},{wch:i.reduce((b,C)=>Math.max(b,C.balance.length),10)},{wch:i.reduce((b,C)=>Math.max(b,C.quotationStatus.length),10)}],e.utils.book_append_sheet(a,_),e.writeFile(a,"quotation-list("+r+").xlsx")};return(i,r)=>(F(),I(R,null,[t(T,null,{default:s(()=>[t(ne,{title:"\u0E15\u0E31\u0E27\u0E01\u0E23\u0E2D\u0E07"},{default:s(()=>[t(j,null,{default:s(()=>[t(Y,null,{default:s(()=>[t(T,{cols:"12",sm:"4"},{default:s(()=>[t(O,{modelValue:o(d),"onUpdate:modelValue":r[0]||(r[0]=e=>w(d)?d.value=e:null),label:" -- \u0E40\u0E25\u0E37\u0E2D\u0E01\u0E2A\u0E16\u0E32\u0E19\u0E30\u0E01\u0E32\u0E23\u0E0A\u0E33\u0E23\u0E30\u0E40\u0E07\u0E34\u0E19 -- ",items:V,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1}),t(T,{cols:"12",sm:"4"},{default:s(()=>[t(O,{modelValue:o(g),"onUpdate:modelValue":r[1]||(r[1]=e=>w(g)?g.value=e:null),label:" -- \u0E40\u0E25\u0E37\u0E2D\u0E01\u0E2A\u0E16\u0E32\u0E19\u0E30\u0E43\u0E1A\u0E40\u0E2A\u0E19\u0E2D\u0E23\u0E32\u0E04\u0E32 -- ",items:B,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(A),t(j,{class:"d-flex flex-wrap py-4 gap-4"},{default:s(()=>[l("div",je,[t(O,{modelValue:o(p),"onUpdate:modelValue":r[2]||(r[2]=e=>w(p)?p.value=e:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),t(re),l("div",Te,[l("div",Ae,[t(H,{modelValue:o(N),"onUpdate:modelValue":r[3]||(r[3]=e=>w(N)?N.value=e:null),placeholder:"\u0E04\u0E49\u0E19\u0E2B\u0E32",density:"compact",onKeyup:X(x,["enter"])},null,8,["modelValue","onKeyup"])]),t(K,{variant:"tonal",color:"secondary","prepend-icon":"tabler-screen-share",onClick:n},{default:s(()=>[k(" \u0E2A\u0E48\u0E07\u0E2D\u0E2D\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25 ")]),_:1}),t(K,{"prepend-icon":"tabler-plus",to:{name:"projects-sale-quotation-new"}},{default:s(()=>[k(" \u0E40\u0E1E\u0E34\u0E48\u0E21\u0E43\u0E1A\u0E40\u0E2A\u0E19\u0E2D\u0E23\u0E32\u0E04\u0E32 ")]),_:1})])]),_:1}),t(A),t(ue,{class:"text-no-wrap"},{default:s(()=>[Ke,l("tbody",null,[(F(!0),I(R,null,Z(o(D),e=>{var a,_,b;return F(),I("tr",{key:e.id,style:{height:"3.75rem"}},[l("td",null,[l("span",Oe,f(e.createdAt.split("T")[0]+" "+e.createdAt.split("T")[1].split(".")[0]),1)]),l("td",null,[l("span",Re,f(e.documentNumber),1)]),l("td",null,[l("span",qe,f((_=(a=e.customerInfo)==null?void 0:a.companyInfo)==null?void 0:_.companyName),1)]),l("td",null,[l("span",Ge,f((b=e.summary)==null?void 0:b.totalPrice),1)]),l("td",null,[l("span",Qe,[t(ae,{label:"",color:J(e.currentStatus),size:"small",class:"text-capitalize"},{default:s(()=>[k(f(e.currentStatus),1)]),_:2},1032,["color"])])]),l("td",null,[l("span",Xe,[t(ae,{label:"",color:q(e.quotationStatus),size:"small",class:"text-capitalize"},{default:s(()=>[k(f(e.quotationStatus),1)]),_:2},1032,["color"])])]),l("td",null,[t(K,{icon:"",size:"x-small",color:"default",variant:"text",to:{name:"projects-sale-quotation-preview",query:{_id:e._id}}},{default:s(()=>[t(P,{size:"22",icon:"tabler-eye"})]),_:2},1032,["to"]),t(K,{icon:"",size:"x-small",color:"default",variant:"text",to:{name:"projects-sale-quotation-new",query:{method:"clone",_id:e._id}},target:"_blank"},{default:s(()=>[t(P,{size:"22",icon:"tabler-copy"})]),_:2},1032,["to"]),t(be,{title:"\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E01\u0E32\u0E23\u0E25\u0E1A",data:{_id:`${e._id}`,name:`${e.documentNumber}`,body:`\u0E04\u0E38\u0E13\u0E15\u0E49\u0E2D\u0E07\u0E01\u0E32\u0E23\u0E25\u0E1A ${e.documentNumber} \u0E08\u0E23\u0E34\u0E07\u0E2B\u0E23\u0E37\u0E2D\u0E44\u0E21\u0E48?`},callBack:v},null,8,["data"])])])}),128))]),oe(l("tfoot",null,We,512),[[se,!o(D).length]])]),_:1}),t(A),t(j,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:s(()=>[l("span",Je,f(o(y)),1),t(ie,{modelValue:o(c),"onUpdate:modelValue":r[4]||(r[4]=e=>w(c)?c.value=e:null),size:"small","total-visible":5,length:o(m)},null,8,["modelValue","length"]),t(Q,{modelValue:o(h).visible,"onUpdate:modelValue":r[5]||(r[5]=e=>o(h).visible=e),location:"bottom end",variant:"flat",color:o(h).color},{default:s(()=>[t(P,{icon:o(h).icon},null,8,["icon"]),k(" "+f(o(h).message),1)]),_:1},8,["modelValue","color"])]),_:1})]),_:1})]),_:1}),t(Q,{modelValue:o(z).visible,"onUpdate:modelValue":r[6]||(r[6]=e=>o(z).visible=e),location:"bottom end"},{default:s(()=>[t(P,{icon:"tabler-circle-check",color:"success",size:"30"}),k(" \xA0 "+f(o(z).body),1)]),_:1},8,["modelValue"])],64))}},Ye={class:"me-3",style:{width:"80px"}},et=l("thead",null,[l("tr",null,[l("th",{scope:"col"},"MODEL CODE"),l("th",{scope:"col"},"MODEL NAME"),l("th",{scope:"col"},"BRAND"),l("th",{scope:"col"},"DEFALT PRICE"),l("th",{scope:"col"},"END USER"),l("th",{scope:"col"},"PROJECT"),l("th",{scope:"col"},"DEALER")])],-1),tt={class:"text-capitalize text-base"},lt={class:"text-capitalize text-base"},at={class:"text-capitalize text-base"},ot={class:"text-capitalize text-base"},st={style:{width:"5rem"}},nt={style:{width:"5rem"}},rt={style:{width:"5rem"}},ut=l("tr",null,[l("td",{colspan:"7",class:"text-center"},"No data available")],-1),it=[ut],dt={class:"text-sm text-disabled"},ct={__name:"index",setup(ee){const E=me,g=ye,d=u(),p=u(),c=u(),m=u(),U=u(10),S=u(1),D=u(1),M=u(),N=u(""),y=u(),h=u(""),z=u({visible:!1,icon:"tabler-xbox-x",color:"error",title:"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E43\u0E2B\u0E49\u0E04\u0E23\u0E1A\u0E15\u0E32\u0E21\u0E17\u0E35\u0E48\u0E23\u0E30\u0E1A\u0E1A\u0E01\u0E33\u0E2B\u0E19\u0E14"}),$=u({visible:!1,icon:"tabler-xbox-x",color:"error",title:"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E43\u0E2B\u0E49\u0E04\u0E23\u0E1A\u0E15\u0E32\u0E21\u0E17\u0E35\u0E48\u0E23\u0E30\u0E1A\u0E1A\u0E01\u0E33\u0E2B\u0E19\u0E14"}),V=_e({models:[],modelFilter:[]}),B=()=>{var r="?page="+S.value+"&limit="+U.value;m.value!=null&&(r+="&brand_id="+m.value),c.value!=null&&(r+="&category_id="+c.value),E.fetchData(r).then(e=>{const a=e.data;a.code==1&&(V.models=a.data.documents,D.value=a.data.totalPage,h.value=`\u0E41\u0E2A\u0E14\u0E07\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25 ${a.data.page*a.data.limit-(a.data.limit-1)} \u0E16\u0E36\u0E07 ${a.data.page*a.data.limit} \u0E08\u0E32\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14 ${a.data.totalCount} \u0E1A\u0E23\u0E23\u0E17\u0E31\u0E14`,g.fetchData().then(_=>{n(_.data.productBrands)}))})};(()=>{ge.fetchData().then(r=>{const e=r.data.productCategories;d.value=[],e.forEach(a=>{d.value[d.value.length]={title:a.name,value:a._id}})})})(),(()=>{g.fetchData().then(r=>{const e=r.data.productBrands;p.value=[],e.forEach(a=>{p.value[p.value.length]={title:a.name,value:a._id}})})})(),(()=>{we.fetchData().then(r=>{var e=r.data;e.code==1&&(M.value=e.data.documents)})})();const v=()=>{var r=E.filterData({q:N.value,status:y.value},V.models);V.modelFilter=r.items;for(var e=0;e<V.modelFilter.length;e++)if(typeof V.modelFilter[e].discountGroup<"u"){const _=V.modelFilter[e].discountGroup;V.modelFilter[e].priceList={end_user:V.modelFilter[e].price,project:V.modelFilter[e].price,dealer:V.modelFilter[e].price};for(var a=0;a<_.length;a++)V.modelFilter[e].priceList[_[a].level]=V.modelFilter[e].price-_[a].discount}};B(),W(v),W(()=>{S.value>D.value&&(S.value=D.value)}),L(S,()=>{B()}),L(U,()=>{B()}),L(m,()=>{B()}),L(c,()=>{B()});const n=r=>{let e=[];for(let a of r)e[a._id]=a.name;for(let a of V.modelFilter)a.brandName=e[a.brand_id]},i=(r,e,a,_)=>{var b={_id:r,discountGroup:[]},C=0;for(const G in a){var de=M.value.find(ce=>ce.level===G);de!=null&&(b.discountGroup[C++]={customerLevel_id:de._id,level:G,discount:parseFloat(_)-a[G]})}me.updateItemJson(b,"/updateDiscountGroup").then(G=>{G.data.code==1?$.value={visible:!0,icon:"tabler-circle-check",color:"success",title:'\u0E2D\u0E31\u0E1E\u0E40\u0E14\u0E17\u0E23\u0E32\u0E04\u0E32 "'+e+'" \u0E40\u0E23\u0E35\u0E22\u0E1A\u0E23\u0E49\u0E2D\u0E22\u0E41\u0E25\u0E49\u0E27'}:$.value={visible:!0,icon:"tabler-xbox-x",color:"error",title:G.message}})};return(r,e)=>(F(),I(R,null,[t(T,null,{default:s(()=>[t(ne,null,{default:s(()=>[t(j,null,{default:s(()=>[t(Y,null,{default:s(()=>[t(T,{cols:"12",sm:"4"},{default:s(()=>[t(O,{modelValue:o(c),"onUpdate:modelValue":e[0]||(e[0]=a=>w(c)?c.value=a:null),label:" -- \u0E40\u0E25\u0E37\u0E2D\u0E01 Categories -- ",items:o(d),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1}),t(T,{cols:"12",sm:"4"},{default:s(()=>[t(O,{modelValue:o(m),"onUpdate:modelValue":e[1]||(e[1]=a=>w(m)?m.value=a:null),label:" -- \u0E40\u0E25\u0E37\u0E2D\u0E01 Brand -- ",items:o(p),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),t(A),t(j,{class:"d-flex flex-wrap py-4 gap-4"},{default:s(()=>[l("div",Ye,[t(O,{modelValue:o(U),"onUpdate:modelValue":e[2]||(e[2]=a=>w(U)?U.value=a:null),density:"compact",variant:"outlined",items:[10]},null,8,["modelValue"])]),t(re)]),_:1}),t(A),t(ue,{class:"text-no-wrap"},{default:s(()=>[et,l("tbody",null,[(F(!0),I(R,null,Z(o(V).modelFilter,a=>(F(),I("tr",{key:a.id,style:{height:"3.75rem"}},[l("td",null,[l("span",tt,f(a.modelCode),1)]),l("td",null,[l("span",lt,f(a.name),1)]),l("td",null,[l("span",at,f(a.brandName),1)]),l("td",null,[l("span",ot,f(a.price),1)]),l("td",null,[l("div",st,[t(H,{modelValue:a.priceList.end_user,"onUpdate:modelValue":_=>a.priceList.end_user=_,placeholder:"\u0E23\u0E32\u0E04\u0E32",density:"compact",onKeyup:X(_=>i(a._id,a.name,a.priceList,a.price),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])])]),l("td",null,[l("div",nt,[t(H,{modelValue:a.priceList.project,"onUpdate:modelValue":_=>a.priceList.project=_,placeholder:"\u0E23\u0E32\u0E04\u0E32",density:"compact",onKeyup:X(_=>i(a._id,a.name,a.priceList,a.price),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])])]),l("td",null,[l("div",rt,[t(H,{modelValue:a.priceList.dealer,"onUpdate:modelValue":_=>a.priceList.dealer=_,placeholder:"\u0E23\u0E32\u0E04\u0E32",density:"compact",onKeyup:X(_=>i(a._id,a.name,a.priceList,a.price),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])])])]))),128))]),oe(l("tfoot",null,it,512),[[se,!o(V).modelFilter.length]])]),_:1}),t(A),t(j,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:s(()=>[l("span",dt,f(o(h)),1),t(ie,{modelValue:o(S),"onUpdate:modelValue":e[3]||(e[3]=a=>w(S)?S.value=a:null),size:"small","total-visible":5,length:o(D)},null,8,["modelValue","length"]),t(Q,{modelValue:o(z).visible,"onUpdate:modelValue":e[4]||(e[4]=a=>o(z).visible=a),location:"bottom end",variant:"flat",color:o(z).color},{default:s(()=>[t(P,{icon:o(z).icon},null,8,["icon"]),k(" "+f(o(z).message),1)]),_:1},8,["modelValue","color"])]),_:1})]),_:1})]),_:1}),t(Q,{modelValue:o($).visible,"onUpdate:modelValue":e[5]||(e[5]=a=>o($).visible=a),location:"bottom end"},{default:s(()=>[t(P,{icon:"tabler-circle-check",color:"success",size:"30"}),k(" \xA0 "+f(o($).title),1)]),_:1},8,["modelValue"])],64))}};const mt={__name:"[tab]",setup(ee){const E=[{title:"Lead",icon:"tabler-user",tab:"leads"},{title:"Price List",icon:"tabler-list",tab:"pricelist"},{title:"\u0E43\u0E1A\u0E40\u0E2A\u0E19\u0E2D\u0E23\u0E32\u0E04\u0E32",icon:"tabler-file-text",tab:"quotations"}],g=ve(),d=u(g.params.tab);return(p,c)=>(F(),I("section",null,[t(Y,null,{default:s(()=>[t(T,{cols:"12"},{default:s(()=>[t(De,{modelValue:o(d),"onUpdate:modelValue":c[0]||(c[0]=m=>w(d)?d.value=m:null),class:"v-tabs-pill"},{default:s(()=>[(F(),I(R,null,Z(E,m=>t($e,{key:m.icon,value:m.tab,to:{name:"projects-sale-tab",params:{tab:m.tab}}},{default:s(()=>[t(P,{size:"20",start:"",icon:m.icon},null,8,["icon"]),k(" "+f(m.title),1)]),_:2},1032,["value","to"])),64))]),_:1},8,["modelValue"])]),_:1}),t(T,{cols:"12"},{default:s(()=>[t(te,{modelValue:o(d),"onUpdate:modelValue":c[1]||(c[1]=m=>w(d)?d.value=m:null),class:"disable-tab-transition",touch:!1},{default:s(()=>[t(le,{value:"leads"},{default:s(()=>[t(Be)]),_:1})]),_:1},8,["modelValue"]),t(te,{modelValue:o(d),"onUpdate:modelValue":c[2]||(c[2]=m=>w(d)?d.value=m:null),class:"disable-tab-transition",touch:!1},{default:s(()=>[t(le,{value:"quotations"},{default:s(()=>[t(Ze)]),_:1})]),_:1},8,["modelValue"]),t(te,{modelValue:o(d),"onUpdate:modelValue":c[3]||(c[3]=m=>w(d)?d.value=m:null),class:"disable-tab-transition",touch:!1},{default:s(()=>[t(le,{value:"pricelist"},{default:s(()=>[t(ct)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]))}};typeof pe=="function"&&pe(mt);export{mt as default};
