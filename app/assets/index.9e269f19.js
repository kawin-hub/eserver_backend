import{_ as Ve}from"./AppDateTimePicker.f12e24e3.js";import{u as xe}from"./modelListStore.3cabc70f.js";import{V as T,a as p}from"./VRow.f9366793.js";import{V as ue}from"./VCombobox.bd903a82.js";import{V as J}from"./VTextarea.0a746d96.js";import{V as I}from"./VTextField.4609cb9e.js";import{V as q}from"./VBtn.3e0f2bdf.js";import{k as r,A as Ie,Z as A,o as P,b as W,w as l,m as o,p as a,q as d,D as U,x as V,C as H,P as Ne,E as B,j as he,c as z,v as De,F as we,a as ge}from"./index.35991f09.js";import{V as F,c as S}from"./VCard.bb37f72e.js";import{V as Se}from"./VSpacer.80b37d7c.js";import{V as me}from"./VForm.9ba2d763.js";import{V as re}from"./VAutocomplete.75de4477.js";import{V as Ue}from"./VNavigationDrawer.92fc0e14.js";import{u as Ae}from"./useSaleCustomerLevelsListStore.567ead43.js";import{u as Q}from"./useQuotationListStore.dc1b9404.js";import{u as Le}from"./useLeadListStore.a2ed0901.js";import{r as Y}from"./validators.9dda6c80.js";import{_ as Pe}from"./ConfirmationPopup.26c6d5ed.js";import{V as de}from"./VSelect.1bdb2ecc.js";import{V as G}from"./VDivider.0f44b1ce.js";import{V as qe}from"./VDialog.61de6f6e.js";import{V as ke}from"./position.15b8fc3a.js";import{V as Ce}from"./VSnackbar.34637b93.js";import{b as ne}from"./route-block.182765af.js";import"./VField.93eb26cb.js";import"./index.a8f66a9c.js";import"./VInput.6bf7b46e.js";import"./router.88351000.js";import"./form.e84299e4.js";import"./VImg.632117c3.js";import"./easing.36b781ab.js";import"./index.a44853ab.js";import"./filter.f86a5c3d.js";import"./VList.8e9051e1.js";import"./VAvatar.6ed53308.js";import"./forwardRefs.c003b6b8.js";import"./VMenu.768d7784.js";import"./scopeId.a8f1d836.js";import"./VOverlay.a330b104.js";import"./lazy.7e795ed8.js";import"./dialog-transition.13a8c048.js";import"./VCheckboxBtn.a302f7e6.js";import"./VSelectionControl.6ac8e090.js";import"./VChip.81c7dee3.js";/* empty css                   */import"./VCounter.cb1a1153.js";import"./ssrBoot.8b43ebe3.js";import"./index.0d4b9ec4.js";import"./DialogCloseBtn.9d70464b.js";const Oe={class:"pa-5 flex-grow-1"},$e={class:"text-body-2 text-no-wrap mt-4"},Be={class:"text-body-2 text-no-wrap mt-4"},Fe={class:"text-sm-center my-2"},Te=o("span",{class:"d-inline d-md-none"},"Price: ",-1),je={class:"text-body-1"},Me={class:"d-flex flex-column justify-space-between border-s pa-1"},Re={__name:"QuotationProductEdit",props:{id:{type:Number,required:!0},data:{type:Object,required:!0,default:()=>({title:"",price:0,quantity:0,name:""})},customerLevel:{type:String,default:null}},emits:["removeProduct","totalAmount"],setup(L,{emit:D}){const e=L,N=r([]),v=r([]),y=h=>{xe.fetchData().then(f=>{var m=f.data;if(m.code==1)for(var b=0;b<m.data.documents.length;b++){var k=m.data.documents[b].discountGroup.find(C=>C.customerLevel_id===h);v.value[b]={title:m.data.documents[b].modelCode+" : "+m.data.documents[b].name,_id:m.data.documents[b]._id,name:m.data.documents[b].description,price:m.data.documents[b].price,discount:k!=null?k.discount:0}}})};y(e.customerLevel);const _=h=>{try{var f=h._id,m=v.value.find(b=>b._id===f);console.log(typeof m),m&&(e.data.name=m.name,e.data.price=m.price,e.data.modelCode=m.title,e.data._id=m._id,e.data.discountBaht=m.discount)}catch{}},n=()=>{D("removeProduct",e.id)},u=Ie(()=>{const h=(Number(e.data.price)-e.data.discountBaht)*Number(e.data.quantity);return isNaN(h)?0:h});return A(u,()=>{D("totalAmount",u.value)},{immediate:!0}),A(()=>e.customerLevel,()=>{y(e.customerLevel)}),(h,f)=>(P(),W(F,{flat:"",border:"",class:"d-flex flex-row"},{default:l(()=>[o("div",Oe,[a(T,null,{default:l(()=>[a(p,{cols:"12",md:"6"},{default:l(()=>[a(ue,{modelValue:d(N),"onUpdate:modelValue":[f[0]||(f[0]=m=>U(N)?N.value=m:null),f[1]||(f[1]=m=>_(m))],chips:"",clearable:"",items:d(v),label:" -- \u0E40\u0E25\u0E37\u0E2D\u0E01\u0E23\u0E2B\u0E31\u0E2A\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32 -- ",class:"mb-3"},null,8,["modelValue","items"]),a(J,{modelValue:e.data.name,"onUpdate:modelValue":f[2]||(f[2]=m=>e.data.name=m),rows:"2",label:"\u0E0A\u0E37\u0E48\u0E2D\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32",placeholder:"Description"},null,8,["modelValue"])]),_:1}),a(p,{cols:"12",md:"2",sm:"4"},{default:l(()=>[a(I,{modelValue:e.data.price,"onUpdate:modelValue":f[3]||(f[3]=m=>e.data.price=m),type:"number",label:"\u0E23\u0E32\u0E04\u0E32"},null,8,["modelValue"]),o("div",$e,[a(I,{modelValue:e.data.discountPercent,"onUpdate:modelValue":f[4]||(f[4]=m=>e.data.discountPercent=m),type:"number",label:"\u0E2A\u0E48\u0E27\u0E19\u0E25\u0E14 %",readonly:""},null,8,["modelValue"])])]),_:1}),a(p,{cols:"12",md:"2",sm:"4"},{default:l(()=>[a(I,{modelValue:e.data.quantity,"onUpdate:modelValue":f[5]||(f[5]=m=>e.data.quantity=m),type:"number",label:"\u0E08\u0E33\u0E19\u0E27\u0E19"},null,8,["modelValue"]),o("div",Be,[a(I,{modelValue:e.data.discountBaht,"onUpdate:modelValue":f[6]||(f[6]=m=>e.data.discountBaht=m),type:"number",label:"\u0E2A\u0E48\u0E27\u0E19\u0E25\u0E14 \u0E1A\u0E32\u0E17"},null,8,["modelValue"])])]),_:1}),a(p,{cols:"12",md:"2",sm:"4"},{default:l(()=>[o("p",Fe,[Te,o("span",je,"\u0E3F"+V(d(u)),1)])]),_:1})]),_:1})]),o("div",Me,[a(q,{icon:"",size:"x-small",color:"default",variant:"text",onClick:n},{default:l(()=>[a(H,{size:"20",icon:"tabler-x"})]),_:1}),a(q,{icon:"",size:"x-small",color:"default",variant:"text"},{default:l(()=>[a(H,{size:"20",icon:"tabler-settings"})]),_:1})])]),_:1}))}},Ee={class:"d-flex align-center pa-6 pb-1"},Ye=o("h6",{class:"text-h6"},"\u0E41\u0E01\u0E49\u0E44\u0E02\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48",-1),He={__name:"QuotationEditAddress",props:{isDrawerOpen:{type:Boolean,required:!0},leads:{type:Object},data:{type:Object},allSubAddressSelected:{type:Object,required:!0}},emits:["update:isDrawerOpen","submit"],setup(L,{emit:D}){const e=L,N=r([]),v=r([]);A(()=>e.allSubAddressSelected,(_,n)=>{for(var u=0;u<_.length;u++)v.value[u]=_[u].companyName+" "+_[u].branch;N.value=v.value[0]}),A(N,_=>{const n=v.value.findIndex(u=>u===_);e.leads.companyInfo.companyName=e.allSubAddressSelected[n].companyName,e.leads.companyInfo.branch=e.allSubAddressSelected[n].branch,e.leads.companyInfo.taxId=e.allSubAddressSelected[n].taxId,e.leads.companyInfo.address=e.allSubAddressSelected[n].address,e.leads.companyInfo.firstname=e.allSubAddressSelected[n].firstname,e.leads.companyInfo.lastname=e.allSubAddressSelected[n].lastname,e.leads.companyInfo.contactNumber=e.allSubAddressSelected[n].contactNumber,e.data.companyInfo_id=e.allSubAddressSelected[n]._id});const y=_=>{D("update:isDrawerOpen",_)};return(_,n)=>(P(),W(Ue,{temporary:"",location:"end",width:400,"model-value":e.isDrawerOpen,class:"scrollable-content","onUpdate:modelValue":y},{default:l(()=>[o("div",Ee,[Ye,a(Se),a(q,{icon:"",size:"32",color:"default",variant:"tonal",class:"rounded",onClick:n[0]||(n[0]=u=>y(!1))},{default:l(()=>[a(H,{size:"18",icon:"tabler-x"})]),_:1})]),a(d(Ne),{options:{wheelPropagation:!1}},{default:l(()=>[a(F,{flat:""},{default:l(()=>[a(S,null,{default:l(()=>[a(me,null,{default:l(()=>[a(T,null,{default:l(()=>[a(p,null,{default:l(()=>[a(re,{modelValue:N.value,"onUpdate:modelValue":n[1]||(n[1]=u=>N.value=u),label:" -- \u0E40\u0E25\u0E37\u0E2D\u0E01 \u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48\u0E43\u0E2B\u0E21\u0E48 -- ",items:v.value,"menu-props":{maxHeight:200}},null,8,["modelValue","items"])]),_:1}),a(p,{cols:"12"},{default:l(()=>[a(I,{modelValue:e.leads.companyInfo.companyName,"onUpdate:modelValue":n[2]||(n[2]=u=>e.leads.companyInfo.companyName=u),label:"\u0E0A\u0E37\u0E48\u0E2D\u0E1A\u0E23\u0E34\u0E29\u0E31\u0E17"},null,8,["modelValue"])]),_:1}),a(p,{cols:"12"},{default:l(()=>[a(I,{modelValue:e.leads.companyInfo.branch,"onUpdate:modelValue":n[3]||(n[3]=u=>e.leads.companyInfo.branch=u),label:"\u0E2A\u0E32\u0E02\u0E32"},null,8,["modelValue"])]),_:1}),a(p,{cols:"12"},{default:l(()=>[a(I,{modelValue:e.leads.companyInfo.taxId,"onUpdate:modelValue":n[4]||(n[4]=u=>e.leads.companyInfo.taxId=u),label:"\u0E40\u0E25\u0E02\u0E1B\u0E23\u0E30\u0E08\u0E33\u0E15\u0E31\u0E27\u0E1C\u0E39\u0E49\u0E40\u0E2A\u0E35\u0E22\u0E20\u0E32\u0E29\u0E35"},null,8,["modelValue"])]),_:1}),a(p,{cols:"12"},{default:l(()=>[a(J,{modelValue:e.leads.companyInfo.address,"onUpdate:modelValue":n[5]||(n[5]=u=>e.leads.companyInfo.address=u),label:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48"},null,8,["modelValue"])]),_:1}),a(p,{cols:"12"},{default:l(()=>[a(I,{modelValue:e.leads.companyInfo.firstname,"onUpdate:modelValue":n[6]||(n[6]=u=>e.leads.companyInfo.firstname=u),label:"\u0E0A\u0E37\u0E48\u0E2D\u0E1C\u0E39\u0E49\u0E15\u0E34\u0E14\u0E15\u0E48\u0E2D"},null,8,["modelValue"])]),_:1}),a(p,{cols:"12"},{default:l(()=>[a(I,{modelValue:e.leads.companyInfo.lastname,"onUpdate:modelValue":n[7]||(n[7]=u=>e.leads.companyInfo.lastname=u),label:"\u0E19\u0E32\u0E21\u0E2A\u0E01\u0E38\u0E25\u0E1C\u0E39\u0E49\u0E15\u0E34\u0E14\u0E15\u0E48\u0E2D"},null,8,["modelValue"])]),_:1}),a(p,{cols:"12"},{default:l(()=>[a(I,{modelValue:e.leads.companyInfo.contactNumber,"onUpdate:modelValue":n[8]||(n[8]=u=>e.leads.companyInfo.contactNumber=u),label:"\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23\u0E28\u0E31\u0E1E\u0E17\u0E4C\u0E1C\u0E39\u0E49\u0E15\u0E34\u0E14\u0E15\u0E48\u0E2D"},null,8,["modelValue"])]),_:1}),a(p,{cols:"12"},{default:l(()=>[a(q,{color:"secondary",variant:"tonal",onClick:n[9]||(n[9]=u=>_.$emit("update:isDrawerOpen",!1))},{default:l(()=>[B(" \u0E1B\u0E34\u0E14 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}};const ze={class:"ma-sm-4"},Qe={class:"d-flex align-center mb-6"},Ge={class:"font-weight-bold text-xl"},Je={class:"mt-4 ma-sm-4"},We={class:"d-flex align-center font-weight-medium justify-sm-end text-xl mb-3"},Ke=o("span",{class:"me-3"},"\u0E43\u0E1A\u0E40\u0E2A\u0E19\u0E2D\u0E23\u0E32\u0E04\u0E32",-1),Ze={class:"d-flex align-center justify-sm-end mb-3"},Xe=o("span",{class:"me-3"},"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E2D\u0E2D\u0E01\u0E43\u0E1A\u0E40\u0E2A\u0E19\u0E2D\u0E23\u0E32\u0E04\u0E32",-1),ea={class:"d-flex align-center justify-sm-end mb-0"},aa=o("span",{class:"me-3"},"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E04\u0E23\u0E1A\u0E01\u0E33\u0E2B\u0E19\u0E14",-1),ta=o("div",{class:"ma-sm-4"},[o("h6",{class:"text-sm font-weight-medium mb-3"},"\u0E08\u0E32\u0E01:"),o("table",null,[o("tbody",null,[o("p",{class:"mb-0"}," \u0E1A\u0E23\u0E34\u0E29\u0E31\u0E17 \u0E2D\u0E34\u0E19\u0E40\u0E2E\u0E49\u0E32\u0E2A\u0E4C \u0E40\u0E17\u0E04\u0E42\u0E19\u0E42\u0E25\u0E22\u0E35 \u0E08\u0E33\u0E01\u0E31\u0E14 (\u0E2A\u0E33\u0E19\u0E31\u0E01\u0E07\u0E32\u0E19\u0E43\u0E2B\u0E0D\u0E48) "),o("p",{class:"mb-0"},"\u0E40\u0E25\u0E02\u0E17\u0E35\u0E48 77/577 \u0E0B\u0E2D\u0E22\u0E08\u0E15\u0E38\u0E42\u0E0A\u0E15\u0E34 19"),o("p",{class:"mb-0"},"\u0E41\u0E02\u0E27\u0E07\u0E2D\u0E2D\u0E40\u0E07\u0E34\u0E19 \u0E40\u0E02\u0E15\u0E2A\u0E32\u0E22\u0E44\u0E2B\u0E21 \u0E01\u0E23\u0E38\u0E07\u0E40\u0E17\u0E1E\u0E21\u0E2B\u0E32\u0E19\u0E04\u0E23 10220"),o("p",{class:"mb-0"},"\u0E40\u0E25\u0E02\u0E1B\u0E23\u0E30\u0E08\u0E33\u0E15\u0E31\u0E27\u0E1C\u0E39\u0E49\u0E40\u0E2A\u0E35\u0E22\u0E20\u0E32\u0E29\u0E35 0745565007058")])])],-1),oa={class:"ma-sm-4",style:{width:"20.5rem"}},la=o("h6",{class:"text-sm font-weight-medium mb-3"},"\u0E16\u0E36\u0E07:",-1),sa={class:"mb-0"},da={class:"mb-0"},na={class:"mb-0"},ua={class:"mb-0"},ma={class:"mb-0"},ra={class:"add-products-header mb-2 d-none d-md-flex"},ia=o("span",{class:"text-sm"}," \u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32 ",-1),ca=o("span",{class:"text-sm"}," \u0E23\u0E32\u0E04\u0E32 ",-1),pa=o("span",{class:"text-sm"}," \u0E08\u0E33\u0E19\u0E27\u0E19 ",-1),fa=o("span",{class:"text-sm"}," \u0E23\u0E32\u0E04\u0E32\u0E23\u0E27\u0E21 ",-1),ba={class:"mt-4 ma-sm-4"},va={class:"mx-sm-4 my-2"},_a={class:"d-flex align-center mb-4"},ya=o("h6",{class:"text-sm font-weight-semibold me-2"},"\u0E1E\u0E19\u0E31\u0E01\u0E07\u0E32\u0E19\u0E02\u0E32\u0E22:",-1),Va={class:"my-2 mx-sm-4"},xa=o("td",{class:"text-end"},[o("div",{class:"me-5"},[o("p",{class:"mb-2"},"\u0E2A\u0E48\u0E27\u0E19\u0E25\u0E14\u0E1E\u0E34\u0E40\u0E28\u0E29:"),o("p",{class:"mb-2"},"\u0E23\u0E27\u0E21\u0E08\u0E33\u0E19\u0E27\u0E19\u0E40\u0E07\u0E34\u0E19:"),o("p",{class:"mb-2"},"\u0E2A\u0E48\u0E27\u0E19\u0E25\u0E14:"),o("p",{class:"mb-2"},"\u0E20\u0E32\u0E29\u0E35\u0E21\u0E39\u0E25\u0E04\u0E48\u0E32\u0E40\u0E1E\u0E34\u0E48\u0E21 7%:"),o("p",{class:"mb-2"},"\u0E22\u0E2D\u0E14\u0E40\u0E07\u0E34\u0E19\u0E2A\u0E38\u0E17\u0E18\u0E34:")])],-1),Ia={class:"font-weight-semibold"},Na={class:"mb-2"},ha={class:"mb-2"},Da={class:"mb-2"},wa={class:"mb-2"},ga={class:"mb-2"},Sa=o("p",{class:"font-weight-semibold mb-2"},"\u0E2B\u0E21\u0E32\u0E22\u0E40\u0E2B\u0E15\u0E38:",-1),Ua=o("p",{class:"font-weight-semibold mb-2"},"\u0E0A\u0E37\u0E48\u0E2D\u0E19\u0E33\u0E2B\u0E19\u0E49\u0E32\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23:",-1),Aa={__name:"QuotationEditable",props:{data:{type:Object,required:!0},refForm:{type:Object}},emits:["updateSelectedLead"],setup(L,{emit:D}){const e=L,N=he(),v=r(0),y=r(0),_=r(0),n=r(0),u=r(0),h=r(0);var f=!1;const m=r(null),b=r(),k=r(),C=r([]),O=r([]),j=r([]),x=r([]),K=localStorage.getItem("userData")!=null?JSON.parse(localStorage.getItem("userData")):null,Z=r(!1),$=r(!1),M=r(!1),g=r({visible:!1,icon:"tabler-xbox-x",color:"error",title:"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E43\u0E2B\u0E49\u0E04\u0E23\u0E1A\u0E15\u0E32\u0E21\u0E17\u0E35\u0E48\u0E23\u0E30\u0E1A\u0E1A\u0E01\u0E33\u0E2B\u0E19\u0E14"}),ie=r(["ULTRA PREMIUM 93%","ULTRA 89%","PRO 92%","STARTER 83%","MILKY WHITE INSULATION","HIGH INSULATION","InDoor Grey","InDoor Black"]),R=r(!1),ce=[{title:"Warm",value:"warm"},{title:"Hot",value:"hot"},{title:"Cold",value:"cold"}];(()=>{if(!e.data.issuedDate){const i=new Date(Date.now()+252e5).toISOString().slice(0,10);e.data.issuedDate=i}if(!e.data.dueDate){const i=new Date;i.setDate(i.getDate()+30);const t=i.toISOString().slice(0,10);e.data.dueDate=t}})();const pe=()=>{Le.fetchData().then(i=>{var c,s,w,E,ae,te,oe,le,se;if(i.data.code==1){x.value=i.data.data.documents;for(var t=0;t<x.value.length;t++)C.value[t]={lead_id:x.value[t]._id,title:(c=x.value[t].companyInfo[0])==null?void 0:c.companyName,value:(s=x.value[t].companyInfo[0])==null?void 0:s._id,address:(w=x.value[t].companyInfo[0])==null?void 0:w.address,companyName:(E=x.value[t].companyInfo[0])==null?void 0:E.companyName,firstname:(ae=x.value[t].companyInfo[0])==null?void 0:ae.firstname,lastname:(te=x.value[t].companyInfo[0])==null?void 0:te.lastname,contactNumber:(oe=x.value[t].companyInfo[0])==null?void 0:oe.contactNumber,branch:(le=x.value[t].companyInfo[0])==null?void 0:le.branch,taxId:(se=x.value[t].companyInfo[0])==null?void 0:se.taxId,allSubAddresses:x.value[t].companyInfo}}}),e.data.salesperson=K.firstname+" "+K.lastname},fe=()=>{Q.fetchData("/newQuatationId").then(i=>{var t=i.data.data.documentNumber;e.data.documentNumber=t})},be=()=>{Ae.fetchData().then(i=>{const t=i.data;t.code==1&&(k.value=t.data.documents.map(c=>({value:c._id,title:c.level})))})};pe(),fe(),be();const ve=()=>{e.data.products.push({modelCode:"",name:"",_id:"",quantity:1,price:0,discountBaht:0,discountPercent:0})},_e=i=>{e.data.products.splice(i,1)},X=()=>{var i;(i=e.refForm)==null||i.validate().then(async({valid:t})=>{if(t){$.value=!0,Z.value=!0;let c=new FormData;for(const s in e.data)c.append(s,e.data[s]);typeof e.data.documentName=="object"&&(e.data.documentName=e.data.documentName[0]),Q.insertItemJson(e.data).then(s=>{console.log(s.data),s.data.code==1?N.push({name:"projects-sale-tab",params:{tab:"quotations"},query:{action:"addSuccess",companyName:e.data.documentNumber}}):s.data.code==6?Q.fetchData("/newQuatationId").then(w=>{m.value=w.data.data.documentNumber,typeof w.data.data.documentNumber<"u"&&(M.value=!0)}):s.data.code==5?g.value={visible:!0,icon:"tabler-xbox-x",color:"error",title:"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E40\u0E25\u0E37\u0E2D\u0E01 \u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E19\u0E49\u0E2D\u0E22 1\u0E0A\u0E34\u0E49\u0E19"}:g.value={visible:!0,icon:"tabler-xbox-x",color:"error",title:"\u0E40\u0E01\u0E34\u0E14\u0E02\u0E49\u0E2D\u0E1C\u0E34\u0E14\u0E1E\u0E25\u0E32\u0E14\u0E23\u0E30\u0E2B\u0E27\u0E48\u0E32\u0E07\u0E01\u0E32\u0E23\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25 \u0E01\u0E23\u0E38\u0E13\u0E32\u0E41\u0E08\u0E49\u0E07\u0E40\u0E08\u0E49\u0E32\u0E2B\u0E19\u0E49\u0E32\u0E17\u0E35\u0E48\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E17\u0E33\u0E01\u0E32\u0E23\u0E41\u0E01\u0E49\u0E44\u0E02"}}).catch(s=>{console.log(s)}).finally(()=>{$.value=!1,Z.value=!1})}else g.value={visible:!0,icon:"tabler-xbox-x",color:"error",title:"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E43\u0E2B\u0E49\u0E04\u0E23\u0E1A\u0E15\u0E32\u0E21\u0E17\u0E35\u0E48\u0E23\u0E30\u0E1A\u0E1A\u0E01\u0E33\u0E2B\u0E19\u0E14"}})},ye=()=>{e.data.documentNumber=m.value,f?g.value={visible:!0,icon:"tabler-xbox-x",color:"error",title:"\u0E21\u0E35\u0E1A\u0E32\u0E07\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E1C\u0E34\u0E14\u0E1E\u0E25\u0E32\u0E14\u0E40\u0E01\u0E35\u0E48\u0E22\u0E27\u0E01\u0E31\u0E1A\u0E40\u0E25\u0E02\u0E17\u0E35\u0E48\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23 \u0E01\u0E23\u0E38\u0E13\u0E32\u0E15\u0E34\u0E14\u0E15\u0E48\u0E2D Admin"}:(X(),f=!0)};A(O,i=>{var t=C.value.find(c=>c.value===i);e.data.customerInfo.companyInfo.address=t.address,e.data.customerInfo.companyInfo.firstname=t.firstname,e.data.customerInfo.companyInfo.lastname=t.lastname,e.data.customerInfo.companyInfo.contactNumber=t.contactNumber,e.data.customerInfo.companyInfo.companyName=t.companyName,e.data.customerInfo.companyInfo.branch=t.branch,e.data.customerInfo.companyInfo.taxId=t.taxId,e.data.lead_id=t.lead_id,e.data.companyInfo_id=t.value,j.value=t.allSubAddresses});const ee=()=>{for(var i=0,t=0,c=0;c<e.data.products.length;c++){var s=e.data.products[c].price<=0?0:parseFloat(e.data.products[c].price),w=isNaN(e.data.products[c].quantity)?0:parseFloat(e.data.products[c].quantity),E=e.data.products[c].discountBaht<=0?0:parseFloat(e.data.products[c].discountBaht);e.data.products[c].discountPercent=(e.data.products[c].discountBaht/e.data.products[c].price*100).toFixed(2),t+=s*w,i+=E*w,v.value=t}_.value=isNaN(y.value)?i:i+parseFloat(y.value),h.value=v.value-_.value,u.value=h.value*7/100,n.value=h.value+u.value};return A(e.data.products,()=>{ee()}),A(y,i=>{y.value=i<=0?0:i,e.data.extraDiscount=i,ee()}),(i,t)=>{const c=Ve;return P(),z("section",null,[a(T,null,{default:l(()=>[a(p,{cols:"12",md:"9"},{default:l(()=>[a(F,null,{default:l(()=>[a(S,{class:"d-flex flex-wrap justify-space-between flex-column flex-sm-row"},{default:l(()=>[a(p,{cols:"12"},{default:l(()=>[a(de,{modelValue:d(b),"onUpdate:modelValue":t[0]||(t[0]=s=>U(b)?b.value=s:null),label:" -- \u0E40\u0E25\u0E37\u0E2D\u0E01\u0E01\u0E25\u0E38\u0E48\u0E21\u0E23\u0E32\u0E04\u0E32 -- ",items:d(k),"menu-props":{maxHeight:200}},null,8,["modelValue","items"])]),_:1}),o("div",ze,[o("div",Qe,[o("h6",Ge,V(d(De).app.title)+" ",1)])]),o("div",Je,[o("h6",We,[Ke,o("span",null,[a(I,{modelValue:e.data.documentNumber,"onUpdate:modelValue":t[1]||(t[1]=s=>e.data.documentNumber=s),prefix:"#",density:"compact",style:{width:"8.9rem"}},null,8,["modelValue"])])]),o("p",Ze,[Xe,o("span",null,[a(c,{modelValue:e.data.issuedDate,"onUpdate:modelValue":t[2]||(t[2]=s=>e.data.issuedDate=s),density:"compact",placeholder:"YYYY-MM-DD",style:{width:"8.9rem"},config:{position:"auto right"},rules:[d(Y)(e.data.issuedDate,"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E2D\u0E2D\u0E01\u0E43\u0E1A\u0E40\u0E2A\u0E19\u0E2D\u0E23\u0E32\u0E04\u0E32")]},null,8,["modelValue","rules"])])]),o("p",ea,[aa,o("span",null,[a(c,{modelValue:e.data.dueDate,"onUpdate:modelValue":t[3]||(t[3]=s=>e.data.dueDate=s),density:"compact",placeholder:"YYYY-MM-DD",style:{width:"8.9rem"},config:{position:"auto right"},rules:[d(Y)(e.data.dueDate,"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E04\u0E23\u0E1A\u0E01\u0E33\u0E2B\u0E19\u0E14\u0E0A\u0E33\u0E23\u0E30")]},null,8,["modelValue","rules"])])])])]),_:1}),a(S,{class:"d-flex flex-wrap justify-space-between flex-column flex-sm-row gap-4"},{default:l(()=>[ta,o("div",oa,[la,a(re,{modelValue:d(O),"onUpdate:modelValue":t[4]||(t[4]=s=>U(O)?O.value=s:null),label:" -- \u0E40\u0E25\u0E37\u0E2D\u0E01 Lead -- ",items:d(C),"item-title":"title","item-value":"value","menu-props":{maxHeight:200},placeholder:"Select State",requiredValidator:"",rules:[d(Y)(d(O),"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E40\u0E25\u0E37\u0E2D\u0E01 Lead")]},null,8,["modelValue","items","rules"]),o("div",{class:"cursorPointer",onClick:t[5]||(t[5]=s=>R.value=!0)},[o("p",sa,V(e.data.customerInfo.companyInfo.firstname)+" "+V(e.data.customerInfo.companyInfo.lastname),1),o("p",da," \u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23\u0E28\u0E31\u0E1E\u0E17\u0E4C "+V(e.data.customerInfo.companyInfo.contactNumber),1),o("p",na,V(e.data.customerInfo.companyInfo.companyName)+" "+V(e.data.customerInfo.companyInfo.branch),1),o("p",ua," \u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 "+V(e.data.customerInfo.companyInfo.address),1),o("p",ma," \u0E40\u0E25\u0E02\u0E1B\u0E23\u0E30\u0E08\u0E33\u0E15\u0E31\u0E27\u0E1C\u0E39\u0E49\u0E40\u0E2A\u0E35\u0E22\u0E20\u0E32\u0E29\u0E35 "+V(e.data.customerInfo.companyInfo.taxId),1)])])]),_:1}),a(G),a(S,{class:"add-products-form"},{default:l(()=>[o("div",ra,[a(T,{class:"font-weight-medium px-4"},{default:l(()=>[a(p,{cols:"12",md:"6"},{default:l(()=>[ia]),_:1}),a(p,{cols:"12",md:"2"},{default:l(()=>[ca]),_:1}),a(p,{cols:"12",md:"2"},{default:l(()=>[pa]),_:1}),a(p,{cols:"12",md:"2"},{default:l(()=>[fa]),_:1})]),_:1})]),(P(!0),z(we,null,ge(e.data.products,(s,w)=>(P(),z("div",{key:s.title,class:"ma-sm-4"},[a(Re,{id:w,data:s,customerLevel:d(b),onRemoveProduct:_e},null,8,["id","data","customerLevel"])]))),128)),o("div",ba,[a(q,{onClick:ve},{default:l(()=>[B(" \u0E40\u0E1E\u0E34\u0E48\u0E21\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23 ")]),_:1})])]),_:1}),a(G),a(S,{class:"d-flex justify-space-between flex-wrap flex-column flex-sm-row"},{default:l(()=>[o("div",va,[o("div",_a,[ya,a(I,{modelValue:e.data.salesperson,"onUpdate:modelValue":t[6]||(t[6]=s=>e.data.salesperson=s),style:{width:"12rem"},onkeydown:"return false"},null,8,["modelValue"])])]),o("div",Va,[o("table",null,[o("tr",null,[xa,o("td",Ia,[o("p",Na,[a(I,{modelValue:d(y),"onUpdate:modelValue":t[7]||(t[7]=s=>U(y)?y.value=s:null),label:"\u0E2A\u0E48\u0E27\u0E19\u0E25\u0E14 \u0E1A\u0E32\u0E17",type:"number"},null,8,["modelValue"])]),o("p",ha,"\u0E3F"+V(isNaN(d(v))?0:d(v)),1),o("p",Da," \u0E3F"+V(isNaN(d(_))?0:d(_)),1),o("p",wa,"\u0E3F"+V(isNaN(d(u))?0:d(u)),1),o("p",ga," \u0E3F"+V(isNaN(d(n))?0:d(n)),1)])])])])]),_:1}),a(G),a(S,{class:"mx-sm-4"},{default:l(()=>[Sa,a(J,{modelValue:e.data.note,"onUpdate:modelValue":t[8]||(t[8]=s=>e.data.note=s),rows:2,"auto-grow":""},null,8,["modelValue"])]),_:1}),a(S,{class:"mx-sm-4"},{default:l(()=>[Ua,a(ue,{modelValue:e.data.documentName,"onUpdate:modelValue":t[9]||(t[9]=s=>e.data.documentName=s),chips:"",clearable:"",items:d(ie),label:"\u0E0A\u0E37\u0E48\u0E2D\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23\u0E42\u0E0A\u0E27\u0E4C\u0E25\u0E39\u0E01\u0E04\u0E49\u0E32",rules:[d(Y)(e.data.documentName,"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E0A\u0E37\u0E48\u0E2D\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23\u0E42\u0E0A\u0E27\u0E4C\u0E25\u0E39\u0E01\u0E04\u0E49\u0E32")]},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1}),a(p,{cols:"12",md:"3"},{default:l(()=>[a(F,{class:"mb-8"},{default:l(()=>[a(S,null,{default:l(()=>[a(p,{cols:"12",md:"12"},{default:l(()=>[a(de,{modelValue:e.data.quotationStatus,"onUpdate:modelValue":t[10]||(t[10]=s=>e.data.quotationStatus=s),label:" -- \u0E40\u0E25\u0E37\u0E2D\u0E01\u0E2A\u0E16\u0E32\u0E19\u0E30\u0E43\u0E1A\u0E40\u0E2A\u0E19\u0E2D\u0E23\u0E32\u0E04\u0E32 -- ",items:ce,"menu-props":{maxHeight:200}},null,8,["modelValue"])]),_:1}),a(q,{block:"",onClick:X},{default:l(()=>[B(" \u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25 ")]),_:1})]),_:1}),a(qe,{modelValue:d($),"onUpdate:modelValue":t[11]||(t[11]=s=>U($)?$.value=s:null),persistent:"",width:"300"},{default:l(()=>[a(F,{color:"primary",width:"300"},{default:l(()=>[a(S,{class:"pt-3"},{default:l(()=>[B(" \u0E01\u0E33\u0E25\u0E31\u0E07\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25 \u0E01\u0E23\u0E38\u0E13\u0E32\u0E23\u0E2D\u0E0B\u0E31\u0E01\u0E04\u0E23\u0E39\u0E48 "),a(ke,{indeterminate:"",color:"white",class:"mb-0"})]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(Ce,{modelValue:d(g).visible,"onUpdate:modelValue":t[12]||(t[12]=s=>d(g).visible=s),location:"bottom end"},{default:l(()=>[a(H,{icon:d(g).icon,color:d(g).color,size:"30"},null,8,["icon","color"]),B(" \xA0 "+V(d(g).title),1)]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(Pe,{title:"\u0E40\u0E25\u0E02\u0E17\u0E35\u0E48\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23\u0E0B\u0E49\u0E33",label:`\u0E40\u0E1B\u0E25\u0E35\u0E48\u0E22\u0E19\u0E40\u0E25\u0E02\u0E17\u0E35\u0E48\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23\u0E08\u0E32\u0E01 "${e.data.documentNumber}" \u0E40\u0E1B\u0E47\u0E19 "${d(m)}" \u0E2B\u0E23\u0E37\u0E2D\u0E44\u0E21\u0E48`,"is-dialog-visible":d(M),"onUpdate:is-dialog-visible":t[13]||(t[13]=s=>U(M)?M.value=s:null),"call-back":ye,"button-label":{cancel:"\u0E22\u0E01\u0E40\u0E25\u0E34\u0E01",submit:"\u0E15\u0E01\u0E25\u0E07"}},null,8,["label","is-dialog-visible"]),a(He,{isDrawerOpen:d(R),"onUpdate:isDrawerOpen":t[14]||(t[14]=s=>U(R)?R.value=s:null),leads:e.data.customerInfo,"onUpdate:leads":t[15]||(t[15]=s=>e.data.customerInfo=s),data:e.data,"onUpdate:data":t[16]||(t[16]=s=>e.data=s),allSubAddressSelected:d(j),"onUpdate:allSubAddressSelected":t[17]||(t[17]=s=>U(j)?j.value=s:null)},null,8,["isDrawerOpen","leads","data","allSubAddressSelected"])]),_:1})])}}},La="/assets/logoInhouse.c7bf7a00.png",Pa={__name:"index",setup(L){const D=r(),e=r({logo:La,documentNumber:"",issuedDate:null,dueDate:null,lead_id:null,companyInfo_id:null,customerInfo:{companyInfo:{firstname:"",lastname:"",contactNumber:"",companyName:"",taxId:"",branch:"",address:""}},products:[{_id:"",modelCode:"",name:"",quantity:1,discountBaht:0,discountPercent:0,price:0}],salesperson:"",extraDiscount:0,paymentMethod:`\u0E27\u0E34\u0E18\u0E35\u0E01\u0E32\u0E23\u0E0A\u0E33\u0E23\u0E30\u0E40\u0E07\u0E34\u0E19:
\u0E0A\u0E37\u0E48\u0E2D\u0E1A\u0E31\u0E0D\u0E0A\u0E35: \u0E1A\u0E08\u0E01. \u0E2D\u0E34\u0E19\u0E40\u0E2E\u0E49\u0E32\u0E2A\u0E4C \u0E40\u0E17\u0E04\u0E42\u0E19\u0E42\u0E25\u0E22\u0E35
\u0E40\u0E25\u0E02\u0E17\u0E35\u0E48\u0E1A\u0E31\u0E0D\u0E0A\u0E35: 171-430192-2
\u0E18\u0E19\u0E32\u0E04\u0E32\u0E23: \u0E44\u0E17\u0E22\u0E1E\u0E32\u0E13\u0E34\u0E0A\u0E22\u0E4C`,note:`\u2022 50% pre-production payment required for the smart film.
\u2022 Remaining 50% due prior to installation.
\u2022 Production and shipping timeframe: 30-45 days.
\u2022 Three-years warranty included.`,quotationStatus:"warm",documentName:""});return r(!1),r(!0),r(!1),r(!1),r("Bank Account"),(N,v)=>(P(),W(T,null,{default:l(()=>[a(p,{cols:"12",md:"12"},{default:l(()=>[a(me,{ref_key:"refForm",ref:D,class:"mt-6"},{default:l(()=>[a(Aa,{data:d(e),refForm:d(D),"onUpdate:refForm":v[0]||(v[0]=y=>U(D)?D.value=y:null)},null,8,["data","refForm"])]),_:1},512)]),_:1})]),_:1}))}};typeof ne=="function"&&ne(Pa);export{Pa as default};
