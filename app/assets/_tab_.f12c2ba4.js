import{k as c,$ as O,o as y,c as A,p as e,w as a,m as o,x as D,C as G,q as t,P as Y,D as S,be as Z,E as C,F as I,ay as M,A as ee,a as X,b as te,bn as ae,H as le,I as oe,bd as se}from"./index.35991f09.js";import{u as j}from"./locationListStore.054c9403.js";import{a as ie}from"./formatters.1ccc6423.js";import re from"./DeleteButtonInList.e4081504.js";import{a as B}from"./validators.9dda6c80.js";import{_ as ne}from"./LoadingDialog.9b7a5d10.js";import{V as H}from"./VSpacer.80b37d7c.js";import{V as k}from"./VBtn.3e0f2bdf.js";import{V as J,c as z}from"./VCard.bb37f72e.js";import{V as ue}from"./VForm.9ba2d763.js";import{V as W,a as U}from"./VRow.f9366793.js";import{V as K}from"./VTextField.4609cb9e.js";import{V as de}from"./VTextarea.0a746d96.js";import{V as R}from"./VSelect.1bdb2ecc.js";import{V as ce}from"./VSnackbar.34637b93.js";import{V as pe}from"./VNavigationDrawer.92fc0e14.js";import{x as me}from"./xlsx.full.min.97d888ff.js";import{V as q}from"./VDivider.0f44b1ce.js";import{V as fe}from"./VTable.0fe7de7a.js";import{V as ve}from"./VAvatar.6ed53308.js";import{V as Ve}from"./VImg.632117c3.js";import{V as _e}from"./VChip.81c7dee3.js";import{V as be}from"./VPagination.1d990c54.js";import{V as xe,a as he}from"./VTabs.6d0b43a6.js";import{V as we,a as De}from"./VWindowItem.f35c6905.js";import"./index.a44853ab.js";import"./index.0d4b9ec4.js";import"./DialogCloseBtn.9d70464b.js";import"./VDialog.61de6f6e.js";import"./scopeId.a8f1d836.js";import"./forwardRefs.c003b6b8.js";import"./VOverlay.a330b104.js";import"./router.88351000.js";import"./lazy.7e795ed8.js";import"./easing.36b781ab.js";import"./dialog-transition.13a8c048.js";import"./position.15b8fc3a.js";import"./form.e84299e4.js";/* empty css                   */import"./VField.93eb26cb.js";import"./index.a8f66a9c.js";import"./VInput.6bf7b46e.js";import"./VCounter.cb1a1153.js";import"./VList.8e9051e1.js";import"./VMenu.768d7784.js";import"./VCheckboxBtn.a302f7e6.js";import"./VSelectionControl.6ac8e090.js";import"./ssrBoot.8b43ebe3.js";import"./VSlideGroup.6d88d719.js";const ge={class:"d-flex align-center pa-6 pb-1"},ye={class:"text-h6 text-capitalize"},Se={__name:"AddNewLocationDrawer",props:{isDrawerOpen:{type:Boolean,required:!0},fetchData:{type:Function},drawerType:{type:String},editData:{type:Object},isAddNewDrawerVisible:{type:Boolean}},emits:["update:isDrawerOpen"],setup(L,{emit:h}){const n=L,p=c(!1),f=c(),v=c(!1),s=c({name:"",description:"",status:"",avatarFile:""}),r=c({text:"",color:"",visible:!1}),g=c("Creating new category..."),_=()=>{var b,m;(b=f.value)==null||b.reset(),(m=f.value)==null||m.resetValidation(),s.value.avatarFile=null},T=j,F=()=>{h("update:isDrawerOpen",!1),M(()=>{_()})};O(()=>{n.drawerType!==void 0&&n.drawerType=="edit"&&(s.value.name=n.editData.name,s.value.description=n.editData.description,s.value.status=n.editData.status,g.value="Updating category...")});const N=async()=>{var b;(b=f.value)==null||b.validate().then(async({valid:m})=>{if(m){v.value=!0;let i=new FormData;i.append("name",s.value.name),i.append("description",s.value.description),i.append("status",s.value.status),n.drawerType=="add"?T.insertItem(i).then(x=>{n.fetchData(),r.value.text=x.data.message,r.value.color="success",r.value.visible=!0,M(()=>{h("update:isDrawerOpen",!1),_()})}).catch(x=>{console.log(x.response.data),r.value.text=x.response.data.message,r.value.color="error",r.value.visible=!0}).finally(()=>{v.value=!1}):n.drawerType=="edit"&&(i.append("_id",n.editData._id),T.updateItem(i).then(x=>{n.fetchData(),r.value.text=x.data.message,r.value.color="success",r.value.visible=!0,M(()=>{h("update:isDrawerOpen",!1),_()})}).catch(x=>{console.log(x.response.data)}).finally(()=>{v.value=!1}))}else r.value.text="Please fill up all the require field.",r.value.color="error",r.value.visible=!0})},P=b=>{h("update:isDrawerOpen",b)};return(b,m)=>(y(),A(I,null,[e(pe,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":n.isDrawerOpen,"onUpdate:modelValue":P},{default:a(()=>[o("div",ge,[o("h6",ye,D(n.drawerType)+" Location",1),e(H),e(k,{variant:"tonal",color:"default",icon:"",size:"32",class:"rounded",onClick:F},{default:a(()=>[e(G,{size:"18",icon:"tabler-x"})]),_:1})]),e(t(Y),{options:{wheelPropagation:!1}},{default:a(()=>[e(J,{flat:""},{default:a(()=>[e(z,null,{default:a(()=>[e(ue,{ref_key:"refForm",ref:f,modelValue:t(p),"onUpdate:modelValue":m[4]||(m[4]=i=>S(p)?p.value=i:null),onSubmit:Z(N,["prevent"])},{default:a(()=>[e(W,null,{default:a(()=>[e(U,{cols:"12"},{default:a(()=>[e(K,{modelValue:t(s).name,"onUpdate:modelValue":m[0]||(m[0]=i=>t(s).name=i),rules:[t(B)],label:"name"},null,8,["modelValue","rules"])]),_:1}),e(U,{cols:"12"},{default:a(()=>[e(de,{modelValue:t(s).description,"onUpdate:modelValue":m[1]||(m[1]=i=>t(s).description=i),rules:[t(B)],label:"Description"},null,8,["modelValue","rules"])]),_:1}),e(U,{cols:"12"},{default:a(()=>[e(R,{modelValue:t(s).status,"onUpdate:modelValue":m[2]||(m[2]=i=>t(s).status=i),label:"Select Status",rules:[t(B)],items:[{title:"Active",value:"active"},{title:"Inactive",value:"inactive"}]},null,8,["modelValue","rules"])]),_:1}),e(U,{cols:"12"},{default:a(()=>[e(k,{type:"submit",class:"me-3"},{default:a(()=>[C(" Submit ")]),_:1}),e(k,{type:"reset",variant:"tonal",color:"secondary",onClick:F},{default:a(()=>[C(" Cancel ")]),_:1})]),_:1}),e(ce,{modelValue:t(r).visible,"onUpdate:modelValue":m[3]||(m[3]=i=>t(r).visible=i),location:"bottom end",variant:"flat",color:t(r).color},{default:a(()=>[C(D(t(r).text),1)]),_:1},8,["modelValue","color"])]),_:1})]),_:1},8,["modelValue","onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]),e(ne,{isDialogVisible:t(v),txtDisplay:t(g)},null,8,["isDialogVisible","txtDisplay"])],64))}},Te={class:"me-3",style:{width:"80px"}},Ae={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},ke={style:{width:"10rem"}},Ue=o("thead",null,[o("tr",null,[o("th",{scope:"col"},"NAME"),o("th",{scope:"col"},"UPDATED AT"),o("th",{scope:"col"},"CRATED AT"),o("th",{scope:"col"},"STATUS"),o("th",{scope:"col"},"ACTION")])],-1),Ce={class:"d-flex align-center"},Fe={key:1},Ne={class:"d-flex flex-column"},Oe={class:"text-capitalize text-base"},ze={class:"text-capitalize text-base font-weight-semibold"},Ie={class:"text-base"},Le={class:"text-center",style:{width:"5rem"}},Pe=o("tr",null,[o("td",{colspan:"7",class:"text-center"},"No data available")],-1),$e=[Pe],Ee={class:"text-sm text-disabled"},Me={__name:"index",props:{dataSummary:{type:Object}},setup(L){const h=j,n=c(),p=c(10),f=c(1),v=c(1),s=c(0),r=c("add"),g=c([]),_=c([]),T=c(""),F=c(),N=()=>{h.fetchData().then(u=>{g.value=u.data.inventoryLocations;let d=0;g.value.forEach(l=>{l.status=="active"&&d++}),g.value.length-d})},P=()=>{if(g.value===void 0)return 0;var u=h.filterData({q:T.value,status:n.value,perPage:p.value,currentPage:f.value},g.value);_.value=u.items,v.value=u.totalPage,s.value=u.totalItems};O(N),O(P),O(()=>{f.value>v.value&&(f.value=v.value)});const b=[{title:"Active",value:"active"},{title:"Inactive",value:"inactive"}],m=u=>u==="pending"?"warning":u==="active"?"success":u==="inactive"?"secondary":"primary",i=c(!1);O(()=>{f.value>v.value&&(f.value=v.value)});const x=ee(()=>{const u=_.value.length?(f.value-1)*p.value+1:0,d=_.value.length+(f.value-1)*p.value;return`Showing ${u} to ${d} of ${s.value} entries`}),Q=()=>{let u=_.value.map(V=>({name:V.name,description:V.description,status:V.status,createdAt:V.createdAt,updatedAt:V.updatedAt}));const d=new Date().toISOString().slice(0,10),l=me,$=l.utils.book_new(),E=l.utils.json_to_sheet(u);l.utils.sheet_add_aoa(E,[["Name","Description","Status","Created at","Updated at"]],{origin:"A1"}),E["!cols"]=[{wch:u.reduce((V,w)=>Math.max(V,w.name.length),10)},{wch:u.reduce((V,w)=>Math.max(V,w.description.length),10)},{wch:u.reduce((V,w)=>Math.max(V,w.status.length),10)},{wch:u.reduce((V,w)=>Math.max(V,w.createdAt.length),10)},{wch:u.reduce((V,w)=>Math.max(V,w.updatedAt.length),10)}],l.utils.book_append_sheet($,E),l.writeFile($,"categories-("+d+").xlsx")};return(u,d)=>(y(),A(I,null,[e(J,{title:"Search Filter"},{default:a(()=>[e(z,null,{default:a(()=>[e(W,null,{default:a(()=>[e(U,{cols:"12",sm:"4"},{default:a(()=>[e(R,{modelValue:t(n),"onUpdate:modelValue":d[0]||(d[0]=l=>S(n)?n.value=l:null),label:"Select Status",items:b,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(q),e(z,{class:"d-flex flex-wrap py-4 gap-4"},{default:a(()=>[o("div",Te,[e(R,{modelValue:t(p),"onUpdate:modelValue":d[1]||(d[1]=l=>S(p)?p.value=l:null),density:"compact",variant:"outlined",items:[10,20,30,50]},null,8,["modelValue"])]),e(H),o("div",Ae,[o("div",ke,[e(K,{modelValue:t(T),"onUpdate:modelValue":d[2]||(d[2]=l=>S(T)?T.value=l:null),placeholder:"Search",density:"compact"},null,8,["modelValue"])]),e(k,{variant:"tonal",color:"secondary","prepend-icon":"tabler-screen-share",onClick:Q},{default:a(()=>[C(" Export ")]),_:1}),e(k,{"prepend-icon":"tabler-plus",onClick:d[3]||(d[3]=l=>{i.value=!0,r.value="add"})},{default:a(()=>[C(" Add Location ")]),_:1})])]),_:1}),e(q),e(fe,{class:"text-no-wrap"},{default:a(()=>[Ue,o("tbody",null,[(y(!0),A(I,null,X(t(_),l=>(y(),A("tr",{key:l._id,style:{height:"3.75rem"}},[o("td",null,[o("div",Ce,[e(ve,{variant:"tonal",color:"primary",class:"me-3",size:"38"},{default:a(()=>[l.avatar?(y(),te(Ve,{key:0,src:t(ae).api.url+l.avatar},null,8,["src"])):(y(),A("span",Fe,D(t(ie)(l.name)),1))]),_:2},1024),o("div",Ne,[o("h6",Oe,D(l.name),1)])])]),o("td",null,[o("span",ze,D(new Date(l.updatedAt).toString().split("GMT")[0]),1)]),o("td",null,[o("span",Ie,D(new Date(l.createdAt).toString().split("GMT")[0]),1)]),o("td",null,[e(_e,{label:"",color:m(l.status),size:"small",class:"text-capitalize"},{default:a(()=>[C(D(l.status),1)]),_:2},1032,["color"])]),o("td",Le,[e(k,{icon:"",size:"x-small",color:"default",variant:"text"},{default:a(()=>[e(G,{size:"22",icon:"tabler-edit",onClick:$=>{i.value=!0,r.value="edit",F.value=l}},null,8,["onClick"])]),_:2},1024),e(k,{icon:"",size:"x-small",color:"default",variant:"text"},{default:a(()=>[e(re,{title:"Delete inventory location",data:l,"fetch-data":N,"use-list-store":t(j)},null,8,["data","use-list-store"])]),_:2},1024)])]))),128))]),le(o("tfoot",null,$e,512),[[oe,!t(_).length]])]),_:1}),e(q),e(z,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3 px-5"},{default:a(()=>[o("span",Ee,D(t(x)),1),e(be,{modelValue:t(f),"onUpdate:modelValue":d[4]||(d[4]=l=>S(f)?f.value=l:null),size:"small","total-visible":5,length:t(v)},null,8,["modelValue","length"])]),_:1})]),_:1}),e(Se,{isDrawerOpen:t(i),"onUpdate:isDrawerOpen":d[5]||(d[5]=l=>S(i)?i.value=l:null),fetchData:N,drawerType:t(r),editData:t(F),isAddNewDrawerVisible:t(i)},null,8,["isDrawerOpen","drawerType","editData","isAddNewDrawerVisible"])],64))}};const Lt={__name:"[tab]",setup(L){const h=[{title:"Location",icon:"tabler-category",tab:"location"}],n=se(),p=c(n.params.tab);return(f,v)=>(y(),A("section",null,[e(W,null,{default:a(()=>[e(U,{cols:"12"},{default:a(()=>[e(xe,{modelValue:t(p),"onUpdate:modelValue":v[0]||(v[0]=s=>S(p)?p.value=s:null),class:"v-tabs-pill"},{default:a(()=>[(y(),A(I,null,X(h,s=>e(he,{key:s.icon,value:s.tab,to:{name:"system-setting-inventory-tab",params:{tab:s.tab}}},{default:a(()=>[e(G,{size:"20",start:"",icon:s.icon},null,8,["icon"]),C(" "+D(s.title),1)]),_:2},1032,["value","to"])),64))]),_:1},8,["modelValue"])]),_:1}),e(U,{cols:"12"},{default:a(()=>[e(we,{modelValue:t(p),"onUpdate:modelValue":v[1]||(v[1]=s=>S(p)?p.value=s:null),class:"disable-tab-transition",touch:!1},{default:a(()=>[e(De,{value:"location"},{default:a(()=>[e(Me)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]))}};export{Lt as default};
