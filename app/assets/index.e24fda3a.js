import{j as B,k as m,$ as L,o as j,c as N,p as t,w as a,q as r,E as y,be as H,D as S,C as $,x as z,al as G,bd as J}from"./index.35991f09.js";import{u as E}from"./useExpenseListStore.9e602fbc.js";import{r as V}from"./validators.9dda6c80.js";import{_ as K}from"./AppDateTimePicker.f12e24e3.js";import{M as P}from"./FileInputSelectionSlot.ae91cc9f.js";import{a as d,V as T}from"./VRow.f9366793.js";import{V as D,c as u}from"./VCard.bb37f72e.js";import{V as _}from"./VTextField.4609cb9e.js";import{V as I}from"./VSelect.1bdb2ecc.js";import{V as Q}from"./VCombobox.bd903a82.js";import{V as W}from"./VTextarea.0a746d96.js";import{V as O}from"./VBtn.3e0f2bdf.js";import{V as X}from"./VDialog.61de6f6e.js";import{V as Y}from"./position.15b8fc3a.js";import{V as Z}from"./VSnackbar.34637b93.js";import{b as C}from"./route-block.182765af.js";import{V as h}from"./VForm.9ba2d763.js";import"./index.a44853ab.js";import"./index.0d4b9ec4.js";import"./VField.93eb26cb.js";import"./index.a8f66a9c.js";import"./VInput.6bf7b46e.js";import"./router.88351000.js";import"./form.e84299e4.js";import"./VImg.632117c3.js";import"./easing.36b781ab.js";import"./no-image.bc16c952.js";import"./ConfirmationPopup.26c6d5ed.js";import"./DialogCloseBtn.9d70464b.js";/* empty css                                                                               */import"./VFileInput.c9eefa19.js";import"./forwardRefs.c003b6b8.js";import"./VChip.81c7dee3.js";import"./VAvatar.6ed53308.js";import"./VCounter.cb1a1153.js";import"./VMenu.768d7784.js";import"./scopeId.a8f1d836.js";import"./VOverlay.a330b104.js";import"./lazy.7e795ed8.js";import"./dialog-transition.13a8c048.js";import"./VList.8e9051e1.js";import"./VDivider.0f44b1ce.js";import"./VTable.0fe7de7a.js";/* empty css                   */import"./VCheckboxBtn.a302f7e6.js";import"./VSelectionControl.6ac8e090.js";import"./filter.f86a5c3d.js";const ee={__name:"basicInformationMain",props:{expenseFormData:{type:Object},expenseFormDataOriginal:{type:Object},refForm:{type:Object},expenseImageFiles:{type:Object,default:[]},expensePDFFiles:{type:Object,default:[]},alreadyUploaded:{type:Object,default:[]},expenseImageFilesAlreadyUploaded:{type:Object,default:[]},expensePDFFilesAlreadyUploaded:{type:Object,default:[]},deletedFile:{type:Object},deletedPDFFile:{type:Object}},emits:["update:expenseFormData"],setup(k,{emit:g}){const l=k,v=B(),c=m(!1),p=m(!1);m([]),m([]);const i=m({visible:!1,icon:"tabler-xbox-x",color:"error",title:"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E43\u0E2B\u0E49\u0E04\u0E23\u0E1A\u0E15\u0E32\u0E21\u0E17\u0E35\u0E48\u0E23\u0E30\u0E1A\u0E1A\u0E01\u0E33\u0E2B\u0E19\u0E14"});m();const U=[{title:"Stock",value:"stock"},{title:"Non Stock",value:"nonstock"}],s=[{title:"Smart Film",value:"smart film"},{title:"Smart Home",value:"smart home"},{title:"Smart Mirror",value:"smart mirror"},{title:"\u0E2D\u0E37\u0E48\u0E19 \u0E46",value:"\u0E2D\u0E37\u0E48\u0E19 \u0E46"},{title:"Marketing",value:"marketing"},{title:"Plateform, license, Cloud",value:"plateform, license, cloud"},{title:"Test Product",value:"test product"},{title:"\u0E04\u0E48\u0E32\u0E19\u0E49\u0E33\u0E21\u0E31\u0E19",value:"gasoline"},{title:"\u0E04\u0E48\u0E32\u0E2D\u0E32\u0E2B\u0E32\u0E23",value:"food"},{title:"\u0E40\u0E1A\u0E47\u0E14\u0E40\u0E15\u0E25\u0E47\u0E14",value:"miscellaneous"}];m([]);const F=m(["#Test01","#Test02","#Test03","#Test04","#Test05"]),w=()=>{g("update:expenseFormData",{...l.expenseFormDataOriginal})};L(()=>{});const x=()=>{var n;(n=l.refForm)==null||n.validate().then(async({valid:e})=>{if(e){p.value=!0,c.value=!0;let f=new FormData;for(var o of l.expenseImageFiles)f.append("images",o);for(var M of l.expensePDFFiles)f.append("documents",M);for(var A of l.deletedFile.image)f.append("imagesRemove",A);console.log(A);for(var R of l.deletedFile.pdf)f.append("documentsRemove",R);Object.entries(l.expenseFormData).forEach(([b,q])=>{b=="documentNumber",f.append(b,q)}),E.updateItem(f).then(b=>{b.data.code==1?v.push({name:"projects-account-tab",params:{tab:"expenses"},query:{action:"addSuccess",topic:l.expenseFormData.documentNumber}}):i.value={visible:!0,icon:"tabler-xbox-x",color:"error",title:"\u0E40\u0E01\u0E34\u0E14\u0E02\u0E49\u0E2D\u0E1C\u0E34\u0E14\u0E1E\u0E25\u0E32\u0E14\u0E23\u0E30\u0E2B\u0E27\u0E48\u0E32\u0E07\u0E01\u0E32\u0E23\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25 \u0E01\u0E23\u0E38\u0E13\u0E32\u0E41\u0E08\u0E49\u0E07\u0E40\u0E08\u0E49\u0E32\u0E2B\u0E19\u0E49\u0E32\u0E17\u0E35\u0E48\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E17\u0E33\u0E01\u0E32\u0E23\u0E41\u0E01\u0E49\u0E44\u0E02"}}).catch().finally(()=>{p.value=!1,c.value=!1})}else i.value={visible:!0,icon:"tabler-xbox-x",color:"error",title:"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E43\u0E2B\u0E49\u0E04\u0E23\u0E1A\u0E15\u0E32\u0E21\u0E17\u0E35\u0E48\u0E23\u0E30\u0E1A\u0E1A\u0E01\u0E33\u0E2B\u0E19\u0E14"}})};return(n,e)=>(j(),N("section",null,[t(T,null,{default:a(()=>[t(d,{cols:"12"},{default:a(()=>[t(D,{title:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E04\u0E48\u0E32\u0E43\u0E0A\u0E49\u0E08\u0E48\u0E32\u0E22"},{default:a(()=>[t(u,{class:"d-flex"},{default:a(()=>[t(d,{cols:"12"},{default:a(()=>[t(D,null,{default:a(()=>[t(u,{class:"pt-2"},{default:a(()=>[t(u,{class:"d-flex"},{default:a(()=>[t(T,null,{default:a(()=>[t(d,{cols:"12",md:"6"},{default:a(()=>[t(_,{modelValue:l.expenseFormData.documentNumber,"onUpdate:modelValue":e[0]||(e[0]=o=>l.expenseFormData.documentNumber=o),label:"\u0E40\u0E25\u0E02\u0E17\u0E35\u0E48\u0E04\u0E48\u0E32\u0E43\u0E0A\u0E49\u0E08\u0E48\u0E32\u0E22"},null,8,["modelValue"])]),_:1}),t(d,{cols:"12",md:"6"},{default:a(()=>[t(K,{modelValue:l.expenseFormData.expenseDate,"onUpdate:modelValue":e[1]||(e[1]=o=>l.expenseFormData.expenseDate=o),label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E01\u0E34\u0E14\u0E04\u0E48\u0E32\u0E43\u0E0A\u0E49\u0E08\u0E48\u0E32\u0E22"},null,8,["modelValue"])]),_:1}),t(d,{cols:"12",md:"6"},{default:a(()=>[t(I,{modelValue:l.expenseFormData.category,"onUpdate:modelValue":e[2]||(e[2]=o=>l.expenseFormData.category=o),label:" -- \u0E40\u0E25\u0E37\u0E2D\u0E01\u0E2B\u0E21\u0E27\u0E14\u0E2B\u0E21\u0E39\u0E48\u0E04\u0E48\u0E32\u0E43\u0E0A\u0E49\u0E08\u0E48\u0E32\u0E22 -- ",items:U,"menu-props":{maxHeight:200},rules:[r(V)(l.expenseFormData.category,"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E2B\u0E21\u0E27\u0E14\u0E2B\u0E21\u0E39\u0E48\u0E04\u0E48\u0E32\u0E43\u0E0A\u0E49\u0E08\u0E48\u0E32\u0E22")]},null,8,["modelValue","rules"])]),_:1}),t(d,{cols:"12",md:"6"},{default:a(()=>[t(I,{modelValue:l.expenseFormData.type,"onUpdate:modelValue":e[3]||(e[3]=o=>l.expenseFormData.type=o),label:" -- \u0E40\u0E25\u0E37\u0E2D\u0E01\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17\u0E04\u0E48\u0E32\u0E43\u0E0A\u0E49\u0E08\u0E48\u0E32\u0E22 -- ",items:s,"menu-props":{maxHeight:200},rules:[r(V)(l.expenseFormData.type,"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17\u0E04\u0E48\u0E32\u0E43\u0E0A\u0E49\u0E08\u0E48\u0E32\u0E22")]},null,8,["modelValue","rules"])]),_:1}),t(d,{cols:"12",md:"12"},{default:a(()=>[t(_,{modelValue:l.expenseFormData.amount,"onUpdate:modelValue":e[4]||(e[4]=o=>l.expenseFormData.amount=o),label:"\u0E22\u0E2D\u0E14\u0E23\u0E27\u0E21\u0E04\u0E48\u0E32\u0E43\u0E02\u0E49\u0E08\u0E48\u0E32\u0E22",prefix:"\u0E3F",type:"number",rules:[r(V)(l.expenseFormData.amount,"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E22\u0E2D\u0E14\u0E23\u0E27\u0E21\u0E04\u0E48\u0E32\u0E43\u0E0A\u0E49\u0E08\u0E48\u0E32\u0E22")]},null,8,["modelValue","rules"])]),_:1}),t(d,{cols:"12",md:"6"},{default:a(()=>[t(_,{modelValue:l.expenseFormData.whom,"onUpdate:modelValue":e[5]||(e[5]=o=>l.expenseFormData.whom=o),label:"\u0E0A\u0E37\u0E48\u0E2D\u0E1C\u0E39\u0E49\u0E0B\u0E37\u0E49\u0E2D",rules:[r(V)(l.expenseFormData.whom,"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E0A\u0E37\u0E48\u0E2D\u0E1C\u0E39\u0E49\u0E0B\u0E37\u0E49\u0E2D")]},null,8,["modelValue","rules"])]),_:1}),t(d,{cols:"12",md:"6"},{default:a(()=>[t(Q,{modelValue:l.expenseFormData.tag,"onUpdate:modelValue":e[6]||(e[6]=o=>l.expenseFormData.tag=o),chips:"",clearable:"",multiple:"","closable-chips":"","clear-icon":"tabler-circle-x",items:r(F),label:"Tag"},null,8,["modelValue","items"])]),_:1}),t(d,{cols:"12",md:"12"},{default:a(()=>[t(W,{modelValue:l.expenseFormData.remark,"onUpdate:modelValue":e[7]||(e[7]=o=>l.expenseFormData.remark=o),label:"\u0E2B\u0E21\u0E32\u0E22\u0E40\u0E2B\u0E15\u0E38"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(u,{class:"d-flex"},{default:a(()=>[t(d,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:a(()=>[t(O,{onClick:x,disabled:r(c)},{default:a(()=>[y(" \u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25")]),_:1},8,["disabled"]),t(O,{color:"secondary",variant:"tonal",type:"reset",onClick:H(w,["prevent"])},{default:a(()=>[y(" \u0E25\u0E49\u0E32\u0E07\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25 ")]),_:1},8,["onClick"])]),_:1})]),_:1}),t(X,{modelValue:r(p),"onUpdate:modelValue":e[8]||(e[8]=o=>S(p)?p.value=o:null),persistent:"",width:"300"},{default:a(()=>[t(D,{color:"primary",width:"300"},{default:a(()=>[t(u,{class:"pt-3"},{default:a(()=>[y(" \u0E01\u0E33\u0E25\u0E31\u0E07\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25 \u0E01\u0E23\u0E38\u0E13\u0E32\u0E23\u0E2D\u0E0B\u0E31\u0E01\u0E04\u0E23\u0E39\u0E48 "),t(Y,{indeterminate:"",color:"white",class:"mb-0"})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(Z,{modelValue:r(i).visible,"onUpdate:modelValue":e[9]||(e[9]=o=>r(i).visible=o),location:"bottom end"},{default:a(()=>[t($,{icon:r(i).icon,color:r(i).color,size:"30"},null,8,["icon","color"]),y(" \xA0 "+z(r(i).title),1)]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(d,{cols:"12"},{default:a(()=>[t(D,{title:"\u0E41\u0E19\u0E1A\u0E23\u0E39\u0E1B\u0E17\u0E35\u0E48\u0E40\u0E01\u0E35\u0E48\u0E22\u0E27\u0E02\u0E49\u0E2D\u0E07"},{default:a(()=>[t(u,null,{default:a(()=>[t(P,{acceptType:"image/*",label:"\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E23\u0E39\u0E1B",prependIcon:"tabler-camera",files:l.expenseImageFiles,filesAlreadyUploaded:l.expenseFormData.images,"onUpdate:filesAlreadyUploaded":e[10]||(e[10]=o=>l.expenseFormData.images=o),popUpTitle:"Delete related image.",popUpLabel:"Are you sure you want to delete",deletedFile:l.deletedFile.image,"onUpdate:deletedFile":e[11]||(e[11]=o=>l.deletedFile.image=o)},null,8,["files","filesAlreadyUploaded","deletedFile"])]),_:1})]),_:1})]),_:1}),t(d,{cols:"12"},{default:a(()=>[t(D,{title:"\u0E41\u0E19\u0E1A\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23\u0E17\u0E35\u0E48\u0E40\u0E01\u0E35\u0E48\u0E22\u0E27\u0E02\u0E49\u0E2D\u0E07 (PDF)"},{default:a(()=>[t(u,null,{default:a(()=>[t(P,{acceptType:"application/pdf",label:"\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23 PDF",files:l.expensePDFFiles,filesAlreadyUploaded:l.expenseFormData.documents,"onUpdate:filesAlreadyUploaded":e[12]||(e[12]=o=>l.expenseFormData.documents=o),popUpTitle:"Delete related PDF.",popUpLabel:"Are you sure you want to delete",deletedFile:l.deletedFile.pdf,"onUpdate:deletedFile":e[13]||(e[13]=o=>l.deletedFile.pdf=o)},null,8,["files","filesAlreadyUploaded","deletedFile"])]),_:1})]),_:1})]),_:1})]),_:1})]))}},te={__name:"index",setup(k){const g=J(),l=m(),v=m([]),c=m([]),p=m([]),i=m([]),U=G({image:[],pdf:[]}),s={_id:null,documentNumber:"",expenseDate:"",category:"",type:"",amount:0,whom:"",tag:"",remark:"",documents:[],images:[]},F=m(structuredClone(s));return(()=>{const x=g.query._id;typeof x==null||E.fetchData("?_id="+x).then(n=>{if(n.data.code==1){const e=n.data.data;console.log(e),s._id=e._id,s.documentNumber=e.documentNumber,s.expenseDate=e.expenseDate,s.category=e.category,s.type=e.type,s.amount=e.amount,s.whom=e.whom,s.tag=e.tag,s.remark=e.remark,s.images=e.images,s.documents=e.documents,F.value=structuredClone(s),console.log(F.value)}})})(),(x,n)=>(j(),N("section",null,[t(h,{ref_key:"refForm",ref:l,class:"mt-6"},{default:a(()=>[t(ee,{expenseFormData:r(F),expenseFormDataOriginal:s,refForm:r(l),"onUpdate:refForm":n[0]||(n[0]=e=>S(l)?l.value=e:null),expenseImageFiles:r(v),expenseImageFilesAlreadyUploaded:r(c),expensePDFFiles:r(p),expensePDFFilesAlreadyUploaded:r(i),deletedFile:r(U)},null,8,["expenseFormData","refForm","expenseImageFiles","expenseImageFilesAlreadyUploaded","expensePDFFiles","expensePDFFilesAlreadyUploaded","deletedFile"])]),_:1},512)]))}};typeof C=="function"&&C(te);export{te as default};
