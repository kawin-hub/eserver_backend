import{j as Z,k as f,Z as K,o as g,c as h,p as e,w as a,q as d,D as L,O as B,F as Q,a as W,b as X,E as F,x as M,be as $,C as Y,$ as I}from"./index.35991f09.js";import{u as ee}from"./useLeadListStore.a2ed0901.js";import{u as le}from"./useSaleCustomerLevelsListStore.567ead43.js";import{_ as ae}from"./confirm-dialog.bbba6032.js";import{r as x,i as w,e as te}from"./validators.9dda6c80.js";import{u as oe}from"./useLineListStore.1d732fcb.js";import{a as m,V as k}from"./VRow.f9366793.js";import{V as U,c as b,b as re}from"./VCard.bb37f72e.js";import{V as j}from"./VCombobox.bd903a82.js";import{V as de}from"./VChip.81c7dee3.js";import{a as me}from"./VList.8e9051e1.js";import{V as n}from"./VTextField.4609cb9e.js";import{V as T}from"./VSelect.1bdb2ecc.js";import{V as N}from"./VBtn.3e0f2bdf.js";import{V as ue}from"./VDialog.61de6f6e.js";import{V as se}from"./position.15b8fc3a.js";import{V as ie}from"./VSnackbar.34637b93.js";import{b as A}from"./route-block.182765af.js";import{V as ne}from"./VForm.9ba2d763.js";import"./index.a44853ab.js";import"./DialogCloseBtn.9d70464b.js";import"./index.0d4b9ec4.js";import"./VAvatar.6ed53308.js";import"./router.88351000.js";import"./VImg.632117c3.js";import"./filter.f86a5c3d.js";import"./forwardRefs.c003b6b8.js";import"./VMenu.768d7784.js";import"./scopeId.a8f1d836.js";import"./VOverlay.a330b104.js";import"./lazy.7e795ed8.js";import"./easing.36b781ab.js";import"./dialog-transition.13a8c048.js";import"./VCheckboxBtn.a302f7e6.js";import"./VSelectionControl.6ac8e090.js";import"./VInput.6bf7b46e.js";import"./form.e84299e4.js";import"./index.a8f66a9c.js";import"./VDivider.0f44b1ce.js";/* empty css                   */import"./VField.93eb26cb.js";import"./VCounter.cb1a1153.js";const pe={__name:"basicInformationMain",props:{leadFormData:{type:Object},leadFormDataOriginal:{type:Object},refForm:{type:Object}},emits:["update:leadFormData"],setup(y,{emit:v}){const t=y,D=Z(),C=f([]),p=f(!1),i=f(!1),O=f([]),_=f(null),V=f({visible:!1,icon:"tabler-xbox-x",color:"error",title:"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E43\u0E2B\u0E49\u0E04\u0E23\u0E1A\u0E15\u0E32\u0E21\u0E17\u0E35\u0E48\u0E23\u0E30\u0E1A\u0E1A\u0E01\u0E33\u0E2B\u0E19\u0E14"}),P=()=>{var s,o;t.leadFormData.companyInfo[(o=(s=t.leadFormData)==null?void 0:s.companyInfo)==null?void 0:o.length]={companyName:"",taxId:"",branch:"",address:"",googleMap:"",companyEmail:"",companyContactNumber:"",firstname:"",lastname:"",contactNumber:""}},q=()=>{le.fetchData().then(s=>{if(s.data.code==1)for(var o=s.data.data.documents,c=0;c<o.length;c++)C.value[c]={title:o[c].level,value:o[c]._id}})};(async()=>{await oe.fetchData("/users").then(s=>{if(s.data.code==1){var o=s.data.data;O.value=o}})})(),q(),f();const H=[{title:"Low prudential",value:"low prudential"},{title:"Middle prudential",value:"middle prudential"},{title:"High prudential",value:"high prudential"}],R=f([]),z=()=>{v("update:leadFormData",{...t.leadFormDataOriginal})},G=s=>{var o;(o=t.leadFormData)==null||o.companyInfo.splice(s,1)},J=()=>{var s;console.log(t.leadFormData),t.leadFormData.companyInfo.length>0?(s=t.refForm)==null||s.validate().then(async({valid:o})=>{if(o){i.value=!0,p.value=!0;let c=new FormData;for(const l in t.leadFormData)c.append(l,t.leadFormData[l]);ee.insertItemJson(t.leadFormData).then(l=>{console.log(l),l.data.code==1?D.push({name:"projects-sale-tab",params:{tab:"leads"},query:{action:"addSuccess",topic:t.leadFormData.topic}}):l.data.code==5?V.value={visible:!0,icon:"tabler-xbox-x",color:"error",title:"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E23\u0E30\u0E14\u0E31\u0E1A Lead"}:V.value={visible:!0,icon:"tabler-xbox-x",color:"error",title:"\u0E40\u0E01\u0E34\u0E14\u0E02\u0E49\u0E2D\u0E1C\u0E34\u0E14\u0E1E\u0E25\u0E32\u0E14\u0E23\u0E30\u0E2B\u0E27\u0E48\u0E32\u0E07\u0E01\u0E32\u0E23\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25 \u0E01\u0E23\u0E38\u0E13\u0E32\u0E41\u0E08\u0E49\u0E07\u0E40\u0E08\u0E49\u0E32\u0E2B\u0E19\u0E49\u0E32\u0E17\u0E35\u0E48\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E17\u0E33\u0E01\u0E32\u0E23\u0E41\u0E01\u0E49\u0E44\u0E02"}}).catch().finally(()=>{i.value=!1,p.value=!1})}else V.value={visible:!0,icon:"tabler-xbox-x",color:"error",title:"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E43\u0E2B\u0E49\u0E04\u0E23\u0E1A\u0E15\u0E32\u0E21\u0E17\u0E35\u0E48\u0E23\u0E30\u0E1A\u0E1A\u0E01\u0E33\u0E2B\u0E19\u0E14"}}):V.value={visible:!0,icon:"tabler-xbox-x",color:"error",title:"\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E0A\u0E37\u0E48\u0E2D\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E19\u0E49\u0E2D\u0E22 1 \u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48"}};return K(_,()=>{_.value!==null?t.leadFormData.lineId=_.value.lineId:t.leadFormData.lineId=""}),(s,o)=>(g(),h("section",null,[e(k,null,{default:a(()=>[e(m,{cols:"12"},{default:a(()=>[e(U,{title:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25 Lead"},{default:a(()=>{var c;return[e(b,{class:"d-flex"},{default:a(()=>[e(m,{cols:"12"},{default:a(()=>[e(U,{title:"\u0E04\u0E48\u0E32\u0E40\u0E23\u0E34\u0E48\u0E21\u0E15\u0E49\u0E19"},{default:a(()=>[e(b,{class:"pt-2"},{default:a(()=>[e(b,{class:"d-flex"},{default:a(()=>[e(k,null,{default:a(()=>[e(m,{cols:"12",md:"6"},{default:a(()=>[e(j,{modelValue:d(_),"onUpdate:modelValue":o[0]||(o[0]=l=>L(_)?_.value=l:null),items:d(O),"item-title":"name","item-value":"lineId",placeholder:"Line User",label:"\u0E40\u0E25\u0E37\u0E2D\u0E01 Line User",clearable:"","clear-icon":"tabler-x"},{chip:a(({props:l,item:u})=>[e(de,B(l,{"prepend-avatar":u.raw.pictureUrl,text:u.raw.name}),null,16,["prepend-avatar","text"])]),item:a(({props:l,item:u})=>{var r,S,E;return[e(me,B(l,{"prepend-avatar":(r=u==null?void 0:u.raw)==null?void 0:r.pictureUrl,title:(S=u==null?void 0:u.raw)==null?void 0:S.name,subtitle:(E=u==null?void 0:u.raw)==null?void 0:E.lineId}),null,16,["prepend-avatar","title","subtitle"])]}),_:1},8,["modelValue","items"])]),_:1}),e(m,{cols:"12",md:"6"},{default:a(()=>[e(n,{modelValue:t.leadFormData.lineId,"onUpdate:modelValue":o[1]||(o[1]=l=>t.leadFormData.lineId=l),label:"Line ID",readonly:""},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"6"},{default:a(()=>[e(T,{modelValue:t.leadFormData.level,"onUpdate:modelValue":o[2]||(o[2]=l=>t.leadFormData.level=l),label:" -- \u0E40\u0E25\u0E37\u0E2D\u0E01\u0E23\u0E30\u0E14\u0E31\u0E1A Lead -- ",items:H,"menu-props":{maxHeight:200},rules:[d(x)(t.leadFormData.level,"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E23\u0E30\u0E14\u0E31\u0E1A Lead")]},null,8,["modelValue","rules"])]),_:1}),e(m,{cols:"12",md:"6"},{default:a(()=>[e(T,{modelValue:t.leadFormData.customerLevel_id,"onUpdate:modelValue":o[3]||(o[3]=l=>t.leadFormData.customerLevel_id=l),label:" -- \u0E40\u0E25\u0E37\u0E2D\u0E01\u0E23\u0E30\u0E14\u0E31\u0E1A\u0E25\u0E39\u0E01\u0E04\u0E49\u0E32 -- ",items:d(C),"menu-props":{maxHeight:200},rules:[d(x)(t.leadFormData.customerLevel_id,"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E23\u0E30\u0E14\u0E31\u0E1A\u0E25\u0E39\u0E01\u0E04\u0E49\u0E32")]},null,8,["modelValue","items","rules"])]),_:1}),e(m,{cols:"12",md:"12"},{default:a(()=>[e(j,{modelValue:t.leadFormData.tag,"onUpdate:modelValue":o[4]||(o[4]=l=>t.leadFormData.tag=l),chips:"",clearable:"",multiple:"","closable-chips":"","clear-icon":"tabler-circle-x",items:d(R),label:"Tag"},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),(g(!0),h(Q,null,W((c=t.leadFormData)==null?void 0:c.companyInfo,(l,u)=>(g(),X(b,{class:"d-flex",key:u},{default:a(()=>[e(m,{cols:"12"},{default:a(()=>[e(U,null,{default:a(()=>[e(re,{class:"v-expansion-panel-title"},{default:a(()=>[F("\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48\u0E17\u0E35\u0E48 "+M(u+1)+" ",1),e(ae,{title:"\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E01\u0E32\u0E23\u0E25\u0E1A",data:{_id:`${u}`,name:`${l.companyName}`,body:`\u0E04\u0E38\u0E13\u0E15\u0E49\u0E2D\u0E07\u0E01\u0E32\u0E23\u0E25\u0E1A ${l.companyName} \u0E08\u0E23\u0E34\u0E07\u0E2B\u0E23\u0E37\u0E2D\u0E44\u0E21\u0E48?`},callBack:G},null,8,["data"])]),_:2},1024),e(b,{class:"pt-2"},{default:a(()=>[e(k,null,{default:a(()=>[e(m,{md:"6",cols:"12"},{default:a(()=>[e(n,{modelValue:l.companyName,"onUpdate:modelValue":r=>l.companyName=r,label:"\u0E0A\u0E37\u0E48\u0E2D\u0E1A\u0E23\u0E34\u0E29\u0E31\u0E17 ",rules:[d(x)(l.companyName,"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E0A\u0E37\u0E48\u0E2D\u0E1A\u0E23\u0E34\u0E29\u0E31\u0E17")]},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),e(m,{cols:"12",md:"6"},{default:a(()=>[e(n,{modelValue:l.branch,"onUpdate:modelValue":r=>l.branch=r,label:"\u0E2A\u0E32\u0E02\u0E32"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(m,{cols:"12",md:"6"},{default:a(()=>[e(n,{modelValue:l.taxId,"onUpdate:modelValue":r=>l.taxId=r,label:"\u0E40\u0E25\u0E02\u0E1B\u0E23\u0E30\u0E08\u0E33\u0E15\u0E31\u0E27\u0E1C\u0E39\u0E49\u0E40\u0E2A\u0E35\u0E22\u0E20\u0E32\u0E29\u0E35",rules:[d(w)(l.taxId)]},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),e(m,{cols:"12",md:"6"},{default:a(()=>[e(n,{modelValue:l.address,"onUpdate:modelValue":r=>l.address=r,label:"\u0E17\u0E35\u0E48\u0E15\u0E31\u0E49\u0E07"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(m,{cols:"12",md:"6"},{default:a(()=>[e(n,{modelValue:l.googleMap,"onUpdate:modelValue":r=>l.googleMap=r,label:"Google map"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(m,{cols:"12",md:"6"},{default:a(()=>[e(n,{modelValue:l.companyEmail,"onUpdate:modelValue":r=>l.companyEmail=r,label:"Email",type:"email",rules:[d(te)(l.companyEmail)]},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),e(m,{cols:"12",md:"6"},{default:a(()=>[e(n,{modelValue:l.companyContactNumber,"onUpdate:modelValue":r=>l.companyContactNumber=r,label:"\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23\u0E28\u0E31\u0E1E\u0E17\u0E4C",rules:[d(w)(l.companyContactNumber)]},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),e(m,{md:"6",cols:"12"},{default:a(()=>[e(n,{modelValue:l.firstname,"onUpdate:modelValue":r=>l.firstname=r,label:"\u0E0A\u0E37\u0E48\u0E2D\u0E1C\u0E39\u0E49\u0E15\u0E34\u0E14\u0E15\u0E48\u0E2D",rules:[d(x)(l.firstname,"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E0A\u0E37\u0E48\u0E2D\u0E1C\u0E39\u0E49\u0E15\u0E34\u0E14\u0E15\u0E48\u0E2D")]},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),e(m,{md:"6",cols:"12"},{default:a(()=>[e(n,{modelValue:l.lastname,"onUpdate:modelValue":r=>l.lastname=r,label:"\u0E19\u0E32\u0E21\u0E2A\u0E01\u0E38\u0E25\u0E1C\u0E39\u0E49\u0E15\u0E34\u0E14\u0E15\u0E48\u0E2D"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(m,{cols:"12",md:"6"},{default:a(()=>[e(n,{modelValue:l.contactNumber,"onUpdate:modelValue":r=>l.contactNumber=r,label:"\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23\u0E28\u0E31\u0E1E\u0E17\u0E4C\u0E1C\u0E39\u0E49\u0E15\u0E34\u0E14\u0E15\u0E48\u0E2D",rules:[d(x)(l.contactNumber,"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23\u0E28\u0E31\u0E1E\u0E17\u0E4C\u0E1C\u0E39\u0E49\u0E15\u0E34\u0E14\u0E15\u0E48\u0E2D"),d(w)(l.contactNumber)]},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(b,{class:"d-flex"},{default:a(()=>[e(m,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:a(()=>[e(N,{onClick:J,disabled:d(p)},{default:a(()=>[F(" \u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25")]),_:1},8,["disabled"]),e(N,{color:"secondary",variant:"tonal",type:"reset",onClick:$(z,["prevent"])},{default:a(()=>[F(" \u0E25\u0E49\u0E32\u0E07\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25 ")]),_:1},8,["onClick"]),e(N,{onClick:$(P,["prevent"])},{default:a(()=>[F("\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48\u0E43\u0E2B\u0E21\u0E48")]),_:1},8,["onClick"])]),_:1})]),_:1}),e(ue,{modelValue:d(i),"onUpdate:modelValue":o[5]||(o[5]=l=>L(i)?i.value=l:null),persistent:"",width:"300"},{default:a(()=>[e(U,{color:"primary",width:"300"},{default:a(()=>[e(b,{class:"pt-3"},{default:a(()=>[F(" \u0E01\u0E33\u0E25\u0E31\u0E07\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25 \u0E01\u0E23\u0E38\u0E13\u0E32\u0E23\u0E2D\u0E0B\u0E31\u0E01\u0E04\u0E23\u0E39\u0E48 "),e(se,{indeterminate:"",color:"white",class:"mb-0"})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(ie,{modelValue:d(V).visible,"onUpdate:modelValue":o[6]||(o[6]=l=>d(V).visible=l),location:"bottom end"},{default:a(()=>[e(Y,{icon:d(V).icon,color:d(V).color,size:"30"},null,8,["icon","color"]),F(" \xA0 "+M(d(V).title),1)]),_:1},8,["modelValue"])]}),_:1})]),_:1})]),_:1})]))}},ce={__name:"index",setup(y){const v=f(),t={lineId:"",level:null,customerLevel_id:null,tag:"",companyInfo:[]},D=f(structuredClone(t));return I(()=>{}),(C,p)=>(g(),h("section",null,[e(ne,{ref_key:"refForm",ref:v,class:"mt-6"},{default:a(()=>[e(pe,{leadFormData:d(D),"onUpdate:leadFormData":p[0]||(p[0]=i=>L(D)?D.value=i:null),leadFormDataOriginal:t,"onUpdate:leadFormDataOriginal":p[1]||(p[1]=i=>t=i),refForm:d(v),"onUpdate:refForm":p[2]||(p[2]=i=>L(v)?v.value=i:null)},null,8,["leadFormData","refForm"])]),_:1},512)]))}};typeof A=="function"&&A(ce);export{ce as default};
