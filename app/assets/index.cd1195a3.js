import{_ as ke}from"./DialogCloseBtn.9d70464b.js";import{k as d,o as k,b as $,w as t,m as a,p as e,C as j,q as v,P as de,be as ce,D as U,E as _,j as qe,bd as X,Z as le,y as H,x as c,c as J,F as oe,a as ne,bn as se}from"./index.35991f09.js";import{V as me}from"./VSpacer.80b37d7c.js";import{V as D}from"./VBtn.3e0f2bdf.js";import{V as O,c as I}from"./VCard.bb37f72e.js";import{V as Y}from"./VForm.9ba2d763.js";import{V as E,a as m}from"./VRow.f9366793.js";import{V as S}from"./VTextField.4609cb9e.js";import{V as Pe}from"./VTextarea.0a746d96.js";import{V as W}from"./VChip.81c7dee3.js";import{V as fe}from"./VNavigationDrawer.92fc0e14.js";import{_ as G}from"./AppDateTimePicker.f12e24e3.js";import{u as pe}from"./useQuotationListStore.dc1b9404.js";import{u as Ce}from"./useSaleCustomerLevelsListStore.567ead43.js";import{u as Q}from"./useInvoiceListStore.d49afa11.js";import{u as Ue}from"./useLeadListStore.a2ed0901.js";import{r as B}from"./validators.9dda6c80.js";import{_ as Te}from"./ConfirmationPopup.26c6d5ed.js";import{u as ve}from"./useLineListStore.1d732fcb.js";import{V as ue}from"./VSelect.1bdb2ecc.js";import{V as ie}from"./VAutocomplete.75de4477.js";import{V as be}from"./VSnackbar.34637b93.js";import{V as Z}from"./VDivider.0f44b1ce.js";import{V as Oe}from"./VTable.0fe7de7a.js";import{V as $e}from"./VAvatar.6ed53308.js";import{V as Fe}from"./VDialog.61de6f6e.js";import{n as Be}from"./no-image.bc16c952.js";import{b as re}from"./route-block.182765af.js";import"./router.88351000.js";import"./position.15b8fc3a.js";import"./VImg.632117c3.js";import"./form.e84299e4.js";import"./forwardRefs.c003b6b8.js";/* empty css                   */import"./VField.93eb26cb.js";import"./index.a8f66a9c.js";import"./VInput.6bf7b46e.js";import"./easing.36b781ab.js";import"./VCounter.cb1a1153.js";import"./ssrBoot.8b43ebe3.js";import"./index.a44853ab.js";import"./index.0d4b9ec4.js";import"./VList.8e9051e1.js";import"./dialog-transition.13a8c048.js";import"./VMenu.768d7784.js";import"./scopeId.a8f1d836.js";import"./VOverlay.a330b104.js";import"./lazy.7e795ed8.js";import"./VCheckboxBtn.a302f7e6.js";import"./VSelectionControl.6ac8e090.js";import"./filter.f86a5c3d.js";const Le="/assets/mylogo.773e523e.png",Ae={class:"d-flex align-center pa-6 pb-1"},Qe=a("h6",{class:"text-h6"},"\u0E2A\u0E48\u0E07\u0E43\u0E1A\u0E40\u0E2A\u0E19\u0E2D\u0E23\u0E32\u0E04\u0E32\u0E1C\u0E48\u0E32\u0E19\u0E2D\u0E35\u0E40\u0E21\u0E25",-1),je={class:"mb-6"},Ee={__name:"QuotationSendQuotationDrawer",props:{isDrawerOpen:{type:Boolean,default:!1}},emits:["update:isDrawerOpen","submit"],setup(F,{emit:u}){const P=F,s=d("shelbyComapny@email.com"),g=d("qConsolidated@email.com"),w=d("\u0E19\u0E33\u0E2A\u0E48\u0E07\u0E43\u0E1A\u0E40\u0E2A\u0E19\u0E2D\u0E23\u0E32\u0E04\u0E32"),y=d(`\u0E40\u0E23\u0E35\u0E22\u0E19 \u0E04\u0E38\u0E13\u0E25\u0E39\u0E01\u0E04\u0E49\u0E32,

\u0E15\u0E32\u0E21\u0E17\u0E35\u0E48\u0E17\u0E32\u0E07\u0E1A\u0E23\u0E34\u0E29\u0E31\u0E17 One Connect \u0E44\u0E14\u0E49\u0E21\u0E35\u0E42\u0E2D\u0E01\u0E32\u0E2A\u0E1E\u0E39\u0E14\u0E04\u0E38\u0E22\u0E41\u0E25\u0E30\u0E19\u0E33\u0E40\u0E2A\u0E19\u0E2D\u0E41\u0E1E\u0E25\u0E15\u0E1F\u0E2D\u0E23\u0E4C\u0E21\u0E2D\u0E31\u0E08\u0E09\u0E23\u0E34\u0E22\u0E30\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E01\u0E32\u0E23\u0E1A\u0E23\u0E34\u0E2B\u0E32\u0E23\u0E08\u0E31\u0E14\u0E01\u0E32\u0E23\u0E2D\u0E2A\u0E31\u0E07\u0E2B\u0E32\u0E23\u0E34\u0E21\u0E17\u0E23\u0E31\u0E1E\u0E22\u0E4C\u0E43\u0E2B\u0E49\u0E01\u0E31\u0E1A\u0E17\u0E48\u0E32\u0E19\u0E40\u0E21\u0E37\u0E48\u0E2D\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48 [\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48] 

\u0E17\u0E32\u0E07\u0E1A\u0E23\u0E34\u0E29\u0E31\u0E17\u0E02\u0E2D\u0E19\u0E33\u0E2A\u0E48\u0E07\u0E43\u0E1A\u0E40\u0E2A\u0E19\u0E2D\u0E23\u0E32\u0E04\u0E32\u0E21\u0E32\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E43\u0E2B\u0E49\u0E17\u0E48\u0E32\u0E19\u0E1E\u0E34\u0E08\u0E32\u0E23\u0E13\u0E32 (\u0E23\u0E32\u0E22\u0E25\u0E30\u0E40\u0E2D\u0E35\u0E22\u0E14\u0E15\u0E32\u0E21\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23\u0E17\u0E35\u0E48\u0E41\u0E19\u0E1A\u0E21\u0E32\u0E14\u0E49\u0E27\u0E22)

\u0E17\u0E32\u0E07\u0E1A\u0E23\u0E34\u0E29\u0E31\u0E17\u0E2B\u0E27\u0E31\u0E07\u0E40\u0E1B\u0E47\u0E19\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E22\u0E34\u0E48\u0E07\u0E27\u0E48\u0E32\u0E43\u0E1A\u0E40\u0E2A\u0E19\u0E2D\u0E23\u0E32\u0E04\u0E32\u0E09\u0E1A\u0E31\u0E1A\u0E19\u0E35\u0E49\u0E08\u0E30\u0E40\u0E1B\u0E47\u0E19\u0E1B\u0E23\u0E30\u0E42\u0E22\u0E0A\u0E19\u0E4C\u0E15\u0E48\u0E2D\u0E17\u0E48\u0E32\u0E19 \u0E2B\u0E32\u0E01\u0E17\u0E48\u0E32\u0E19\u0E2A\u0E19\u0E43\u0E08\u0E17\u0E35\u0E48\u0E08\u0E30\u0E43\u0E0A\u0E49\u0E1A\u0E23\u0E34\u0E01\u0E32\u0E23 \u0E01\u0E23\u0E38\u0E13\u0E32\u0E15\u0E34\u0E14\u0E15\u0E48\u0E2D\u0E01\u0E25\u0E31\u0E1A\u0E40\u0E23\u0E32\u0E20\u0E32\u0E22\u0E43\u0E19 [\u0E23\u0E30\u0E22\u0E30\u0E40\u0E27\u0E25\u0E32] \u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E23\u0E31\u0E1A\u0E2A\u0E34\u0E17\u0E18\u0E34\u0E1E\u0E34\u0E40\u0E28\u0E29 \u0E40\u0E0A\u0E48\u0E19 \u0E2A\u0E48\u0E27\u0E19\u0E25\u0E14 50% \u0E2B\u0E23\u0E37\u0E2D\u0E1F\u0E23\u0E35\u0E04\u0E48\u0E32\u0E1A\u0E23\u0E34\u0E01\u0E32\u0E23 3 \u0E40\u0E14\u0E37\u0E2D\u0E19

\u0E2B\u0E32\u0E01\u0E21\u0E35\u0E02\u0E49\u0E2D\u0E2A\u0E07\u0E2A\u0E31\u0E22\u0E2B\u0E23\u0E37\u0E2D\u0E15\u0E49\u0E2D\u0E07\u0E01\u0E32\u0E23\u0E2A\u0E2D\u0E1A\u0E16\u0E32\u0E21\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E40\u0E15\u0E34\u0E21 \u0E01\u0E23\u0E38\u0E13\u0E32\u0E15\u0E34\u0E14\u0E15\u0E48\u0E2D

[\u0E0A\u0E37\u0E48\u0E2D\u0E1C\u0E39\u0E49\u0E15\u0E34\u0E14\u0E15\u0E48\u0E2D]
\u0E2B\u0E21\u0E32\u0E22\u0E40\u0E25\u0E02\u0E42\u0E17\u0E23\u0E28\u0E31\u0E1E\u0E17\u0E4C [\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23\u0E28\u0E31\u0E1E\u0E17\u0E4C]
\u0E2B\u0E23\u0E37\u0E2D\u0E2D\u0E35\u0E40\u0E21\u0E25 [\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48\u0E2D\u0E35\u0E40\u0E21\u0E25]

\u0E02\u0E2D\u0E41\u0E2A\u0E14\u0E07\u0E04\u0E27\u0E32\u0E21\u0E19\u0E31\u0E1A\u0E16\u0E37\u0E2D`),f=()=>{u("update:isDrawerOpen",!1),u("submit",{emailFrom:s.value,emailTo:g.value,quotationSubject:w.value,paymentMessage:y.value})},x=h=>{u("update:isDrawerOpen",h)};return(h,b)=>(k(),$(fe,{temporary:"",location:"end",width:400,"model-value":P.isDrawerOpen,class:"scrollable-content","onUpdate:modelValue":x},{default:t(()=>[a("div",Ae,[Qe,e(me),e(D,{icon:"",size:"32",color:"default",variant:"tonal",class:"rounded",onClick:b[0]||(b[0]=i=>x(!1))},{default:t(()=>[e(j,{size:"18",icon:"tabler-x"})]),_:1})]),e(v(de),{options:{wheelPropagation:!1}},{default:t(()=>[e(O,{flat:""},{default:t(()=>[e(I,null,{default:t(()=>[e(Y,{onSubmit:ce(f,["prevent"])},{default:t(()=>[e(E,null,{default:t(()=>[e(m,{cols:"12"},{default:t(()=>[e(S,{modelValue:v(s),"onUpdate:modelValue":b[1]||(b[1]=i=>U(s)?s.value=i:null),label:"\u0E08\u0E32\u0E01"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12"},{default:t(()=>[e(S,{modelValue:v(g),"onUpdate:modelValue":b[2]||(b[2]=i=>U(g)?g.value=i:null),label:"\u0E16\u0E36\u0E07"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12"},{default:t(()=>[e(S,{modelValue:v(w),"onUpdate:modelValue":b[3]||(b[3]=i=>U(w)?w.value=i:null),label:"\u0E2B\u0E31\u0E27\u0E02\u0E49\u0E2D"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12"},{default:t(()=>[e(Pe,{modelValue:v(y),"onUpdate:modelValue":b[4]||(b[4]=i=>U(y)?y.value=i:null),rows:"10",label:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12"},{default:t(()=>[a("div",je,[e(W,{label:"",color:"primary",size:"small"},{default:t(()=>[e(j,{start:"",icon:"tabler-link"}),_(" \u0E43\u0E1A\u0E40\u0E2A\u0E19\u0E2D\u0E23\u0E32\u0E04\u0E32\u0E17\u0E35\u0E48\u0E41\u0E19\u0E1A\u0E21\u0E32\u0E14\u0E49\u0E27\u0E22 ")]),_:1})]),e(D,{type:"submit",class:"me-3"},{default:t(()=>[_(" \u0E2A\u0E48\u0E07 ")]),_:1}),e(D,{color:"secondary",variant:"tonal",onClick:b[5]||(b[5]=i=>h.$emit("update:isDrawerOpen",!1))},{default:t(()=>[_(" \u0E22\u0E01\u0E40\u0E25\u0E34\u0E01 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}},Me={class:"d-flex align-center pa-6 pb-1"},Re=a("h6",{class:"text-h6"},"\u0E40\u0E1B\u0E25\u0E35\u0E48\u0E22\u0E19\u0E40\u0E1B\u0E47\u0E19\u0E43\u0E1A\u0E41\u0E08\u0E49\u0E07\u0E2B\u0E19\u0E35\u0E49",-1),_e={__name:"QuotationConvertToInvoiceDrawer",props:{isDrawerOpen:{type:Boolean,required:!0}},emits:["update:isDrawerOpen","submit"],setup(F,{emit:u}){const P=F;qe();const s=X(),g=d(!1),w=d(!0),y=d([]),f=d([]),x=d([]);d([]);const h=d(0),b=d(0),i=d(),L=d(null);var M=!1;const A=d(!1),R=d(),K=["First","Second","Third","Fourth","Fifth","Sixth","Seventh","Eight","Ninth"],N=d({visible:!1,icon:"tabler-xbox-x",color:"error",title:"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E43\u0E2B\u0E49\u0E04\u0E23\u0E1A\u0E15\u0E32\u0E21\u0E17\u0E35\u0E48\u0E23\u0E30\u0E1A\u0E1A\u0E01\u0E33\u0E2B\u0E19\u0E14"}),V={documentNumber:"765-01388",quotationNumber:"",issuedDate:"",dueDate:"",invoicePercentSummary:0,baht:0,customerType:null,convertType:"install",quotation_id:"",lead_id:null,customerInfo_id:null,note:"Please make a payment of this bill before due date. ",invoiceNumbers:""},l=d(structuredClone(V)),T=()=>{const p=s.query._id;pe.fetchData("?_id="+p).then(n=>{if(n.data.code==1){var o=n.data.data;f.value.quotationNumber=o.documentNumber,f.value.totalPrice=o.summary.totalPrice,l.value.quotationNumber=f.value.quotationNumber}l.value.lead_id=o.customerInfo.lead_id,l.value.quotation_id=s.query._id})},r=()=>{Ce.fetchData().then(p=>{if(p.data.code==1)for(var n=p.data.data.documents,o=0;o<n.length;o++)y.value[o]={title:n[o].level,value:n[o]._id}})},q=()=>{const p=s.query._id;Q.fetchData("?_id="+p+"&getby=quotation").then(n=>{const o=n.data;console.log(o),o.code==1&&(R.value=K[o.data.length]+" payment of quotation No: #"+f.value.quotationNumber,l.value.invoiceNumbers=R.value)})};T(),r(),q();const z=()=>{const p=l.value.lead_id;Ue.fetchData("?_id="+p).then(n=>{if(n.data.code==1){x.value=[];for(var o=n.data.data,C=0;C<o.companyInfo.length;C++)x.value[C]={title:o.companyInfo[C].companyName+" "+o.companyInfo[C].branch,value:o.companyInfo[C]._id}}})};le(l.value,()=>{z()});const ee=()=>{if(!l.value.issuedDate){const p=new Date(Date.now()+252e5).toISOString().slice(0,10);l.value.issuedDate=p}if(!l.value.dueDate){const p=new Date;p.setDate(p.getDate()+30);const n=p.toISOString().slice(0,10);l.value.dueDate=n}};ee();const ye=()=>{var p=isNaN(f.value.totalPrice)?0:parseFloat(f.value.totalPrice),n=isNaN(h.value)?0:parseFloat(h.value);b.value=p*n/100,l.value.baht=b.value};le(h,p=>{l.value.invoicePercentSummary=p,ye()});const Ve=[{title:"\u0E15\u0E34\u0E14\u0E15\u0E31\u0E49\u0E07",value:"install"},{title:"\u0E2A\u0E48\u0E07\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32",value:"delivery"}],he=d(""),xe=d(""),De=d(""),we=d(""),Ie=d(""),ge=d(""),Ne=()=>{u("update:isDrawerOpen",!1),u("submit",{quotationNumber:he.value,invoiceNumber:xe.value,invoiceDate:De.value,invoiceDuedate:we.value,invoicePercentSummary:Ie.value,invoiceSummary:ge.value})};(()=>{Q.fetchData("/newInvoiceId").then(p=>{var n=p.data.data.documentNumber;l.value.documentNumber=n})})();const te=()=>{i.value.validate().then(async({valid:p})=>{if(p){g.value=!0;let n=new FormData;for(const o in l.value)n.append(o,l.value[o]);Q.insertItemJson(l.value).then(o=>{o.data.code==1?(N.value={visible:!0,icon:"tabler-circle-check",color:"success",title:"\u0E40\u0E1B\u0E25\u0E35\u0E48\u0E22\u0E19\u0E40\u0E1B\u0E47\u0E19\u0E43\u0E1A\u0E41\u0E08\u0E49\u0E07\u0E2B\u0E19\u0E35\u0E49 "+l.value.documentNumber+" \u0E40\u0E23\u0E35\u0E22\u0E1A\u0E23\u0E49\u0E2D\u0E22"},w.value=!1,l.value=structuredClone(V),h.value=0,T(),ee()):o.data.code==7?N.value={visible:!0,icon:"tabler-xbox-x",color:"error",title:" \u0E01\u0E32\u0E23\u0E0A\u0E33\u0E23\u0E30\u0E40\u0E07\u0E34\u0E19\u0E15\u0E32\u0E21\u0E43\u0E1A\u0E41\u0E08\u0E49\u0E07\u0E2B\u0E19\u0E35\u0E49\u0E19\u0E35\u0E49\u0E40\u0E01\u0E34\u0E19\u0E01\u0E27\u0E48\u0E32\u0E43\u0E1A\u0E40\u0E2A\u0E19\u0E2D\u0E23\u0E32\u0E04\u0E32\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14"}:o.data.code==6?Q.fetchData("/newInvoiceId").then(C=>{L.value=C.data.data.documentNumber,typeof C.data.data.documentNumber<"u"&&(A.value=!0)}):o.data.code==5?N.value={visible:!0,icon:"tabler-xbox-x",color:"error",title:"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E2A\u0E16\u0E32\u0E19\u0E17\u0E35\u0E48\u0E15\u0E34\u0E14\u0E15\u0E31\u0E49\u0E07"}:N.value={visible:!0,icon:"tabler-xbox-x",color:"error",title:"\u0E40\u0E01\u0E34\u0E14\u0E02\u0E49\u0E2D\u0E1C\u0E34\u0E14\u0E1E\u0E25\u0E32\u0E14\u0E23\u0E30\u0E2B\u0E27\u0E48\u0E32\u0E07\u0E01\u0E32\u0E23\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25 \u0E01\u0E23\u0E38\u0E13\u0E32\u0E41\u0E08\u0E49\u0E07\u0E40\u0E08\u0E49\u0E32\u0E17\u0E35\u0E48\u0E40\u0E1E\u0E37\u0E48\u0E2D\u0E17\u0E33\u0E01\u0E32\u0E23\u0E41\u0E01\u0E49\u0E44\u0E02"}}).catch(o=>{console.log(o)}).finally(()=>{g.value=!1})}else N.value={visible:!0,icon:"tabler-xbox-x",color:"error",title:"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E43\u0E2B\u0E49\u0E04\u0E23\u0E1A\u0E15\u0E32\u0E21\u0E17\u0E35\u0E48\u0E23\u0E30\u0E1A\u0E1A\u0E01\u0E33\u0E2B\u0E19\u0E14"}})},Se=()=>{l.value.documentNumber=L.value,M?N.value={visible:!0,icon:"tabler-xbox-x",color:"error",title:"\u0E21\u0E35\u0E1A\u0E32\u0E07\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E1C\u0E34\u0E14\u0E1E\u0E25\u0E32\u0E14\u0E40\u0E01\u0E35\u0E48\u0E22\u0E27\u0E01\u0E31\u0E1A\u0E40\u0E25\u0E02\u0E17\u0E35\u0E48\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23 \u0E01\u0E23\u0E38\u0E13\u0E32\u0E15\u0E34\u0E14\u0E15\u0E48\u0E2D Admin"}:(te(),M=!0)},ae=p=>{u("update:isDrawerOpen",p)};return(p,n)=>(k(),$(fe,{temporary:"",location:"end",width:400,"model-value":P.isDrawerOpen,class:"scrollable-content","onUpdate:modelValue":ae},{default:t(()=>[a("div",Me,[Re,e(me),e(D,{icon:"",size:"32",color:"default",variant:"tonal",class:"rounded",onClick:n[0]||(n[0]=o=>ae(!1))},{default:t(()=>[e(j,{size:"18",icon:"tabler-x"})]),_:1})]),e(v(de),{options:{wheelPropagation:!1}},{default:t(()=>[e(O,{flat:""},{default:t(()=>[e(I,null,{default:t(()=>[e(Y,{ref_key:"refForm",ref:i,onSubmit:ce(Ne,["prevent"])},{default:t(()=>[e(E,null,{default:t(()=>[e(m,{cols:"12"},{default:t(()=>[e(S,{modelValue:f.value.quotationNumber,"onUpdate:modelValue":n[1]||(n[1]=o=>f.value.quotationNumber=o),label:"\u0E40\u0E25\u0E02\u0E17\u0E35\u0E48\u0E43\u0E1A\u0E40\u0E2A\u0E19\u0E2D\u0E23\u0E32\u0E04\u0E32",onkeydown:"return false",rules:[v(B)(f.value.quotationNumber,"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E40\u0E25\u0E02\u0E17\u0E35\u0E48\u0E43\u0E1A\u0E40\u0E2A\u0E19\u0E2D\u0E23\u0E32\u0E04\u0E32")]},null,8,["modelValue","rules"])]),_:1}),e(m,{cols:"12"},{default:t(()=>[e(S,{modelValue:l.value.documentNumber,"onUpdate:modelValue":n[2]||(n[2]=o=>l.value.documentNumber=o),label:"\u0E40\u0E25\u0E02\u0E17\u0E35\u0E48\u0E43\u0E1A\u0E41\u0E08\u0E49\u0E07\u0E2B\u0E19\u0E35\u0E49",rules:[v(B)(l.value.documentNumber,"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E01\u0E23\u0E2D\u0E01\u0E40\u0E25\u0E02\u0E17\u0E35\u0E48\u0E43\u0E1A\u0E41\u0E08\u0E49\u0E07\u0E2B\u0E19\u0E35\u0E49")]},null,8,["modelValue","rules"])]),_:1}),e(m,{cols:"12"},{default:t(()=>[e(G,{modelValue:l.value.issuedDate,"onUpdate:modelValue":n[3]||(n[3]=o=>l.value.issuedDate=o),density:"compact",config:{position:"auto right"},label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E2D\u0E2D\u0E01\u0E43\u0E1A\u0E41\u0E08\u0E49\u0E07\u0E2B\u0E19\u0E35\u0E49"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12"},{default:t(()=>[e(G,{modelValue:l.value.dueDate,"onUpdate:modelValue":n[4]||(n[4]=o=>l.value.dueDate=o),density:"compact",config:{position:"auto right"},label:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E04\u0E23\u0E1A\u0E01\u0E33\u0E2B\u0E19\u0E14"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12"},{default:t(()=>[e(S,{modelValue:h.value,"onUpdate:modelValue":n[5]||(n[5]=o=>h.value=o),label:"% \u0E22\u0E2D\u0E14\u0E40\u0E23\u0E35\u0E22\u0E01\u0E40\u0E01\u0E47\u0E1A",type:"number",prefix:"%",rules:[v(B)(h.value,"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E23\u0E30\u0E1A\u0E38\u0E22\u0E2D\u0E14\u0E40\u0E23\u0E35\u0E22\u0E01\u0E40\u0E01\u0E47\u0E1A\u0E40\u0E1B\u0E47\u0E19 %")]},null,8,["modelValue","rules"])]),_:1}),e(m,{cols:"12"},{default:t(()=>[e(S,{modelValue:l.value.baht,"onUpdate:modelValue":n[6]||(n[6]=o=>l.value.baht=o),prefix:"\u0E3F",type:"number",label:"\u0E23\u0E27\u0E21\u0E22\u0E2D\u0E14",items:b.value,rules:[v(B)(l.value.baht,"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E23\u0E30\u0E1A\u0E38\u0E22\u0E2D\u0E14\u0E40\u0E23\u0E35\u0E22\u0E01\u0E40\u0E01\u0E47\u0E1A\u0E40\u0E1B\u0E47\u0E19 \u0E3F")]},null,8,["modelValue","items","rules"])]),_:1}),e(m,{cols:"12",md:"12"},{default:t(()=>[e(ue,{modelValue:l.value.customerType,"onUpdate:modelValue":n[7]||(n[7]=o=>l.value.customerType=o),label:" -- \u0E40\u0E25\u0E37\u0E2D\u0E01\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17\u0E25\u0E39\u0E01\u0E04\u0E49\u0E32 -- ",items:y.value,"menu-props":{maxHeight:200},rules:[v(B)(l.value.customerType," \u0E01\u0E23\u0E38\u0E13\u0E32\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17\u0E25\u0E39\u0E01\u0E04\u0E49\u0E32")]},null,8,["modelValue","items","rules"])]),_:1}),e(m,{cols:"12",md:"12"},{default:t(()=>[e(ue,{modelValue:l.value.convertType,"onUpdate:modelValue":n[8]||(n[8]=o=>l.value.convertType=o),label:" -- \u0E40\u0E25\u0E37\u0E2D\u0E01\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17\u0E07\u0E32\u0E19 -- ",items:Ve,"menu-props":{maxHeight:200}},null,8,["modelValue"])]),_:1}),l.value.convertType!="install"?(k(),$(m,{key:0,cols:"12",md:"12"},{default:t(()=>[e(G,{modelValue:l.value.deliveryDate,"onUpdate:modelValue":n[9]||(n[9]=o=>l.value.deliveryDate=o),label:" -- \u0E40\u0E25\u0E37\u0E2D\u0E01\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E15\u0E49\u0E2D\u0E07\u0E01\u0E32\u0E23\u0E43\u0E2B\u0E49\u0E2A\u0E48\u0E07\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32 -- ",clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1})):H("",!0),l.value.convertType!="install"?(k(),$(m,{key:1,cols:"12",md:"12"},{default:t(()=>[e(ie,{label:" -- \u0E40\u0E25\u0E37\u0E2D\u0E01\u0E2A\u0E16\u0E32\u0E19\u0E17\u0E35\u0E48\u0E2A\u0E48\u0E07\u0E2A\u0E34\u0E19\u0E04\u0E49\u0E32 -- ",modelValue:l.value.customerInfo_id,"onUpdate:modelValue":n[10]||(n[10]=o=>l.value.customerInfo_id=o),items:x.value,placeholder:"Select State",clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1})):H("",!0),l.value.convertType!="delivery"?(k(),$(m,{key:2,cols:"12",md:"12"},{default:t(()=>[e(G,{modelValue:l.value.estimateDate,"onUpdate:modelValue":n[11]||(n[11]=o=>l.value.estimateDate=o),label:" -- \u0E40\u0E25\u0E37\u0E2D\u0E01\u0E1B\u0E23\u0E30\u0E21\u0E32\u0E13\u0E01\u0E32\u0E23\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E15\u0E34\u0E14\u0E15\u0E31\u0E49\u0E07 -- ",clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1})):H("",!0),l.value.convertType!="delivery"?(k(),$(m,{key:3,cols:"12",md:"12"},{default:t(()=>[e(ie,{label:" -- \u0E40\u0E25\u0E37\u0E2D\u0E01\u0E2A\u0E16\u0E32\u0E19\u0E17\u0E35\u0E48\u0E15\u0E34\u0E14\u0E15\u0E31\u0E49\u0E07 -- ",modelValue:l.value.customerInfo_id,"onUpdate:modelValue":n[12]||(n[12]=o=>l.value.customerInfo_id=o),items:x.value,placeholder:"Select State",clearable:"","clear-icon":"tabler-x",rules:[v(B)(l.value.customerType," \u0E01\u0E23\u0E38\u0E13\u0E32\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E2A\u0E16\u0E32\u0E19\u0E17\u0E35\u0E48\u0E15\u0E34\u0E14\u0E15\u0E31\u0E49\u0E07")]},null,8,["modelValue","items","rules"])]),_:1})):H("",!0),e(m,{cols:"12"},{default:t(()=>[e(S,{modelValue:l.value.note,"onUpdate:modelValue":n[13]||(n[13]=o=>l.value.note=o),label:"\u0E2B\u0E21\u0E32\u0E22\u0E40\u0E2B\u0E15\u0E38"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12"},{default:t(()=>[e(S,{modelValue:l.value.invoiceNumbers,"onUpdate:modelValue":n[14]||(n[14]=o=>l.value.invoiceNumbers=o),label:"\u0E25\u0E33\u0E14\u0E31\u0E1A\u0E43\u0E1A\u0E41\u0E08\u0E49\u0E07\u0E2B\u0E19\u0E35\u0E49",readonly:""},null,8,["modelValue"])]),_:1}),e(m,{cols:"12"},{default:t(()=>[e(D,{type:"submit",class:"me-3",onClick:te},{default:t(()=>[_(" \u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25 ")]),_:1}),e(D,{color:"secondary",variant:"tonal",onClick:n[15]||(n[15]=o=>p.$emit("update:isDrawerOpen",!1))},{default:t(()=>[_(" \u0E22\u0E01\u0E40\u0E25\u0E34\u0E01 ")]),_:1}),e(be,{modelValue:N.value.visible,"onUpdate:modelValue":n[16]||(n[16]=o=>N.value.visible=o),location:"bottom end"},{default:t(()=>[e(j,{icon:N.value.icon,color:N.value.color,size:"30"},null,8,["icon","color"]),_(" \xA0 "+c(N.value.title),1)]),_:1},8,["modelValue"])]),_:1}),e(Te,{title:"\u0E40\u0E25\u0E02\u0E17\u0E35\u0E48\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23\u0E0B\u0E49\u0E33",label:`\u0E40\u0E1B\u0E25\u0E35\u0E48\u0E22\u0E19\u0E40\u0E25\u0E02\u0E17\u0E35\u0E48\u0E40\u0E2D\u0E01\u0E2A\u0E32\u0E23\u0E08\u0E32\u0E01 "${l.value.documentNumber}" \u0E40\u0E1B\u0E47\u0E19 "${L.value}" \u0E2B\u0E23\u0E37\u0E2D\u0E44\u0E21\u0E48`,"is-dialog-visible":A.value,"onUpdate:is-dialog-visible":n[17]||(n[17]=o=>A.value=o),"call-back":Se,"button-label":{cancel:"\u0E22\u0E01\u0E40\u0E25\u0E34\u0E01",submit:"\u0E15\u0E01\u0E25\u0E07"}},null,8,["label","is-dialog-visible"])]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}};const ze=a("div",{class:"ma-sm-4"},[a("div",{class:"d-flex align-center mb-6"},[a("h6",{class:"font-weight-bold text-xl"},[a("img",{src:Le,width:"200"})])])],-1),He={class:"mt-4 ma-sm-4"},Je={class:"font-weight-medium text-xl mb-6"},Ge=a("b",null,"Quotation",-1),Ze={class:"mb-2"},Ke=a("span",null,"Created date: ",-1),We={class:"font-weight-semibold"},Xe={class:"mb-2"},Ye=a("span",null,"Due date: ",-1),et={class:"font-weight-semibold"},tt=a("div",{class:"ma-sm-4"},[a("h6",{class:"text-sm font-weight-medium mb-3"},"From:"),a("table",null,[a("tbody",null,[a("p",{class:"mb-0"}," \u0E1A\u0E23\u0E34\u0E29\u0E31\u0E17 \u0E2D\u0E34\u0E19\u0E40\u0E2E\u0E49\u0E32\u0E2A\u0E4C \u0E40\u0E17\u0E04\u0E42\u0E19\u0E42\u0E25\u0E22\u0E35 \u0E08\u0E33\u0E01\u0E31\u0E14 (\u0E2A\u0E33\u0E19\u0E31\u0E01\u0E07\u0E32\u0E19\u0E43\u0E2B\u0E0D\u0E48) "),a("p",{class:"mb-0"},"\u0E40\u0E25\u0E02\u0E17\u0E35\u0E48 77/577 \u0E0B\u0E2D\u0E22\u0E08\u0E15\u0E38\u0E42\u0E0A\u0E15\u0E34 19"),a("p",{class:"mb-0"},"\u0E41\u0E02\u0E27\u0E07\u0E2D\u0E2D\u0E40\u0E07\u0E34\u0E19 \u0E40\u0E02\u0E15\u0E2A\u0E32\u0E22\u0E44\u0E2B\u0E21 \u0E01\u0E23\u0E38\u0E07\u0E40\u0E17\u0E1E\u0E21\u0E2B\u0E32\u0E19\u0E04\u0E23 10220"),a("p",{class:"mb-0"},"\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23\u0E28\u0E31\u0E1E\u0E17\u0E4C 088-620-1206"),a("p",{class:"mb-0"},"\u0E40\u0E25\u0E02\u0E1B\u0E23\u0E30\u0E08\u0E33\u0E15\u0E31\u0E27\u0E1C\u0E39\u0E49\u0E40\u0E2A\u0E35\u0E22\u0E20\u0E32\u0E29\u0E35 0745565007058")])])],-1),at={class:"ma-sm-4",style:{width:"19rem"}},lt=a("h6",{class:"text-sm font-weight-medium mb-3"},"To:",-1),ot={class:"mb-0"},nt={class:"mb-0"},st={class:"mb-0"},ut={class:"mb-0"},it={class:"mb-0"},rt=a("thead",null,[a("tr",null,[a("th",{scope:"col"},"Model code"),a("th",{scope:"col"},"Item & Description"),a("th",{scope:"col",class:"text-center"},"Price"),a("th",{scope:"col",class:"text-center"},"Amount"),a("th",{scope:"col",class:"text-center"},"Discount"),a("th",{scope:"col",class:"text-center"},"Summary")])],-1),dt={class:"text-no-wrap"},ct={class:"text-no-wrap"},mt={class:"text-center"},ft={class:"text-center"},pt={class:"text-center"},vt={class:"text-center"},bt={class:"my-2 mx-sm-4"},_t={class:"d-flex align-center mb-1"},yt=a("h6",{class:"text-sm font-weight-semibold me-1"},"Sales person:",-1),Vt=a("div",{class:"d-flex align-center mb-1"},[a("h6",{class:"text-sm font-weight-semibold me-1"}," Payment method: ")],-1),ht=a("div",{class:"d-flex align-center mb-1"},[a("h6",{class:"text-sm font-weight-semibold me-1"},"Account name:"),a("span",null,"\u0E1A\u0E08\u0E01. \u0E2D\u0E34\u0E19\u0E40\u0E2E\u0E49\u0E32\u0E2A\u0E4C \u0E40\u0E17\u0E04\u0E42\u0E19\u0E42\u0E25\u0E22\u0E35 ")],-1),xt=a("div",{class:"d-flex align-center mb-1"},[a("h6",{class:"text-sm font-weight-semibold me-1"}," Account number: "),a("span",null,"171-430192-2 ")],-1),Dt=a("div",{class:"d-flex align-center mb-1"},[a("h6",{class:"text-sm font-weight-semibold me-1"},"Bank name:"),a("span",null,"\u0E44\u0E17\u0E22\u0E1E\u0E32\u0E13\u0E34\u0E0A\u0E22\u0E4C")],-1),wt={class:"my-2 mx-sm-4"},It={class:"text-end"},gt={class:"me-5"},Nt=a("p",{class:"mb-2"},"Extra discount:",-1),St=a("p",{class:"mb-2"},"Sub total:",-1),kt=a("p",{class:"mb-2"},"Total discount:",-1),qt={class:"mb-2"},Pt=a("p",{class:"mb-2"},"Total:",-1),Ct={class:"font-weight-semibold"},Ut={class:"mb-2"},Tt={class:"mb-2"},Ot={class:"mb-2"},$t={class:"mb-2"},Ft={class:"mb-2"},Bt=a("div",{class:"d-flex mx-sm-4"},[a("h6",{class:"text-sm font-weight-semibold me-1"},"Note:")],-1),Lt={class:"d-flex gap-2"},At={class:"w-50"},Qt={class:"w-50"},jt={__name:"QuotationEditable",props:{data:{type:Object,required:!0},lineInfo:{type:Object}},setup(F){const u=F,P=X(),s=d(0),g=d(0),w=d(),y=d({message:"",color:"warning",visible:!1,icon:""}),f=d(!1);(()=>{const V=P.query._id;Q.fetchData("?_id="+V+"&getby=quotation").then(l=>{l.data.code==1&&(w.value=l.data.data);for(var T=[],r=0,q=0;q<w.value.length;q++)T[q]=isNaN(w.value[q].amountRecieved.baht)?0:parseFloat(w.value[q].amountRecieved.baht),r+=T[q];var z=u.data.totalPrice;s.value=z-r,g.value=s.value/z*100})})();const h=d(!1),b=d(!1),i=()=>{window.open(se.api.url+u.data.pdfPath)},L=()=>{window.open(se.api.url+u.data.pdfPath)},M=V=>V==="warm"?"warning":V==="hot"?"error":V==="cold"?"info":V==="done"?"success":"primary",A=V=>V==="not yet purchased"?"warning":V==="purchased"?"success":"primary",R=V=>V.charAt(0).toUpperCase()+V.slice(1),K=()=>{var l={quotation_ids:[P.query._id]};N(l),f.value=!1},N=V=>{ve.insertItemJson(V,"/sendQuotation").then(l=>{l.data.code==1&&(y.value={message:"\u0E2A\u0E48\u0E07\u0E43\u0E1A\u0E40\u0E2A\u0E19\u0E2D\u0E23\u0E32\u0E04\u0E32\u0E40\u0E02\u0E49\u0E32\u0E44\u0E25\u0E19\u0E4C\u0E17\u0E31\u0E49\u0E07\u0E2B\u0E21\u0E14\u0E41\u0E25\u0E49\u0E27",color:"success",visible:!0,icon:"tabler-circle-check"},allData.value.forEach(r=>{r.checked=!1}))})};return(V,l)=>{const T=ke;return k(),J("section",null,[e(E,null,{default:t(()=>[e(m,{cols:"12",md:"9"},{default:t(()=>[e(O,null,{default:t(()=>[e(I,{class:"d-flex flex-wrap justify-space-between flex-column flex-sm-row"},{default:t(()=>[ze,a("div",He,[a("h6",Je,[Ge,_(" #"+c(u.data.documentNumber),1)]),a("p",Ze,[Ke,a("span",We,c(u.data.issuedDate),1)]),a("p",Xe,[Ye,a("span",et,c(u.data.dueDate),1)])])]),_:1}),e(Z),e(I,{class:"d-flex flex-wrap justify-space-between flex-column flex-sm-row gap-4"},{default:t(()=>[tt,a("div",at,[lt,a("p",ot,c(u.data.customerInfo.companyInfo.firstname)+" "+c(u.data.customerInfo.companyInfo.lastname),1),a("p",nt," \u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23\u0E28\u0E31\u0E1E\u0E17\u0E4C "+c(u.data.customerInfo.companyInfo.contactNumber),1),a("p",st,c(u.data.customerInfo.companyInfo.companyName)+" "+c(u.data.customerInfo.companyInfo.branch),1),a("p",ut," \u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 "+c(u.data.customerInfo.companyInfo.address),1),a("p",it," \u0E40\u0E25\u0E02\u0E1B\u0E23\u0E30\u0E08\u0E33\u0E15\u0E31\u0E27\u0E1C\u0E39\u0E49\u0E40\u0E2A\u0E35\u0E22\u0E20\u0E32\u0E29\u0E35 "+c(u.data.customerInfo.companyInfo.taxId),1)])]),_:1}),e(Z),e(Oe,null,{default:t(()=>[rt,a("tbody",null,[(k(!0),J(oe,null,ne(u.data.products,r=>(k(),J("tr",null,[a("td",dt,c(r.modelCode),1),a("td",ct,c(r.name),1),a("td",mt,"\u0E3F"+c(r.price),1),a("td",ft,c(r.quantity),1),a("td",pt,c(r.discountBaht),1),a("td",vt,"\u0E3F"+c(r.totalPricePerRow),1)]))),256))])]),_:1}),e(Z,{class:"my-2"}),e(I,{class:"d-flex justify-space-between flex-column flex-sm-row print-row"},{default:t(()=>[a("div",bt,[a("div",_t,[yt,a("span",null,c(u.data.createdBy.firstname+" "+u.data.createdBy.lastname),1)]),Vt,ht,xt,Dt]),a("div",wt,[a("table",null,[a("tr",null,[a("td",It,[a("div",gt,[Nt,St,kt,a("p",qt,"Vat "+c(u.data.vat)+"%:",1),Pt])]),a("td",Ct,[a("p",Ut,"\u0E3F"+c(u.data.extraDiscount),1),a("p",Tt,"\u0E3F"+c(u.data.totalAmount),1),a("p",Ot,"\u0E3F"+c(u.data.totalDiscount),1),a("p",$t,"\u0E3F"+c(u.data.totalVat),1),a("p",Ft,"\u0E3F"+c(u.data.totalPrice),1)])])])])]),_:1}),e(Z),e(I,null,{default:t(()=>[Bt,a("span",null,c(u.data.note),1)]),_:1})]),_:1})]),_:1}),e(m,{cols:"12",md:"3",class:"d-print-none"},{default:t(()=>[e(O,{class:"mb-8"},{default:t(()=>[e(I,null,{default:t(()=>[e(D,{block:"",variant:"elevated",color:"secondary",class:"d-flex align-center"},{default:t(()=>[_(" LINE PROFILE ")]),_:1})]),_:1}),e(I,{class:"d-flex justify-center"},{default:t(()=>[e($e,{rounded:"",size:"100",class:"me-6",image:u.lineInfo.pictureUrl},null,8,["image"])]),_:1}),e(I,{class:"pt-2"},{default:t(()=>[e(Y,{class:"mt-6"},{default:t(()=>[e(E,null,{default:t(()=>[e(m,{md:"12",cols:"12"},{default:t(()=>[e(S,{modelValue:u.lineInfo.name,"onUpdate:modelValue":l[0]||(l[0]=r=>u.lineInfo.name=r),label:"LINE NAME",readonly:""},null,8,["modelValue"])]),_:1}),e(m,{md:"5",cols:"12"},{default:t(()=>[e(W,{color:M(u.data.quotationStatus),size:"large",class:"mb-2"},{default:t(()=>[_(c(R(u.data.quotationStatus)),1)]),_:1},8,["color"])]),_:1}),e(m,{md:"7",cols:"12"},{default:t(()=>[e(W,{color:A(u.data.currentStatus),size:"large",class:"mb-2"},{default:t(()=>[_(c(u.data.currentStatus=="purchased"?"\u0E0B\u0E37\u0E49\u0E2D\u0E02\u0E32\u0E22\u0E41\u0E25\u0E49\u0E27":"\u0E22\u0E31\u0E07\u0E44\u0E21\u0E48\u0E0B\u0E37\u0E49\u0E2D\u0E02\u0E32\u0E22"),1)]),_:1},8,["color"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(O,{class:"mb-8"},{default:t(()=>[e(I,null,{default:t(()=>[e(D,{block:"","prepend-icon":"tabler-send",class:"mb-2",onClick:l[1]||(l[1]=r=>f.value=!0)},{default:t(()=>[_(" \u0E2A\u0E48\u0E07\u0E43\u0E1A\u0E40\u0E2A\u0E19\u0E2D\u0E23\u0E32\u0E04\u0E32\u0E1C\u0E48\u0E32\u0E19 LINE ")]),_:1}),e(D,{block:"",color:"default",variant:"tonal","prepend-icon":"tabler-send",class:"mb-2",onClick:l[2]||(l[2]=r=>h.value=!0)},{default:t(()=>[_(" \u0E2A\u0E48\u0E07\u0E43\u0E1A\u0E40\u0E2A\u0E19\u0E2D\u0E23\u0E32\u0E04\u0E32\u0E1C\u0E48\u0E32\u0E19\u0E2D\u0E35\u0E40\u0E21\u0E25 ")]),_:1}),a("div",Lt,[a("div",At,[e(D,{block:"",variant:"tonal",color:"secondary","prepend-icon":"tabler-download",class:"mb-2",onClick:i},{default:t(()=>[_(" \u0E14\u0E32\u0E27\u0E19\u0E4C\u0E42\u0E2B\u0E25\u0E14 ")]),_:1})]),a("div",Qt,[e(D,{block:"",variant:"tonal",color:"secondary","prepend-icon":"tabler-printer",class:"mb-2",onClick:L},{default:t(()=>[_(" \u0E1B\u0E23\u0E34\u0E19\u0E17\u0E4C ")]),_:1})])]),e(D,{block:"",color:"default",variant:"tonal","prepend-icon":"tabler-transform-filled",class:"mb-0",onClick:l[3]||(l[3]=r=>b.value=!0)},{default:t(()=>[_(" \u0E40\u0E1B\u0E25\u0E35\u0E48\u0E22\u0E19\u0E40\u0E1B\u0E47\u0E19\u0E43\u0E1A\u0E41\u0E08\u0E49\u0E07\u0E2B\u0E19\u0E35\u0E49 ")]),_:1})]),_:1})]),_:1}),(k(!0),J(oe,null,ne(v(w),(r,q)=>(k(),$(O,{class:"mb-8"},{default:t(()=>[e(I,null,{default:t(()=>[e(D,{block:"","prepend-icon":"tabler-file-invoice",class:"mb-2",to:{name:"projects-account-invoice-preview",query:{_id:r._id}}},{default:t(()=>[_(" \u0E43\u0E1A\u0E41\u0E08\u0E49\u0E07\u0E2B\u0E19\u0E35\u0E49\u0E07\u0E27\u0E14\u0E17\u0E35\u0E48 "+c(q+1),1)]),_:2},1032,["to"]),e(D,{block:"",color:r.paymentStatus=="paid"?"success":"error",variant:"tonal","prepend-icon":r.paymentStatus=="paid"?" tabler-check":"tabler-x",class:"mb-2"},{default:t(()=>[_(c(r.paymentStatus),1)]),_:2},1032,["color","prepend-icon"])]),_:2},1024)]),_:2},1024))),256)),e(O,{class:"mb-8"},{default:t(()=>[e(I,null,{default:t(()=>[e(D,{block:"",color:"warning",variant:"tonal","prepend-icon":"tabler-coin-bitcoin",class:"mb-0"},{default:t(()=>[_(" \u0E22\u0E2D\u0E14\u0E43\u0E1A\u0E41\u0E08\u0E49\u0E07\u0E2B\u0E19\u0E35\u0E49\u0E04\u0E07\u0E04\u0E49\u0E32\u0E07 ")]),_:1}),e(m,{cols:"12"},{default:t(()=>[e(S,{modelValue:v(s),"onUpdate:modelValue":l[4]||(l[4]=r=>U(s)?s.value=r:null),label:"\u0E22\u0E2D\u0E14",prefix:"\u0E3F",onkeydown:"return false"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12"},{default:t(()=>[e(S,{modelValue:v(g),"onUpdate:modelValue":l[5]||(l[5]=r=>U(g)?g.value=r:null),label:"\u0E22\u0E2D\u0E14",prefix:"%",onkeydown:"return false"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),e(Ee,{isDrawerOpen:v(h),"onUpdate:isDrawerOpen":l[6]||(l[6]=r=>U(h)?h.value=r:null)},null,8,["isDrawerOpen"]),e(_e,{isDrawerOpen:v(b),"onUpdate:isDrawerOpen":l[7]||(l[7]=r=>U(b)?b.value=r:null)},null,8,["isDrawerOpen"])]),_:1}),e(Fe,{modelValue:v(f),"onUpdate:modelValue":l[10]||(l[10]=r=>U(f)?f.value=r:null),persistent:"",class:"v-dialog-sm"},{default:t(()=>[e(T,{onClick:l[8]||(l[8]=r=>f.value=!v(f))}),e(O,{title:"\u0E22\u0E37\u0E19\u0E22\u0E31\u0E19\u0E01\u0E32\u0E23\u0E2A\u0E48\u0E07"},{default:t(()=>[e(I,null,{default:t(()=>[_(c(`\u0E04\u0E38\u0E13\u0E15\u0E49\u0E2D\u0E07\u0E01\u0E32\u0E23\u0E2A\u0E48\u0E07\u0E43\u0E1A\u0E40\u0E2A\u0E19\u0E2D\u0E23\u0E32\u0E04\u0E32\u0E40\u0E25\u0E02\u0E17\u0E35\u0E48 #${u.data.documentNumber} \u0E44\u0E1B\u0E17\u0E35\u0E48\u0E44\u0E25\u0E19\u0E4C\u0E43\u0E0A\u0E48\u0E2B\u0E23\u0E37\u0E2D\u0E44\u0E21\u0E48?`),1)]),_:1}),e(I,{class:"d-flex justify-end gap-3 flex-wrap"},{default:t(()=>[e(D,{color:"secondary",variant:"tonal",onClick:l[9]||(l[9]=r=>f.value=!1)},{default:t(()=>[_(" \u0E22\u0E01\u0E40\u0E25\u0E34\u0E01 ")]),_:1}),e(D,{onClick:K},{default:t(()=>[_("\u0E2A\u0E31\u0E48\u0E07\u0E40\u0E02\u0E49\u0E32\u0E44\u0E25\u0E19\u0E4C ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(be,{modelValue:v(y).visible,"onUpdate:modelValue":l[11]||(l[11]=r=>v(y).visible=r),location:"bottom end",variant:"flat",color:v(y).color},{default:t(()=>[e(j,{icon:v(y).icon},null,8,["icon"]),_(" "+c(v(y).message),1)]),_:1},8,["modelValue","color"])])}}},Et={__name:"index",setup(F){const u=X(),P=d({id:"",name:"",pictureUrl:Be}),s=d({documentNumber:"",issuedDate:"",dueDate:"",saleLead_id:null,customerInfo:{companyInfo:{companyInfo_id:"",firstname:"",lastname:"",contactNumber:"",companyName:"",taxId:"",branch:"",address:""},lineId:"",lead_id:null},products:[{_id:"",modelCode:"",name:"",quantity:"",discountBaht:"",totalPricePerRow:""}],note:"\u0E01\u0E23\u0E38\u0E13\u0E32\u0E0A\u0E33\u0E23\u0E30\u0E40\u0E07\u0E34\u0E19\u0E15\u0E32\u0E21\u0E1A\u0E34\u0E25\u0E19\u0E35\u0E49\u0E01\u0E48\u0E2D\u0E19\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E04\u0E23\u0E1A\u0E01\u0E33\u0E2B\u0E19\u0E14",paymentMethod:"",salesperson:"",extraDiscount:"",paymentMethod:"",totalDiscount:"",totalAmount:0,totalPrice:"",vat:"",totalVat:"",currentStatus:"not yet purchased",quotationStatus:"warm",pdfPath:"",createdBy:{firstname:"",lastname:""}});(()=>{const y=u.query._id;typeof y==null||pe.fetchData("?_id="+y).then(f=>{if(f.data.code==1){const i=f.data.data;s.value.customerInfo.lead_id=i.customerInfo.lead_id,s.value._id=i._id,s.value.documentNumber=i.documentNumber,s.value.currentStatus=i.currentStatus,s.value.quotationStatus=i.quotationStatus,s.value.issuedDate=i.issuedDate.split("T")[0]+" "+i.issuedDate.split("T")[1].split(".")[0],s.value.dueDate=i.dueDate.split("T")[0]+" "+i.dueDate.split("T")[1].split(".")[0],s.value.customerInfo.companyInfo.firstname=i.customerInfo.companyInfo.firstname,s.value.customerInfo.companyInfo.lastname=i.customerInfo.companyInfo.lastname,s.value.customerInfo.companyInfo.contactNumber=i.customerInfo.companyInfo.contactNumber,s.value.customerInfo.companyInfo.companyName=i.customerInfo.companyInfo.companyName,s.value.customerInfo.companyInfo.taxId=i.customerInfo.companyInfo.taxId,s.value.customerInfo.companyInfo.branch=i.customerInfo.companyInfo.branch,s.value.customerInfo.companyInfo.address=i.customerInfo.companyInfo.address,s.value.customerInfo.lineId=i.customerInfo.lineId,s.value.paymentMethod=i.paymentMethod,s.value.extraDiscount=i.summary.extraDiscount,s.value.totalDiscount=i.summary.totalDiscount,s.value.totalPrice=i.summary.totalPrice,s.value.pdfPath=i.pdfPath,s.value.products=i.products;for(var x=0;x<s.value.products.length;x++){var h=isNaN(s.value.products[x].price)?0:parseFloat(s.value.products[x].price),b=isNaN(s.value.products[x].quantity)?0:parseFloat(s.value.products[x].quantity);s.value.products[x].totalPricePerRow=h*b,s.value.totalAmount+=s.value.products[x].totalPricePerRow}s.value.vat=i.summary.vat,s.value.totalVat=(s.value.totalAmount-s.value.totalDiscount)*s.value.vat/100,s.value.createdBy.firstname=i.createdBy.firstname,s.value.createdBy.lastname=i.createdBy.lastname,s.value.customerInfo.lineId!=null&&s.value.customerInfo.lineId!=""&&w(s.value.customerInfo.lineId)}})})();const w=y=>{ve.fetchData("/profile?line_id="+y).then(f=>{f.data.code==1&&(P.value=f.data.data)})};return(y,f)=>(k(),$(E,null,{default:t(()=>[e(m,{cols:"12",md:"12"},{default:t(()=>[e(jt,{data:v(s),"line-info":v(P),class:"d-flex justify-space-between flex-wrap flex-column flex-sm-row print-row"},null,8,["data","line-info"]),e(_e,{class:"d-flex justify-space-between flex-wrap flex-column flex-sm-row print-row"})]),_:1})]),_:1}))}};typeof re=="function"&&re(Et);export{Et as default};
