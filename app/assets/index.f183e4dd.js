import{k as t,al as h,o as P,b as N,w as l,p as s,q as i,bd as x}from"./index.35991f09.js";/* empty css                                                                               */import"./useQuotationListStore.dc1b9404.js";import{u as g}from"./useInvoiceListStore.d49afa11.js";import{b as y}from"./route-block.182765af.js";import{V as w}from"./VForm.9ba2d763.js";import{a as A,V as R}from"./VRow.f9366793.js";import"./index.a44853ab.js";import"./form.e84299e4.js";import"./forwardRefs.c003b6b8.js";const B={__name:"InvoiceEditable",props:{data:{type:null,required:!0},invoiceImageFiles:{type:Object,default:[]},invoicePDFFiles:{type:Object,default:[]},alreadyUploaded:{type:Object,default:[]},invoiceImageFilesAlreadyUploaded:{type:Object,default:[]},invoicePDFFilesAlreadyUploaded:{type:Object,default:[]},deletedImageFile:{type:Object},deletedPDFFile:{type:Object}},setup(I){return t(),t(0),t(0),t(0),t(0),t(0),t(!1),(u,d)=>null}},U={__name:"index",setup(I){const u=x(),d=t([]),r=t([]),_=t([]),b=t([]);h({image:[],pdf:[]});const e=t({quotation_id:null,paymentImages:[],invoice:{invoiceNumber:"",issuedDate:"",service:"",total:0,avatar:"",invoiceStatus:"",balance:"",dueDate:"",amountRecieved:{baht:0,percent:0},customerInfo:{companyInfo:{companyInfo_id:"",firstname:"",lastname:"",contactNumber:"",companyName:"",taxId:"",branch:"",address:""},lineId:"",lead_id:""}},paymentDetails:{totalDue:"$12,110.55",bankName:"American Bank",country:"United States",iban:"ETD95476213874685",swiftCode:"BR91905"},products:[{_id:"",modelCode:"",name:"",quantity:"",discountBaht:"",totalPricePerRow:""}],note:"",paymentMethod:"",salesperson:"",extraDiscount:"",paymentMethod:"",totalDiscount:"",totalAmount:0,totalPrice:"",vat:"",totalVat:"",thanksNote:"",paymentStatus:"",createdBy:{firstname:"",lastname:""},pdfPath:"",pdfTaxPath:"",note:"",invoiceNumbers:""});return(()=>{const c=u.query._id;typeof c==null||g.fetchData("?_id="+c).then(n=>{var m,p,v,f;if(console.log(n.data),n.data.code==1){const a=n.data.data[0];e.value.quotation_id=a.quotation_id,e.value.invoice.invoiceNumber=a.documentNumber,e.value.invoice.issuedDate=((m=a.issuedDate)==null?void 0:m.split("T")[0])+" "+((p=a.issuedDate)==null?void 0:p.split("T00")[1].split(":")[0]),e.value.invoice.dueDate=((v=a.dueDate)==null?void 0:v.split("T")[0])+" "+((f=a.dueDate)==null?void 0:f.split("T00")[1].split(":")[0]),e.value.products=a.products;for(var o=0;o<e.value.products.length;o++){var F=isNaN(e.value.products[o].price)?0:parseFloat(e.value.products[o].price),D=isNaN(e.value.products[o].quantity)?0:parseFloat(e.value.products[o].quantity);e.value.products[o].totalPricePerRow=F*D,e.value.totalAmount+=e.value.products[o].totalPricePerRow}e.value.paymentStatus=a.paymentStatus,e.value.note=a.note,e.value.invoiceNumbers=a.invoiceNumbers,e.value.invoice.customerInfo.companyInfo.firstname=a.customerInfo.companyInfo.firstname,e.value.invoice.customerInfo.companyInfo.lastname=a.customerInfo.companyInfo.lastname,e.value.invoice.customerInfo.companyInfo.contactNumber=a.customerInfo.companyInfo.contactNumber,e.value.invoice.customerInfo.companyInfo.companyName=a.customerInfo.companyInfo.companyName,e.value.invoice.customerInfo.companyInfo.taxId=a.customerInfo.companyInfo.taxId,e.value.invoice.customerInfo.companyInfo.branch=a.customerInfo.companyInfo.branch,e.value.invoice.customerInfo.companyInfo.address=a.customerInfo.companyInfo.address,e.value.invoice.amountRecieved.baht=a.amountRecieved.baht,e.value.invoice.amountRecieved.percent=a.amountRecieved.percent,e.value.invoice.customerInfo.lineId=a.customerInfo.lineId,e.value.createdBy.firstname=a.createdBy.firstname,e.value.createdBy.lastname=a.createdBy.lastname,e.value.pdfPath=a.pdfPath,e.value.pdfTaxPath=a.pdfTaxPath,r.value=a.paymentImages,b.value=a.paymentDocuments}})})(),(c,n)=>(P(),N(R,null,{default:l(()=>[s(A,{cols:"12",md:"12"},{default:l(()=>[s(w,{class:"mt-6"},{default:l(()=>[s(B,{data:i(e),invoiceImageFiles:i(d),invoiceImageFilesAlreadyUploaded:i(r),invoicePDFFiles:i(_),invoicePDFFilesAlreadyUploaded:`
            invoicePDFFilesAlreadyUploaded
          `,deletedFile:"deletedFile",class:"d-flex justify-space-between flex-wrap flex-column flex-sm-row print-row"},null,8,["data","invoiceImageFiles","invoiceImageFilesAlreadyUploaded","invoicePDFFiles"])]),_:1})]),_:1})]),_:1}))}};typeof y=="function"&&y(U);export{U as default};
